{"version":3,"sources":["file:///D:/plants_client/trunk/proj/assets/scripts/module/trade/OrderAgainConfirmPanel.ts"],"names":["OrderAgainConfirmPanel","Button","Label","Sprite","SpriteFrame","Toggle","path","Panel","prefab","item_name","tittle","item_price","item_count","str_name","all_price","toggle","Btn","item","iconNode","cfg","callback","page","num_count","cost_count","type","single","num","booth_price","min_booth_num","selectData","isworldTrade","tradeData","onLoad","CloseBy","find","node","on","onBtn","icon_1","icon_2","icon_3","push","onShow","flush","data","is_world_trade","keepPre","cross_bours","PayItemID","ThingItemId","ItemId_202","CfgMgr","GetCommon","StdCommonType","Gem","KeepPre","item_cfg","Getitem","spr","Icon","index","length","element","getComponent","spriteFrame","ResMgr","LoadResAbSub","join","folder_item","price","isChecked","Single","string","name","bagItem","BagItem","addComponent","setIsShowNum","setIsShowSelect","setIsShowTips","id","SetData","role","resource","rock","seed","water","wood","SOrderType","SELL","ToFixed","boot_cost","Bourse","stall","book","_booth_price","callBack","time","Date","now","PlayerData","roleInfo","player_id","LocalStorage","SetNumber","RemoveItem","Hide","isFengkong","RiskPanel","Show","thisObj","CheckRisk","is_ios","IOS","orderData","MsgTypeSend","CrossExchangesCreateSellOrder","bourse_id","Id","group_value","group_count","authorization","rc_token","client_os","Session","Send","getThing","value","ThingType","ThingTypeItem","count","ThingTypeRole","level","quality","experience","soldier_num","active_skills","passive_skills","is_in_building","building_id","battle_power","skills","is_assisting","ThingTypeResource","ExchangesCreateSellOrder","unit_value","unit_count","sell_things","ExchangesCreateBuyOrder","request_things","onShowTips","ItemTips","onHide","args"],"mappings":"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","sourcesContent":["import { Button, Label, Node, Sprite, SpriteFrame, Toggle, path } from \"cc\";\r\nimport { Panel } from \"../../manager/GameRoot\";\r\n\r\n\r\nexport class OrderAgainConfirmPanel extends Panel {\r\n    protected prefab: string = \"prefabs/panel/Trade/OrderAgainConfirmPanel\";\r\n\r\n    private item_name: Label;\r\n    private tittle: Label;\r\n    private item_price: Label;\r\n    private item_count: Label;\r\n    private str_name: Label;\r\n    private all_price: Label;\r\n    private toggle: Toggle;\r\n    private Btn: Button;\r\n    private item: Node;\r\n    private iconNode:Node[] = [] \r\n\r\n    private cfg:StdItem;\r\n    private callback: Function;\r\n    private page:number;\r\n    private num_count:number;\r\n    private cost_count:number;\r\n    private type:SOrderType;\r\n    private single:number;\r\n    private num:Label;\r\n    // private roleTipsLbl:Label\r\n    // private jumpNode:Node\r\n    private booth_price:Label\r\n    private min_booth_num = 0;\r\n    \r\n    private selectData:SThing;\r\n    private isworldTrade:boolean = false; //ture代表世界交易所\r\n    private tradeData: Bourse | StdCrossBours;\r\n    protected onLoad() {\r\n        this.CloseBy(\"mask\");\r\n        this.CloseBy(\"spriteFrame/Close\");\r\n        this.Btn = this.find(\"spriteFrame/Btn\", Button);\r\n        this.item_name = this.find(\"spriteFrame/item_name\", Label);\r\n        this.tittle = this.find(\"spriteFrame/numBg/tittle\", Label);\r\n        this.item_price = this.find(\"spriteFrame/MidBg/PriceLayout/item_price\", Label);\r\n        this.item_count = this.find(\"spriteFrame/MidBg/item_count\", Label);\r\n        this.str_name = this.find(\"spriteFrame/MidBg/str_name\", Label);\r\n        this.all_price = this.find(\"spriteFrame/MidBg/allPrice/all_price\", Label);\r\n        this.toggle = this.find(\"spriteFrame/jumpNode/toggle\", Toggle);\r\n        this.item = this.find(\"spriteFrame/MidBg/BagItem\");\r\n        this.num = this.find(\"spriteFrame/MidBg/num\",Label);\r\n        // this.roleTipsLbl = this.find(\"spriteFrame/roleTipsLbl\",Label);\r\n        // this.jumpNode = this.find(\"spriteFrame/jumpNode\");\r\n        this.Btn.node.on(\"click\", this.onBtn, this);\r\n        this.booth_price = this.find(\"spriteFrame/MidBg/boothPrice/booth_price\",Label);\r\n        let icon_1 = this.find(\"spriteFrame/MidBg/PriceLayout/money_icon\");\r\n        let icon_2 = this.find(\"spriteFrame/MidBg/allPrice/money_icon\");\r\n        let icon_3 = this.find(\"spriteFrame/MidBg/boothPrice/money_icon\");\r\n        this.iconNode.push(icon_1);\r\n        this.iconNode.push(icon_2);\r\n        this.iconNode.push(icon_3);\r\n    }\r\n\r\n    protected onShow(): void {\r\n    }\r\n\r\n    async flush(type: number, data: { type: number, selectData: SThing, price: number, num: number }, page, tradeData: Bourse | StdCrossBours, is_world_trade:boolean) {\r\n        if (!data) return;\r\n        this.isworldTrade = is_world_trade;\r\n        this.tradeData = tradeData;\r\n\r\n        let keepPre = 2;\r\n        if(is_world_trade){\r\n            //**不同服对应不同的货币 */  \r\n            let cross_bours = tradeData as StdCrossBours;\r\n            if(cross_bours.PayItemID == ThingItemId.ItemId_202){\r\n                keepPre = CfgMgr.GetCommon(StdCommonType.Gem).KeepPre;\r\n            }\r\n            let item_cfg = CfgMgr.Getitem(cross_bours.PayItemID);\r\n            let spr = item_cfg.Icon == \"caizuan\" ? \"caizuan_hc\" : item_cfg.Icon;\r\n            for (let index = 0; index < this.iconNode.length; index++) {\r\n                const element = this.iconNode[index];\r\n                element.getComponent(Sprite).spriteFrame = await ResMgr.LoadResAbSub(path.join(folder_item, spr, \"spriteFrame\"), SpriteFrame); \r\n            }\r\n        }else{\r\n            for (let index = 0; index < this.iconNode.length; index++) {\r\n                const element = this.iconNode[index];\r\n                element.getComponent(Sprite).spriteFrame = await ResMgr.LoadResAbSub(path.join(folder_item, \"caizuan\", \"spriteFrame\"), SpriteFrame);  \r\n            }\r\n        }\r\n        this.type = type;\r\n        this.cost_count = data.price;\r\n        this.num_count = data.num;\r\n        this.toggle.isChecked = false;\r\n        this.page = page;\r\n        this.single = tradeData.Single;\r\n        this.num.string = data.num * this.single + \"\";\r\n        // this.callback = callBack;\r\n        // this.roleTipsLbl.node.active = false;\r\n        // this.jumpNode.active = true;\r\n        let name = \"\";\r\n        if (data.selectData) {\r\n            this.selectData = data.selectData;\r\n            let bagItem = this.item.getComponent(BagItem);\r\n            if (!bagItem) bagItem = this.item.addComponent(BagItem);\r\n            bagItem.setIsShowNum(false);\r\n            bagItem.setIsShowSelect(false);\r\n            bagItem.setIsShowTips(true);\r\n            \r\n           \r\n            if (data.selectData.item) {\r\n                let cfg = null;\r\n                cfg = CfgMgr.Getitem(data.selectData.item.id);\r\n                bagItem.SetData(data.selectData);\r\n                this.cfg = cfg;\r\n            } else if (data.selectData.role) {\r\n                // this.roleTipsLbl.node.active = true;\r\n                // this.jumpNode.active = false;\r\n                this.cfg = null;\r\n                bagItem.SetData(data.selectData);\r\n            } else if (data.selectData.resource) {\r\n                let id: number;\r\n                if (data.selectData.resource.rock >= 0) {\r\n                    id = 7;\r\n                    name = \"石灵\";\r\n                } else if (data.selectData.resource.seed >= 0) {\r\n                    id = 9;\r\n                    name = \"源种\";\r\n                } else if (data.selectData.resource.water >= 0) {\r\n                    id = 8;\r\n                    name = \"水宝\";\r\n                } else if (data.selectData.resource.wood >= 0) {\r\n                    id = 6;\r\n                    name = \"古木\";\r\n                };\r\n                let item_cfg = CfgMgr.Getitem(id);\r\n                this.cfg = item_cfg;\r\n            }\r\n            bagItem.SetData(data.selectData);\r\n        }\r\n        this.item_name.string = name;\r\n        this.tittle.string = (type == SOrderType.SELL ? \"是否确定上架以下道具\" : \"是否确定上架道具订单\");\r\n        this.item_price.string = ToFixed(data.price, keepPre);\r\n        this.item_count.string = data.num + \"\";\r\n        this.str_name.string = (type == SOrderType.SELL ? \"提供价:\" : \"预消耗:\");\r\n        this.all_price.string = ToFixed((data.price * data.num), keepPre);\r\n        let boot_cost = (type == SOrderType.SELL) ? CfgMgr.GetCommon(StdCommonType.Bourse).stall : CfgMgr.GetCommon(StdCommonType.Bourse).book;\r\n        let _booth_price = data.price * data.num * boot_cost;\r\n        this.booth_price.string = _booth_price > 0.01 ? ToFixed((_booth_price), keepPre) : this.min_booth_num + \"\";\r\n    }\r\n\r\n    private onBtn() {\r\n        this.callBack();\r\n        let time = Date.now();\r\n        let id = PlayerData.roleInfo.player_id;\r\n        if (this.toggle.isChecked) {\r\n            LocalStorage.SetNumber(\"OrderAgainConfirmPanel\" + id, time)\r\n        } else {\r\n            LocalStorage.RemoveItem(\"OrderAgainConfirmPanel\" + id)\r\n        }\r\n        this.Hide()\r\n    }\r\n\r\n    private callBack() {\r\n        if(this.isworldTrade){\r\n            if (isFengkong()) {\r\n                RiskPanel.Show();\r\n                let thisObj = this;\r\n                CheckRisk((data: { authorization: string, rc_token: string }) => {\r\n                    RiskPanel.Hide();\r\n                    let is_ios = IOS ? 1 : 2;\r\n                    let cross_bours = this.tradeData as StdCrossBours;\r\n                    let orderData = {\r\n                        type: MsgTypeSend.CrossExchangesCreateSellOrder,\r\n                        data: {\r\n                            bourse_id:this.tradeData.Id,\r\n                            group_value: this.cost_count,\r\n                            group_count: this.num_count,\r\n                            authorization: data.authorization,\r\n                            rc_token: data.rc_token,\r\n                            client_os: is_ios,\r\n                            // sell_items: { type:cross_bours.PaymentType, id:cross_bours.PaymentID, count:this.num_count },\r\n                        }\r\n                    }\r\n                    Session.Send(orderData);\r\n                });\r\n            }else{\r\n                let is_ios = IOS ? 1 : 2;\r\n                let orderData = {\r\n                    type: MsgTypeSend.CrossExchangesCreateSellOrder,\r\n                    data: {\r\n                        bourse_id: this.tradeData.Id,\r\n                        group_value: this.cost_count,\r\n                        group_count: this.num_count,\r\n                        authorization: \"\",\r\n                        rc_token: \"\",\r\n                        client_os: is_ios,\r\n                        // sell_items: { type:cross_bours.PaymentType, id:cross_bours.PaymentID, count:this.num_count },\r\n                    }\r\n                }\r\n                Session.Send(orderData);\r\n            }\r\n        }else{\r\n            let getThing = () => {\r\n                let type = [1, 5, 6, 4]\r\n                let num = type[this.page]\r\n                let value\r\n                switch (num) {\r\n                    case ThingType.ThingTypeItem:\r\n                        value = {\r\n                            type: num,\r\n                            item: { id: this.selectData.item.id, count: this.num_count * this.single }\r\n                        }\r\n                        break;\r\n                    case ThingType.ThingTypeRole:\r\n                        value = {\r\n                            type: num,\r\n                            role: {\r\n                                id: this.selectData.role.id,\r\n                                type: this.selectData.role.type,\r\n                                level: this.selectData.role.level,\r\n                                quality: this.selectData.role.quality,\r\n                                experience: this.selectData.role.experience,\r\n                                soldier_num: this.selectData.role.soldier_num,\r\n                                active_skills: this.selectData.role.active_skills ? this.selectData.role.active_skills : [],\r\n                                passive_skills: this.selectData.role.passive_skills ? this.selectData.role.passive_skills : [],\r\n                                is_in_building: this.selectData.role.is_in_building,\r\n                                building_id: this.selectData.role.building_id ? this.selectData.role.building_id : 0,\r\n                                battle_power: this.selectData.role.battle_power ? this.selectData.role.battle_power : 0,\r\n                                skills: this.selectData.role.skills ? this.selectData.role.skills : [],\r\n                                is_assisting: this.selectData.role.is_assisting,\r\n                            }\r\n                        }\r\n                        break;\r\n                    case ThingType.ThingTypeResource:\r\n                        if (this.selectData.resource.rock >= 0) {\r\n                            value = {\r\n                                type: num,\r\n                                resource: { wood: 0, water: 0, rock: this.num_count * this.single , seed: 0 }\r\n                            }\r\n                        } else if (this.selectData.resource.seed >= 0) {\r\n                            value = {\r\n                                type: num,\r\n                                resource: { wood: 0, water: 0, rock: 0, seed: this.num_count * this.single  }\r\n                            }\r\n                        } else if (this.selectData.resource.water >= 0) {\r\n                            value = {\r\n                                type: num,\r\n                                resource: { wood: 0, water: this.num_count * this.single , rock: 0, seed: 0 }\r\n                            }\r\n                        } else if (this.selectData.resource.wood >= 0) {\r\n                            value = {\r\n                                type: num,\r\n                                resource: { wood: this.num_count * this.single , water: 0, rock: 0, seed: 0 }\r\n                            }\r\n                        }\r\n                        break;\r\n                }\r\n                return value\r\n            }\r\n            if (this.type == SOrderType.SELL) {\r\n                if (isFengkong()) {\r\n                    RiskPanel.Show();\r\n                    CheckRisk((data: { authorization: string, rc_token: string }) => {\r\n                        RiskPanel.Hide();\r\n                        let orderData = {\r\n                            type: MsgTypeSend.ExchangesCreateSellOrder,\r\n                            data: {\r\n                                unit_value: this.cost_count,\r\n                                unit_count: this.num_count,\r\n                                sell_things: { data: [getThing()] },\r\n                                authorization: data.authorization,\r\n                                rc_token: data.rc_token,\r\n                                client_os: IOS ? 1 : 2,\r\n                            }\r\n\r\n                        }\r\n                        Session.Send(orderData)\r\n                    })\r\n                } else {\r\n                    let orderData = {\r\n                        type: MsgTypeSend.ExchangesCreateSellOrder,\r\n                        data: {\r\n                            unit_value: this.cost_count,\r\n                            unit_count: this.num_count,\r\n                            sell_things: { data: [getThing()] },\r\n                            authorization: \"\",\r\n                            rc_token: \"\",\r\n                            client_os: IOS ? 1 : 2,\r\n                        }\r\n                    }\r\n                    Session.Send(orderData);\r\n                }\r\n            } else {\r\n                if (isFengkong()) {\r\n                    RiskPanel.Show();\r\n                    CheckRisk((data: { authorization: string, rc_token: string }) => {\r\n                        RiskPanel.Hide();\r\n                        let orderData = {\r\n                            type: MsgTypeSend.ExchangesCreateBuyOrder,\r\n                            data: {\r\n                                unit_value: this.cost_count,\r\n                                unit_count: this.num_count,\r\n                                request_things: { data: [getThing()] },\r\n                                authorization: data.authorization,\r\n                                rc_token: data.rc_token,\r\n                                client_os: IOS ? 1 : 2,\r\n                            }\r\n\r\n                        }\r\n                        Session.Send(orderData)\r\n                    })\r\n                } else {\r\n                    let orderData = {\r\n                        type: MsgTypeSend.ExchangesCreateBuyOrder,\r\n                        data: {\r\n                            unit_value: this.cost_count,\r\n                            unit_count: this.num_count,\r\n                            request_things: { data: [getThing()] },\r\n                            authorization: \"\",\r\n                            rc_token: \"\",\r\n                            client_os: IOS ? 1 : 2,\r\n                        }\r\n\r\n                    }\r\n                    Session.Send(orderData);\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    private onShowTips(){\r\n        if(this.cfg){\r\n            ItemTips.Show(this.cfg);\r\n        }\r\n    }\r\n\r\n\r\n    protected onHide(...args: any[]): void {\r\n    }\r\n\r\n}"]}