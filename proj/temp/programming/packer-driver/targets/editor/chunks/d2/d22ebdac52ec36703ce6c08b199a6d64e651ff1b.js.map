{"version":3,"sources":["file:///D:/plants_client/trunk/proj/assets/scripts/module/common/Card.ts"],"names":["Tips","Input","Label","EventMgr","Evt_PvpSerchFinsh","Second","Panel","prefab","label","btn1","btn2","okCallback","noCallback","closeLoop","onLoad","find","on","EventType","TOUCH_END","onOk","onNo","CloseBy","onShow","flush","msg","okCallBack","noCallBack","autoClose","string","active","emit","loop","Hide","onHide","args","undefined"],"mappings":";;;yIAKaA,I;;;;;;;;;;;;;;;;;;;;;;;;;;;AALJC,MAAAA,K,OAAAA,K;AAAOC,MAAAA,K,OAAAA,K;;AACPC,MAAAA,Q,iBAAAA,Q;AAAUC,MAAAA,iB,iBAAAA,iB;;AACVC,MAAAA,M,iBAAAA,M;;AACAC,MAAAA,K,iBAAAA,K;;;;;;;;;sBAEIN,I,GAAN,MAAMA,IAAN;AAAA;AAAA,0BAAyB;AAAA;AAAA;AAAA,eAClBO,MADkB,GACD,qBADC;AAAA,eAEpBC,KAFoB;AAAA,eAGpBC,IAHoB;AAAA,eAIpBC,IAJoB;AAAA,eAKpBC,UALoB;AAAA,eAMpBC,UANoB;AAAA,eAOpBC,SAPoB,GAOR,CAPQ;AAAA;;AAQlBC,QAAAA,MAAM,GAAS;AACrB,eAAKN,KAAL,GAAa,KAAKO,IAAL,CAAU,OAAV,EAAmBb,KAAnB,CAAb;AACA,eAAKO,IAAL,GAAY,KAAKM,IAAL,CAAU,MAAV,CAAZ;AACA,eAAKL,IAAL,GAAY,KAAKK,IAAL,CAAU,MAAV,CAAZ;AACA,eAAKN,IAAL,CAAUO,EAAV,CAAaf,KAAK,CAACgB,SAAN,CAAgBC,SAA7B,EAAwC,KAAKC,IAA7C,EAAmD,IAAnD;AACA,eAAKT,IAAL,CAAUM,EAAV,CAAaf,KAAK,CAACgB,SAAN,CAAgBC,SAA7B,EAAwC,KAAKE,IAA7C,EAAmD,IAAnD;AACA,eAAKC,OAAL,CAAa,MAAb;AACH;;AAESC,QAAAA,MAAM,GAAS,CAExB;;AACU,cAALC,KAAK,CAACC,GAAD,EAAcC,UAAd,EAAqCC,UAArC,EAA4DC,SAA5D,EAAgF;AACvF,eAAKnB,KAAL,CAAWoB,MAAX,GAAoBJ,GAApB;AACA,eAAKb,UAAL,GAAkBc,UAAlB;AACA,eAAKb,UAAL,GAAkBc,UAAlB;;AACA,cAAID,UAAJ,EAAgB;AACZ,iBAAKhB,IAAL,CAAUoB,MAAV,GAAmB,IAAnB;AACA,iBAAKnB,IAAL,CAAUmB,MAAV,GAAmB,IAAnB;AACH,WAHD,MAGO;AACH,iBAAKpB,IAAL,CAAUoB,MAAV,GAAmB,KAAnB;AACA,iBAAKnB,IAAL,CAAUmB,MAAV,GAAmB,KAAnB;AACH;;AACD;AAAA;AAAA,oCAASC,IAAT;AAAA;AAAA;;AACA,cAAGH,SAAH,EAAc;AACV,iBAAKd,SAAL;AACA,gBAAIkB,IAAI,GAAG,KAAKlB,SAAhB;AACA,kBAAM;AAAA;AAAA,kCAAOc,SAAP,CAAN;AACA,gBAAGI,IAAI,IAAE,KAAKlB,SAAd,EAAwB;AACxB,iBAAKmB,IAAL;AACH;AACJ;;AACSC,QAAAA,MAAM,CAAC,GAAGC,IAAJ,EAAuB;AACnC,eAAKvB,UAAL,GAAkBwB,SAAlB;AACA,eAAKvB,UAAL,GAAkBuB,SAAlB;AACA,eAAKtB,SAAL;AACH;;AACOM,QAAAA,IAAI,GAAG;AACX,eAAKR,UAAL,IAAmB,KAAKA,UAAL,EAAnB;AACA,eAAKqB,IAAL;AACH;;AACOZ,QAAAA,IAAI,GAAG;AACX,eAAKR,UAAL,IAAmB,KAAKA,UAAL,EAAnB;AACA,eAAKoB,IAAL;AACH;;AApD2B,O","sourcesContent":["import { Input, Label, Node } from \"cc\";\r\nimport { EventMgr, Evt_PvpSerchFinsh } from \"../../manager/EventMgr\";\r\nimport { Second } from \"../../utils/Utils\";\r\nimport { Panel } from \"../../manager/GameRoot\";\r\n\r\nexport class Tips extends Panel {\r\n    protected prefab: string = \"prefabs/common/Tips\";\r\n    private label: Label;\r\n    private btn1: Node;\r\n    private btn2: Node;\r\n    private okCallback: Function;\r\n    private noCallback: Function;\r\n    private closeLoop = 0;\r\n    protected onLoad(): void {\r\n        this.label = this.find(\"Label\", Label);\r\n        this.btn1 = this.find(\"btn1\");\r\n        this.btn2 = this.find(\"btn2\");\r\n        this.btn1.on(Input.EventType.TOUCH_END, this.onOk, this);\r\n        this.btn2.on(Input.EventType.TOUCH_END, this.onNo, this);\r\n        this.CloseBy(\"mask\");\r\n    }\r\n\r\n    protected onShow(): void {\r\n\r\n    }\r\n    async flush(msg: string, okCallBack?: Function, noCallBack?: Function, autoClose?: number) {\r\n        this.label.string = msg;\r\n        this.okCallback = okCallBack;\r\n        this.noCallback = noCallBack;\r\n        if (okCallBack) {\r\n            this.btn1.active = true;\r\n            this.btn2.active = true;\r\n        } else {\r\n            this.btn1.active = false;\r\n            this.btn2.active = false;\r\n        }\r\n        EventMgr.emit(Evt_PvpSerchFinsh);\r\n        if(autoClose) {\r\n            this.closeLoop++;\r\n            let loop = this.closeLoop;\r\n            await Second(autoClose);\r\n            if(loop!=this.closeLoop)return;\r\n            this.Hide();\r\n        }\r\n    }\r\n    protected onHide(...args: any[]): void {\r\n        this.okCallback = undefined;\r\n        this.noCallback = undefined;\r\n        this.closeLoop++;\r\n    }\r\n    private onOk() {\r\n        this.okCallback && this.okCallback();\r\n        this.Hide();\r\n    }\r\n    private onNo() {\r\n        this.noCallback && this.noCallback();\r\n        this.Hide();\r\n    }\r\n}"]}