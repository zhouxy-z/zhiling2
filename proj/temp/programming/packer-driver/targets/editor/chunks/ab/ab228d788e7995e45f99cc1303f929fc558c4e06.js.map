{"version":3,"sources":["file:///D:/plants_client/trunk/proj/assets/scripts/module/common/Tips2.ts"],"names":["Tips2","RichText","ScrollView","UITransform","Widget","Panel","CfgMgr","prefab","label","scroll_max_height","onLoad","find","CloseBy","onShow","flush","id","str","GetInstructionsById","result","replace","string","listUi","getComponent","labH","node","height","view","viewWidget","updateAlignment","scrollToTop","onHide","args","onLabSizeChange","console","log"],"mappings":";;;yIAIaA,K;;;;;;;;;;;;;;;;;;;AAJJC,MAAAA,Q,OAAAA,Q;AAAUC,MAAAA,U,OAAAA,U;AAAYC,MAAAA,W,OAAAA,W;AAAmBC,MAAAA,M,OAAAA,M;;AACzCC,MAAAA,K,iBAAAA,K;;AACAC,MAAAA,M,iBAAAA,M;;;;;;;;;uBAEIN,K,GAAN,MAAMA,KAAN;AAAA;AAAA,0BAA0B;AAAA;AAAA;AAAA,eACnBO,MADmB,GACF,sBADE;AAAA,eAErBL,UAFqB;AAAA,eAIrBM,KAJqB;AAAA,eAKrBC,iBALqB,GAKD,GALC;AAAA;;AAMnBC,QAAAA,MAAM,GAAS;AACrB,eAAKF,KAAL,GAAa,KAAKG,IAAL,CAAU,qCAAV,EAAiDV,QAAjD,CAAb;AACA,eAAKC,UAAL,GAAkB,KAAKS,IAAL,CAAU,kBAAV,EAA8BT,UAA9B,CAAlB;AACA,eAAKU,OAAL,CAAa,qBAAb;AACA,eAAKA,OAAL,CAAa,MAAb;AACH;;AAESC,QAAAA,MAAM,GAAS,CAExB;;AACMC,QAAAA,KAAK,CAACC,EAAD,EAAmB;AAC3B,cAAIC,GAAW,GAAG;AAAA;AAAA,gCAAOC,mBAAP,CAA2BF,EAA3B,CAAlB;AACA,cAAIG,MAAM,GAAGF,GAAG,CAACG,OAAJ,CAAY,MAAZ,EAAoB,IAApB,CAAb;AACA,eAAKX,KAAL,CAAWY,MAAX,GAAoBF,MAApB;AACA,cAAIG,MAAkB,GAAG,KAAKnB,UAAL,CAAgBoB,YAAhB,CAA6BnB,WAA7B,CAAzB;AACA,cAAIoB,IAAW,GAAG,KAAKf,KAAL,CAAWgB,IAAX,CAAgBF,YAAhB,CAA6BnB,WAA7B,EAA0CsB,MAA5D;AACAJ,UAAAA,MAAM,CAACI,MAAP,GAAgBF,IAAI,IAAI,KAAKd,iBAAb,GAAiC,KAAKA,iBAAtC,GAA0Dc,IAA1E;AACA,cAAIG,IAAS,GAAG,KAAKf,IAAL,CAAU,uBAAV,CAAhB;AACA,cAAIgB,UAAiB,GAAGD,IAAI,CAACJ,YAAL,CAAkBlB,MAAlB,CAAxB;AACAuB,UAAAA,UAAU,CAACC,eAAX;AACA,eAAK1B,UAAL,CAAgB2B,WAAhB,CAA4B,IAA5B;AACH;;AACSC,QAAAA,MAAM,CAAC,GAAGC,IAAJ,EAAuB,CAEtC;;AAEOC,QAAAA,eAAe,GAAO;AAC1BC,UAAAA,OAAO,CAACC,GAAR,CAAY,cAAc,KAAK1B,KAAL,CAAWgB,IAAX,CAAgBF,YAAhB,CAA6BnB,WAA7B,EAA0CsB,MAApE;AACH;;AAlC4B,O","sourcesContent":["import { RichText, ScrollView, UITransform, Node, Widget} from \"cc\";\r\nimport { Panel } from \"../../manager/GameRoot\";\r\nimport { CfgMgr } from \"../../manager/CfgMgr\";\r\n\r\nexport class Tips2 extends Panel {\r\n    protected prefab: string = \"prefabs/common/Tips2\";\r\n    private ScrollView: ScrollView\r\n\r\n    private label: RichText;\r\n    private scroll_max_height = 500;\r\n    protected onLoad(): void {\r\n        this.label = this.find(\"frame/ScrollView/view/content/label\", RichText);\r\n        this.ScrollView = this.find(\"frame/ScrollView\", ScrollView);\r\n        this.CloseBy(\"frame/topCont/close\");\r\n        this.CloseBy(\"mask\");\r\n    }\r\n\r\n    protected onShow(): void {\r\n\r\n    }\r\n    public flush(id: number): void {\r\n        let str: string = CfgMgr.GetInstructionsById(id)\r\n        let result = str.replace(/\\\\n/g, '\\n');\r\n        this.label.string = result;\r\n        let listUi:UITransform = this.ScrollView.getComponent(UITransform);\r\n        let labH:number = this.label.node.getComponent(UITransform).height;\r\n        listUi.height = labH >= this.scroll_max_height ? this.scroll_max_height : labH;\r\n        let view:Node = this.find(\"frame/ScrollView/view\");\r\n        let viewWidget:Widget = view.getComponent(Widget);\r\n        viewWidget.updateAlignment();\r\n        this.ScrollView.scrollToTop(0.01);\r\n    }\r\n    protected onHide(...args: any[]): void {\r\n\r\n    }\r\n\r\n    private onLabSizeChange():void{\r\n        console.log(\"-------->\" + this.label.node.getComponent(UITransform).height)\r\n    }\r\n}"]}