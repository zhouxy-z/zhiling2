{"version":3,"sources":["file:///D:/plants_client/trunk/proj/assets/resources/bag/BagItem.ts"],"names":["BagItem","Component","Input","Label","Sprite","SpriteFrame","Toggle","Vec3","path","PlayerData","CardQuality","CfgMgr","ItemType","StdCommonType","ThingItemId","ThingType","ResMgr","folder_head_card","folder_icon","folder_item","ToFixed","formatNumber","ItemTips","TradeHeroPanel","GameSet","bg","maskBg","icon","mask","num","quality","newIcon","itemName","select","redPoint","data","showSelect","isShowTips","showRedPoint","isShowRoleLock","time_lock","complete","hasLoad","$loadSub","UpdateBagItem","item","bagItem","getComponent","addComponent","SetData","onLoad","node","getChildByName","active","on","EventType","TOUCH_END","onClick","loadSub","thisObj","Promise","resolve","reject","undefined","setItem","setThing","std","Getitem","id","isNew","enabled","name","Items","spriteFrame","LoadResAbSub","join","Icon","Itemtpye","shard","ItemEffect2","Quality","ItemId_1","ItemId_2","ItemId_3","string","count","isHaveRedPoint","Type","ThingTypeItem","ItemEffect3","box","ItemName","thing","scale","type","ThingTypeCurrency","GetMoneyName","currency1std","currency","value","ThingTypeGold","currency2std","ThingTypeEquipment","ThingTypeRole","GetRole","role","Name","role_lock","getChildByPath","time","trade_cd","GetServerTime","lbl_time","show_time","countDown2","d","h","m","s","clearInterval","seconds","setInterval","ThingTypeResource","resource","rock","ItemId_7","seed","ItemId_9","water","ItemId_8","wood","ItemId_6","ThingTypeGemstone","currency3std","ThingTypeGem","currency77std","ItemId_202","keepPre","GetCommon","Gem","KeepPre","ThingTypeMedal","currency74std","ItemId_74","setIsShowNum","isshow","setIsShowSelect","setIsShowTips","setIsShowRedPoint","val","setIsRoleLockShow","e","Show"],"mappings":"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","sourcesContent":["import { Component, EventTouch, Input, Label, Node, Sprite, SpriteFrame, Toggle, Vec3, input, path } from \"cc\";\r\nimport PlayerData, { } from \"../roleModule/PlayerData\"\r\nimport { SPlayerDataItem, SThing } from \"../roleModule/PlayerStruct\";\r\nimport { CardQuality, CfgMgr, ItemType, ResourceName, ResourceType, StdCommonType, StdItem, ThingItemId, ThingType } from \"../../manager/CfgMgr\";\r\nimport { ResMgr, folder_head_card, folder_icon, folder_item } from \"../../manager/ResMgr\";\r\nimport { ToFixed, formatK, formatNumber } from \"../../utils/Utils\";\r\nimport { SaveGameData } from \"../../net/MsgProxy\";\r\nimport { ItemTips } from \"../common/ItemTips\";\r\nimport { TradeHeroPanel } from \"../trade/TradeHeroPanel\";\r\nimport { GameSet } from \"../GameSet\";\r\n\r\nexport class BagItem extends Component {\r\n\r\n    /**\r\n     * 更新背包道具item\r\n     * @param item \r\n     * @param data \r\n     */\r\n    static UpdateBagItem(item: Node, data: SPlayerDataItem | SThing) {\r\n        let bagItem = item.getComponent(BagItem);\r\n        if (!bagItem) bagItem = item.addComponent(BagItem);\r\n        bagItem.SetData(data);\r\n    }\r\n\r\n\r\n    private bg: Sprite;\r\n    private maskBg: Sprite;\r\n    private icon: Sprite;\r\n    private mask: Sprite;\r\n    private num: Label;\r\n    private quality: Sprite\r\n    private newIcon: Node;\r\n    private itemName: Label;\r\n    private select: Node;\r\n    private redPoint: Node;\r\n    private data: SPlayerDataItem | SThing;\r\n\r\n    private showSelect: boolean = true;\r\n    private isShowTips: boolean = false;\r\n    private showRedPoint: boolean = false;\r\n    private isShowRoleLock: boolean = false;\r\n    private time_lock: number;\r\n    protected onLoad(): void {\r\n        this.bg = this.node.getChildByName(\"bg\").getComponent(Sprite);\r\n        this.maskBg = this.node.getChildByName(\"maskbg\").getComponent(Sprite);\r\n        this.icon = this.node.getChildByName(\"icon\").getComponent(Sprite);\r\n        this.mask = this.node.getChildByName(\"mask\").getComponent(Sprite);\r\n        this.num = this.node.getChildByName(\"num\").getComponent(Label);\r\n        this.quality = this.node.getChildByName(\"quality\").getComponent(Sprite);\r\n        this.newIcon = this.node.getChildByName(\"isNew\");\r\n        this.itemName = this.node.getChildByName(\"name\").getComponent(Label);\r\n        this.redPoint = this.node.getChildByName(\"redPoint\");\r\n        this.redPoint.active = false;\r\n        this.select = this.node.getChildByName(\"select\");\r\n        this.node.on(Input.EventType.TOUCH_END, this.onClick, this);\r\n        this.hasLoad = true;\r\n        this.complete?.();\r\n    }\r\n\r\n    protected complete: Function;\r\n    protected hasLoad = false;\r\n    protected $loadSub: Promise<any>;\r\n    protected get loadSub() {\r\n        if (this.$loadSub) return this.$loadSub;\r\n        let thisObj = this;\r\n        this.$loadSub = new Promise((resolve, reject) => {\r\n            thisObj.complete = resolve;\r\n        });\r\n        return this.$loadSub;\r\n    }\r\n\r\n    /**\r\n     * 刷新道具数据\r\n     * @param data \r\n     */\r\n    async SetData(data: SPlayerDataItem | SThing) {\r\n        if (!this.hasLoad) await this.loadSub;\r\n        this.data = data;\r\n        if (data['id'] != undefined) {\r\n            this.setItem(<unknown>data as SPlayerDataItem);\r\n        } else {\r\n            this.setThing(<unknown>data as SThing);\r\n        }\r\n    }\r\n    protected async setItem(data: SPlayerDataItem) {\r\n        let std: StdItem = CfgMgr.Getitem(data.id);\r\n        this.newIcon.active = data.isNew == true;\r\n        data.isNew = false;\r\n        this.node.getComponent(Toggle).enabled = this.showSelect;\r\n        this.node.name = std.Items + \"\";\r\n\r\n        this.icon.spriteFrame = await ResMgr.LoadResAbSub(path.join(folder_item, std.Icon, \"spriteFrame\"), SpriteFrame);\r\n        if (std.Itemtpye == ItemType.shard) {\r\n            this.quality.node.active = true;\r\n            this.quality.spriteFrame = await ResMgr.LoadResAbSub(path.join(folder_icon, \"quality\", CardQuality[std.ItemEffect2], \"spriteFrame\"), SpriteFrame);\r\n            this.bg.spriteFrame = await ResMgr.LoadResAbSub(path.join(folder_icon, \"quality\", CardQuality[std.ItemEffect2] + \"_bag_bg\", \"spriteFrame\"), SpriteFrame);\r\n\r\n            this.maskBg.node.active = true;\r\n            this.maskBg.spriteFrame = await ResMgr.LoadResAbSub(path.join(folder_icon, \"quality\", CardQuality[std.ItemEffect2] + \"_bag_mask_bg\", \"spriteFrame\"), SpriteFrame);\r\n            this.mask.node.active = true;\r\n            this.mask.spriteFrame = await ResMgr.LoadResAbSub(path.join(folder_icon, \"quality\", CardQuality[std.ItemEffect2] + \"_bag_mask\", \"spriteFrame\"), SpriteFrame);\r\n        } else {\r\n            this.maskBg.node.active = false;\r\n            this.quality.node.active = false;\r\n            this.mask.node.active = false;\r\n            if (std.Quality) {\r\n                this.bg.spriteFrame = await ResMgr.LoadResAbSub(path.join(folder_icon, \"quality\", CardQuality[std.Quality] + \"_bag_bg\", \"spriteFrame\"), SpriteFrame);\r\n            } else {\r\n                this.bg.spriteFrame = await ResMgr.LoadResAbSub(path.join(folder_icon, \"quality/defineBg/spriteFrame\"), SpriteFrame);\r\n            }\r\n        }\r\n        if (ThingItemId[data.id]) {\r\n            if (data.id == ThingItemId.ItemId_1 || data.id == ThingItemId.ItemId_2 || data.id == ThingItemId.ItemId_3) {\r\n                this.num.string = ToFixed(data.count, 2);\r\n            } else {\r\n                this.num.string = formatNumber(data.count, 2);\r\n            }\r\n        } else {\r\n            this.num.string = formatNumber(data.count);\r\n        }\r\n        let isHaveRedPoint: boolean = false;\r\n        if (this.showRedPoint) {\r\n            if (std.Type == ThingType.ThingTypeItem) {\r\n                if (std.Itemtpye == ItemType.shard) {\r\n                    isHaveRedPoint = data.count >= std.ItemEffect3;\r\n                } else if (std.Itemtpye == ItemType.box) {\r\n                    isHaveRedPoint = true;\r\n                }\r\n            }\r\n        }\r\n        this.redPoint.active = isHaveRedPoint;\r\n        this.itemName.string = std.ItemName;\r\n    }\r\n    protected async setThing(thing: SThing) {\r\n        this.newIcon.active = false;\r\n        // this.select.active = this.showSelect;\r\n        this.node.getComponent(Toggle).enabled = this.showSelect;\r\n        this.maskBg.node.active = false;\r\n        this.quality.node.active = false;\r\n        this.mask.node.active = false;\r\n        this.icon.node.scale = new Vec3(1, 1, 1);\r\n        switch (thing.type) {\r\n            case ThingType.ThingTypeItem:\r\n                this.setItem({ id: thing.item.id, count: thing.item.count });\r\n                break;\r\n            case ThingType.ThingTypeCurrency:\r\n                this.itemName.string = GameSet.GetMoneyName();//\"彩虹体\";           \r\n                let currency1std: StdItem = CfgMgr.Getitem(ThingItemId.ItemId_1);\r\n                switch (thing.currency.type) {\r\n                    case 0://彩虹体\r\n                        this.num.string = ToFixed(thing.currency.value, 2);\r\n                        currency1std = CfgMgr.Getitem(ThingItemId.ItemId_1);\r\n                        break;\r\n                    case 2://金币\r\n                        this.num.string = ToFixed(thing.currency.value, 2);\r\n                        currency1std = CfgMgr.Getitem(ThingItemId.ItemId_2);\r\n                        break;\r\n                    case 3://原石\r\n                        this.num.string = ToFixed(thing.currency.value, 4);\r\n                        currency1std = CfgMgr.Getitem(ThingItemId.ItemId_3);\r\n                        break;\r\n                }\r\n                this.icon.spriteFrame = await ResMgr.LoadResAbSub(path.join(folder_item, currency1std.Icon, \"spriteFrame\"), SpriteFrame);\r\n                this.bg.spriteFrame = await ResMgr.LoadResAbSub(path.join(folder_icon, \"quality\", CardQuality[currency1std.Quality] + \"_bag_bg\", \"spriteFrame\"), SpriteFrame);\r\n                this.node.name = ThingType[thing.type];\r\n                break;\r\n            case ThingType.ThingTypeGold:\r\n                this.itemName.string = \"金币\";\r\n                let currency2std: StdItem = CfgMgr.Getitem(ThingItemId.ItemId_2);\r\n                switch (thing.currency.type) {\r\n                    case 0://彩虹体\r\n                        this.num.string = ToFixed(thing.currency.value, 2);\r\n                        currency2std = CfgMgr.Getitem(ThingItemId.ItemId_1);\r\n                        break;\r\n                    case 2://金币\r\n                        this.num.string = ToFixed(thing.currency.value, 2);\r\n                        currency2std = CfgMgr.Getitem(ThingItemId.ItemId_2);\r\n                        break;\r\n                    case 3://原石\r\n                        this.num.string = ToFixed(thing.currency.value, 4);\r\n                        currency2std = CfgMgr.Getitem(ThingItemId.ItemId_3);\r\n                        break;\r\n                }\r\n                this.icon.spriteFrame = await ResMgr.LoadResAbSub(path.join(folder_item, currency2std.Icon, \"spriteFrame\"), SpriteFrame);\r\n                this.bg.spriteFrame = await ResMgr.LoadResAbSub(path.join(folder_icon, \"quality\", CardQuality[currency2std.Quality] + \"_bag_bg\", \"spriteFrame\"), SpriteFrame);\r\n                this.node.name = ThingType[thing.type];\r\n                break;\r\n            case ThingType.ThingTypeEquipment:\r\n                this.num.string = \"\";\r\n                this.itemName.string = \"武器\";\r\n                this.icon.node.active = false;\r\n                this.bg.spriteFrame = await ResMgr.LoadResAbSub(path.join(folder_icon, \"quality/defineBg/spriteFrame\"), SpriteFrame);\r\n                this.node.name = ThingType[thing.type];\r\n                break;\r\n            case ThingType.ThingTypeRole:\r\n                // this.node.getComponent(Toggle).enabled = true;\r\n                let std = CfgMgr.GetRole()[thing.role.type];\r\n                this.num.string = thing['count'] || \"1\";\r\n                this.itemName.string = std.Name;\r\n                this.quality.node.active = true;\r\n                this.icon.spriteFrame = await ResMgr.LoadResAbSub(path.join(folder_head_card, std.Icon, \"spriteFrame\"), SpriteFrame);\r\n                this.icon.node.scale = new Vec3(0.8, 0.8, 0.8);\r\n                if (thing.role.quality) {\r\n                    this.bg.spriteFrame = await ResMgr.LoadResAbSub(path.join(folder_icon, \"quality\", CardQuality[thing.role.quality] + \"_bag_bg\", \"spriteFrame\"), SpriteFrame);\r\n                    this.quality.spriteFrame = await ResMgr.LoadResAbSub(path.join(folder_icon, \"quality\", CardQuality[thing.role.quality], \"spriteFrame\"), SpriteFrame);\r\n                } else {\r\n                    this.bg.spriteFrame = await ResMgr.LoadResAbSub(path.join(folder_icon, \"quality/defineBg/spriteFrame\"), SpriteFrame);\r\n                }\r\n                this.node.name = \"role_\" + thing.role.type;\r\n                let role_lock = this.node.getChildByName(\"role_lock\");\r\n                let node = this.node.getChildByPath(\"role_lock/lbl_time\");\r\n                if (role_lock && node) {\r\n                    role_lock.active = false;\r\n                }\r\n                let time = thing.role.trade_cd - PlayerData.GetServerTime();\r\n                if (this.isShowRoleLock && thing.role.trade_cd > 0 && time > 0) {\r\n                    let lbl_time: Label;\r\n                    if (role_lock && node) {\r\n                        role_lock.active = true;\r\n                        lbl_time = node.getComponent(Label);\r\n                        let show_time = PlayerData.countDown2(thing.role.trade_cd);\r\n                        if (show_time.d > 0) {\r\n                            lbl_time.string = show_time.d + \"天\";\r\n                        } else {\r\n                            lbl_time.string = show_time.h + \":\" + show_time.m + \":\" + show_time.s;\r\n                        }\r\n                        if (this.time_lock) {\r\n                            clearInterval(this.time_lock)\r\n                        }\r\n                        let seconds = thing.role.trade_cd - PlayerData.GetServerTime();\r\n                        this.time_lock = setInterval(() => {\r\n                            if (seconds > 0) {\r\n                                seconds -= 1;\r\n                                let time = PlayerData.countDown2(thing.role.trade_cd);\r\n                                if (time.d > 0) {\r\n                                    lbl_time.string = time.d + \"天\";\r\n                                } else {\r\n                                    lbl_time.string = time.h + \":\" + time.m + \":\" + time.s;\r\n                                }\r\n                            } else {\r\n                                role_lock.active = false;\r\n                                clearInterval(this.time_lock);\r\n                            }\r\n                        }, 1000)\r\n                    }\r\n                }\r\n\r\n                break;\r\n            case ThingType.ThingTypeResource:\r\n                if (thing.resource.rock) {\r\n                    this.setItem({ id: ThingItemId.ItemId_7, count: thing.resource.rock });\r\n                } else if (thing.resource.seed) {\r\n                    this.setItem({ id: ThingItemId.ItemId_9, count: thing.resource.seed });\r\n                } else if (thing.resource.water) {\r\n                    this.setItem({ id: ThingItemId.ItemId_8, count: thing.resource.water });\r\n                } else if (thing.resource.wood) {\r\n                    this.setItem({ id: ThingItemId.ItemId_6, count: thing.resource.wood });\r\n                }\r\n                break;\r\n            case ThingType.ThingTypeGemstone:\r\n                this.itemName.string = \"辉耀石\";\r\n                let currency3std: StdItem = CfgMgr.Getitem(ThingItemId.ItemId_3);\r\n                switch (thing.currency.type) {\r\n                    case 0://彩虹体\r\n                        this.num.string = ToFixed(thing.currency.value, 2);\r\n                        currency3std = CfgMgr.Getitem(ThingItemId.ItemId_1);\r\n                        break;\r\n                    case 2://金币\r\n                        this.num.string = ToFixed(thing.currency.value, 2);\r\n                        currency3std = CfgMgr.Getitem(ThingItemId.ItemId_2);\r\n                        break;\r\n                    case 3://原石\r\n                        this.num.string = ToFixed(thing.currency.value, 4);\r\n                        currency3std = CfgMgr.Getitem(ThingItemId.ItemId_3);\r\n                        break;\r\n                }\r\n\r\n                this.icon.spriteFrame = await ResMgr.LoadResAbSub(path.join(folder_item, currency3std.Icon, \"spriteFrame\"), SpriteFrame);\r\n                this.bg.spriteFrame = await ResMgr.LoadResAbSub(path.join(folder_icon, \"quality\", CardQuality[currency3std.Quality] + \"_bag_bg\", \"spriteFrame\"), SpriteFrame);\r\n                this.node.name = ThingType[thing.type];\r\n                break;\r\n            case ThingType.ThingTypeGem:\r\n                this.itemName.string = \"宝石\";\r\n                let currency77std: StdItem = CfgMgr.Getitem(ThingItemId.ItemId_202);\r\n                switch (thing.currency.type) {\r\n                    case 77://世界宝石\r\n                        let keepPre = CfgMgr.GetCommon(StdCommonType.Gem).KeepPre;\r\n                        this.num.string = ToFixed(thing.currency.value, keepPre);\r\n                        break;\r\n                }\r\n\r\n                this.icon.spriteFrame = await ResMgr.LoadResAbSub(path.join(folder_item, currency77std.Icon, \"spriteFrame\"), SpriteFrame);\r\n                this.bg.spriteFrame = await ResMgr.LoadResAbSub(path.join(folder_icon, \"quality\", CardQuality[currency77std.Quality] + \"_bag_bg\", \"spriteFrame\"), SpriteFrame);\r\n                this.node.name = ThingType[thing.type];\r\n                break;\r\n            case ThingType.ThingTypeMedal:\r\n                \r\n                let currency74std: StdItem = CfgMgr.Getitem(ThingItemId.ItemId_74);\r\n                this.itemName.string = currency74std.ItemName;\r\n                switch (thing.currency.type) {\r\n                    case 74://勋章\r\n                        this.num.string = ToFixed(thing.currency.value, 2);\r\n                        break;\r\n                }\r\n\r\n                this.icon.spriteFrame = await ResMgr.LoadResAbSub(path.join(folder_item, currency74std.Icon, \"spriteFrame\"), SpriteFrame);\r\n                this.bg.spriteFrame = await ResMgr.LoadResAbSub(path.join(folder_icon, \"quality\", CardQuality[currency74std.Quality] + \"_bag_bg\", \"spriteFrame\"), SpriteFrame);\r\n                this.node.name = ThingType[thing.type];\r\n                break;\r\n        }\r\n    }\r\n\r\n    /**是否展示道具数量 true展示，false不展示 */\r\n    async setIsShowNum(isshow: boolean) {\r\n        if (!this.hasLoad) await this.loadSub;\r\n        this.num.node.active = isshow;\r\n    }\r\n\r\n    /**是否展示道具选中状态 true展示，false不展示 */\r\n    async setIsShowSelect(isshow: boolean) {\r\n        this.showSelect = isshow;\r\n        this.node.getComponent(Toggle).enabled = this.showSelect;\r\n    }\r\n\r\n    /**是否展示道具tips true展示，false不展示 */\r\n    async setIsShowTips(isshow: boolean) {\r\n        this.isShowTips = isshow;\r\n    }\r\n    setIsShowRedPoint(val: boolean) {\r\n        this.showRedPoint = val;\r\n    }\r\n\r\n    /**是否展示角色倒计时 */\r\n    setIsRoleLockShow(isshow: boolean) {\r\n        this.isShowRoleLock = isshow;\r\n    }\r\n\r\n\r\n    private onClick(e: EventTouch) {\r\n        if (this.isShowTips) {\r\n            if ((this.data as SThing).role) {\r\n                TradeHeroPanel.Show((this.data as SThing).role)\r\n            } else {\r\n                ItemTips.Show(this.data)\r\n            }\r\n        }\r\n    }\r\n}"]}