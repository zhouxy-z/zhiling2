{"version":3,"sources":["file:///D:/plants_client/trunk/proj/assets/scripts/module/login/Home.ts"],"names":["Home","Button","Input","PageView","Panel","TaskPanel","prefab","taskButton","PageViewTime","onLoad","find","node","on","onButton","onShow","flush","args","starPage","onHide","Show","pagetype","pagetypenum_0","pagetypenum_1","pagetypenum_2","pageName","movePage","EventType","TOUCH_MOVE","touchMove","scrollToPage","pageView","index","getPages","length","getCurrentPageIndex","update","dt","setCurrentPageIndex"],"mappings":";;;0HAKaA,I;;;;;;;;;;;;;;;;;;;AALJC,MAAAA,M,OAAAA,M;AAAoCC,MAAAA,K,OAAAA,K;AAAaC,MAAAA,Q,OAAAA,Q;;AACjDC,MAAAA,K,iBAAAA,K;;AACAC,MAAAA,S,iBAAAA,S;;;;;;;;;sBAGIL,I,GAAN,MAAMA,IAAN;AAAA;AAAA,0BAAwB;AAAA;AAAA;AAAA,eAEjBM,MAFiB,GAEA,cAFA;AAAA,eAInBC,UAJmB;AAAA,eAMnBJ,QANmB;AAAA,eAOnBK,YAPmB,GAOI,CAPJ;AAAA;;AASjBC,QAAAA,MAAM,GAAS;AACrB,eAAKN,QAAL,GAAgB,KAAKO,IAAL,CAAU,UAAV,EAAsBP,QAAtB,CAAhB;AACA,eAAKI,UAAL,GAAkB,KAAKG,IAAL,CAAU,YAAV,EAAwBT,MAAxB,CAAlB;AACA,eAAKM,UAAL,CAAgBI,IAAhB,CAAqBC,EAArB,CAAwB,OAAxB,EAAiC,KAAKC,QAAtC,EAAgD,IAAhD;AACH;;AAESC,QAAAA,MAAM,GAAS,CAExB;;AAEMC,QAAAA,KAAK,CAAC,GAAGC,IAAJ,EAAuB;AACnC;AACI,eAAKC,QAAL;AACH;;AAESC,QAAAA,MAAM,CAAC,GAAGF,IAAJ,EAAuB,CAEtC;;AAEOH,QAAAA,QAAQ,GAAE;AACd;AAAA;AAAA,sCAAUM,IAAV;AACH;;AAEOF,QAAAA,QAAQ,GAAE;AACd,cAAIG,QAAQ,GAAG,CAAC,CAAD,EAAG,CAAH,EAAK,CAAL,CAAf;AACA,cAAIC,aAAa,GAAG,CAApB;AACA,cAAIC,aAAa,GAAG,CAApB;AACA,cAAIC,aAAa,GAAG,CAApB;AACA,cAAIC,QAAQ,GAAG,CAAC,OAAD,EAAU,OAAV,EAAmB,OAAnB,EAA4B,OAA5B,EAAqC,OAArC,CAAf;AACA,eAAKrB,QAAL,CAAcQ,IAAd,CAAmBC,EAAnB,CAAsB,cAAtB,EAAsC,KAAKa,QAA3C,EAAqD,IAArD;AACA,eAAKtB,QAAL,CAAcQ,IAAd,CAAmBC,EAAnB,CAAsBV,KAAK,CAACwB,SAAN,CAAgBC,UAAtC,EAAkD,KAAKC,SAAvD,EAAkE,IAAlE;AACA,eAAKzB,QAAL,CAAc0B,YAAd,CAA2B,CAA3B,EAA8B,IAA9B,EARc,CASd;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACH;;AACOJ,QAAAA,QAAQ,CAACK,QAAD,EAAoB;AAClC,cAAIC,KAAK,GAAI,KAAK5B,QAAL,CAAc6B,QAAd,GAAyBC,MAAtC;;AAEE,cAAG,KAAK9B,QAAL,CAAc+B,mBAAd,MAAuC,CAA1C,EAA4C;AACxC,iBAAK/B,QAAL,CAAc0B,YAAd,CAA2BE,KAAK,GAAG,CAAnC,EAAqC,IAArC;AACH,WAFD,MAEM,IAAG,KAAK5B,QAAL,CAAc+B,mBAAd,MAAuCH,KAAK,GAAG,CAAlD,EAAoD;AACtD,iBAAK5B,QAAL,CAAc0B,YAAd,CAA2B,CAA3B,EAA6B,IAA7B;AACH;AACJ;;AAEOD,QAAAA,SAAS,GAAE;AACf,eAAKpB,YAAL,GAAoB,CAApB;AACH;;AAES2B,QAAAA,MAAM,CAACC,EAAD,EAAmB;AAC/B,eAAK5B,YAAL,IAAqB4B,EAArB;;AACA,cAAG,KAAK5B,YAAL,IAAqB,CAAxB,EAA0B;AACtB,iBAAKL,QAAL,CAAckC,mBAAd,CAAkC,KAAKlC,QAAL,CAAc+B,mBAAd,KAAsC,CAAxE;AACA,iBAAK1B,YAAL,GAAoB,CAApB;AACH;AACJ;;AA3E0B,O","sourcesContent":["import { Button, CCClass, Event, EventTouch, Input, Node, PageView, UITransform, _decorator, instantiate, size } from \"cc\";\r\nimport { Panel } from \"../../manager/GameRoot\";\r\nimport { TaskPanel } from \"../task/TaskPanel\";\r\nimport { RedDotId, RedDotMgr } from \"../../manager/RedDotMgr\";\r\n\r\nexport class Home extends Panel{\r\n\r\n    protected prefab: string = 'prefabs/Home';\r\n\r\n    private taskButton:Button\r\n\r\n    private PageView: PageView\r\n    private PageViewTime: number = 8;\r\n\r\n    protected onLoad(): void {\r\n        this.PageView = this.find(\"PageView\", PageView);\r\n        this.taskButton = this.find(\"taskButton\", Button);\r\n        this.taskButton.node.on(\"click\", this.onButton, this);\r\n    }\r\n\r\n    protected onShow(): void {\r\n        \r\n    }\r\n\r\n    public flush(...args: any[]): void {\r\n    //    RedDotMgr.getInstance().registerNode(RedDotId.zhu)\r\n        this.starPage();\r\n    }\r\n\r\n    protected onHide(...args: any[]): void {\r\n        \r\n    }\r\n\r\n    private onButton(){\r\n        TaskPanel.Show();\r\n    }\r\n\r\n    private starPage(){\r\n        let pagetype = [0,1,2]\r\n        let pagetypenum_0 = 2\r\n        let pagetypenum_1 = 3\r\n        let pagetypenum_2 = 2\r\n        let pageName = [\"page1\", \"page2\", \"page3\", \"page4\", \"page5\"]\r\n        this.PageView.node.on(\"page-turning\", this.movePage, this)\r\n        this.PageView.node.on(Input.EventType.TOUCH_MOVE, this.touchMove, this)\r\n        this.PageView.scrollToPage(1, 0.01);\r\n        // for (let k = 0; k < pageName.length; k++) {\r\n        //     // let is_has = this.pageItem.findIndex((item)=>{item.name == pageName[k]});\r\n        //     // console.log(is_has)\r\n        //     // if(is_has){\r\n        //         let page_item = new Node(\"page_node\");\r\n        //         page_item.addComponent(UITransform).setContentSize(size(300,900))\r\n        //         let item = instantiate(page_item) \r\n        //         let itemNode = item.getComponent(pageitem);\r\n        //         if (!itemNode) itemNode = item.addComponent(pageitem);\r\n        //         itemNode.SetData(k)\r\n        //         this.PageView.addPage(item);\r\n        //     // }\r\n        // }\r\n    }\r\n    private movePage(pageView: PageView){\r\n      let index =  this.PageView.getPages().length\r\n      \r\n        if(this.PageView.getCurrentPageIndex() == 0){\r\n            this.PageView.scrollToPage(index - 2,0.01);\r\n        }else if(this.PageView.getCurrentPageIndex() == index - 1){\r\n            this.PageView.scrollToPage(1,0.01);\r\n        }\r\n    }\r\n\r\n    private touchMove(){\r\n        this.PageViewTime = 8;\r\n    }\r\n\r\n    protected update(dt: number): void {\r\n        this.PageViewTime -= dt\r\n        if(this.PageViewTime <= 0){\r\n            this.PageView.setCurrentPageIndex(this.PageView.getCurrentPageIndex() + 1);\r\n            this.PageViewTime = 8;\r\n        }\r\n    }\r\n\r\n}"]}