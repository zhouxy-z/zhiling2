{"version":3,"sources":["file:///D:/plants_client/trunk/proj/assets/scripts/module/fight/FightLogItem.ts"],"names":["FightLogItem","Button","Component","EditBox","Label","DateUtils","Req","Route","Session","playerLab","timeLab","roomLab","getBtn","select","isInit","logData","onLoad","node","getChildByName","getComponent","on","EventType","CLICK","onBtnClick","btn","data","roomId","Send","console","log","SetData","updateShow","string","playerId","createTime","dates","TimestampToDate"],"mappings":";;;kJAKaA,Y;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AALJC,MAAAA,M,OAAAA,M;AAAQC,MAAAA,S,OAAAA,S;AAAWC,MAAAA,O,OAAAA,O;AAASC,MAAAA,K,OAAAA,K;;AAC5BC,MAAAA,S,iBAAAA,S;;AACOC,MAAAA,G,iBAAAA,G;AAAKC,MAAAA,K,iBAAAA,K;;AACZC,MAAAA,O,iBAAAA,O;;;;;;;;;8BAEIR,Y,GAAN,MAAMA,YAAN,SAA2BE,SAA3B,CAAqC;AAAA;AAAA;AAAA,eAChCO,SADgC;AAAA,eAEhCC,OAFgC;AAAA,eAGhCC,OAHgC;AAAA,eAIhCC,MAJgC;AAAA,eAKhCC,MALgC;AAAA,eAMhCC,MANgC,GAMd,KANc;AAAA,eAOhCC,OAPgC;AAAA;;AAQ9BC,QAAAA,MAAM,GAAS;AACrB,eAAKP,SAAL,GAAiB,KAAKQ,IAAL,CAAUC,cAAV,CAAyB,WAAzB,EAAsCC,YAAtC,CAAmDf,KAAnD,CAAjB;AACA,eAAKM,OAAL,GAAe,KAAKO,IAAL,CAAUC,cAAV,CAAyB,SAAzB,EAAoCC,YAApC,CAAiDf,KAAjD,CAAf;AACA,eAAKO,OAAL,GAAe,KAAKM,IAAL,CAAUC,cAAV,CAAyB,SAAzB,EAAoCC,YAApC,CAAiDhB,OAAjD,CAAf;AACA,eAAKS,MAAL,GAAc,KAAKK,IAAL,CAAUC,cAAV,CAAyB,QAAzB,EAAmCC,YAAnC,CAAgDlB,MAAhD,CAAd;AACA,eAAKa,MAAL,GAAc,IAAd;AACA,eAAKF,MAAL,CAAYK,IAAZ,CAAiBG,EAAjB,CAAoBnB,MAAM,CAACoB,SAAP,CAAiBC,KAArC,EAA4C,KAAKC,UAAjD,EAA6D,IAA7D;AACH;;AAEOA,QAAAA,UAAU,CAACC,GAAD,EAAoB;AAClC,kBAAQA,GAAR;AACI,iBAAK,KAAKZ,MAAV;AACI,kBAAIa,IAAI,GAAG,IAAI;AAAA;AAAA,8BAAI,yCAAJ,CAAJ,EAAX;AACAA,cAAAA,IAAI,CAACC,MAAL,GAAc,CAAC,KAAKX,OAAL,CAAaW,MAAd,CAAd;AACA;AAAA;AAAA,sCAAQC,IAAR,CAAa;AAAA;AAAA,kCAAM,yCAAN,CAAb,EAA+DF,IAA/D;AACAG,cAAAA,OAAO,CAACC,GAAR,CAAY,eAAZ;AACA;AANR;AAQH;;AAEDC,QAAAA,OAAO,CAACf,OAAD,EAA8C;AACjD,eAAKA,OAAL,GAAeA,OAAf;AACA,eAAKgB,UAAL;AACH;;AAEOA,QAAAA,UAAU,GAAS;AACvB,cAAI,CAAC,KAAKjB,MAAV,EAAkB;;AAClB,cAAI,KAAKC,OAAT,EAAkB;AACd,iBAAKN,SAAL,CAAeuB,MAAf,GAAwB,KAAKjB,OAAL,CAAakB,QAArC;AACA,iBAAKtB,OAAL,CAAaqB,MAAb,GAAsB,KAAKjB,OAAL,CAAaW,MAAnC;;AACA,gBAAI,KAAKX,OAAL,CAAamB,UAAb,GAA0B,CAA9B,EAAiC;AAC7B,kBAAIC,KAAe,GAAG;AAAA;AAAA,0CAAUC,eAAV,CAA0B,KAAKrB,OAAL,CAAamB,UAAb,GAA0B,IAApD,EAA0D,IAA1D,CAAtB;AACA,mBAAKxB,OAAL,CAAasB,MAAb,GAAuB,GAAEG,KAAK,CAAC,CAAD,CAAI,IAAGA,KAAK,CAAC,CAAD,CAAI,IAAGA,KAAK,CAAC,CAAD,CAAI,KAAIA,KAAK,CAAC,CAAD,CAAI,IAAGA,KAAK,CAAC,CAAD,CAAI,IAAGA,KAAK,CAAC,CAAD,CAAI,EAA/F;AACH,aAHD,MAGO;AACH,mBAAKzB,OAAL,CAAasB,MAAb,GAAsB,EAAtB;AACH;AAEJ;AACJ;;AA9CuC,O","sourcesContent":["import { Button, Component, EditBox, Label, Node } from \"cc\";\r\nimport { DateUtils } from \"../../utils/DateUtils\";\r\nimport proto, { Req, Route } from \"../../net/Protocol\";\r\nimport { Session } from \"../../net/Session\";\r\n\r\nexport class FightLogItem extends Component {\r\n    private playerLab: Label;\r\n    private timeLab: Label;\r\n    private roomLab: EditBox;\r\n    private getBtn: Button;\r\n    private select: Node;\r\n    private isInit: boolean = false;\r\n    private logData: proto.base.IBattleRecordData;\r\n    protected onLoad(): void {\r\n        this.playerLab = this.node.getChildByName(\"playerLab\").getComponent(Label);\r\n        this.timeLab = this.node.getChildByName(\"timeLab\").getComponent(Label)\r\n        this.roomLab = this.node.getChildByName(\"roomLab\").getComponent(EditBox);\r\n        this.getBtn = this.node.getChildByName(\"getBtn\").getComponent(Button);\r\n        this.isInit = true;\r\n        this.getBtn.node.on(Button.EventType.CLICK, this.onBtnClick, this);\r\n    }\r\n\r\n    private onBtnClick(btn: Button): void {\r\n        switch (btn) {\r\n            case this.getBtn:\r\n                let data = new Req[\"battle_mgr.protocol.getbattlereplayroom\"]();\r\n                data.roomId = [this.logData.roomId];\r\n                Session.Send(Route[\"battle_mgr.protocol.getbattlereplayroom\"], data);\r\n                console.log(\"发送获取战报详情---->\")\r\n                break;\r\n        }\r\n    }\r\n\r\n    SetData(logData: proto.base.IBattleRecordData): void {\r\n        this.logData = logData;\r\n        this.updateShow();\r\n    }\r\n\r\n    private updateShow(): void {\r\n        if (!this.isInit) return;\r\n        if (this.logData) {\r\n            this.playerLab.string = this.logData.playerId;\r\n            this.roomLab.string = this.logData.roomId;\r\n            if (this.logData.createTime > 0) {\r\n                let dates: string[] = DateUtils.TimestampToDate(this.logData.createTime * 1000, true);\r\n                this.timeLab.string = `${dates[0]}-${dates[1]}-${dates[2]}  ${dates[3]}:${dates[4]}:${dates[5]}`;\r\n            } else {\r\n                this.timeLab.string = \"\";\r\n            }\r\n\r\n        }\r\n    }\r\n\r\n\r\n}"]}