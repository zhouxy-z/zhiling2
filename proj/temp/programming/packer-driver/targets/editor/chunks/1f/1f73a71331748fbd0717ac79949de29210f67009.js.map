{"version":3,"sources":["file:///D:/plants_client/trunk/proj/assets/scripts/module/fight/display/ShowArea.ts"],"names":["ShowArea","Label","Tween","Vec3","sp","tween","GameObj","GameSet","$prefab","filed","descLab","myPower","adPower","onLoad","find","Skeleton","setCompleteListener","setAnimation","View","sd","desc","pos","stopAllByTarget","setWorldPosition","to","worldPosition","ShowPoint","start","$hasLoad","loadSub","string","skeletonData","Hide","ZERO","parent","removeChild"],"mappings":";;;gIAMaA,Q;;;;;;;;;;;;;;;;;;;AANJC,MAAAA,K,OAAAA,K;AAAkCC,MAAAA,K,OAAAA,K;AAAOC,MAAAA,I,OAAAA,I;AAAMC,MAAAA,E,OAAAA,E;AAAIC,MAAAA,K,OAAAA,K;;AACnDC,MAAAA,O,iBAAAA,O;;AAGAC,MAAAA,O,iBAAAA,O;;;;;;;;;0BAEIP,Q,GAAN,MAAMA,QAAN;AAAA;AAAA,8BAA+B;AAAA;AAAA;AAAA,eACxBQ,OADwB,GACN,wBADM;AAAA,eAGxBC,KAHwB;AAAA,eAIxBC,OAJwB;AAAA,eAKxBC,OALwB;AAAA,eAMxBC,OANwB;AAAA;;AAQxBC,QAAAA,MAAM,GAAS;AACrB,eAAKJ,KAAL,GAAa,KAAKK,IAAL,CAAU,OAAV,EAAmBV,EAAE,CAACW,QAAtB,CAAb;AACA,eAAKL,OAAL,GAAe,KAAKI,IAAL,CAAU,MAAV,EAAkBb,KAAlB,CAAf;AACA,eAAKU,OAAL,GAAe,KAAKG,IAAL,CAAU,QAAV,EAAoBb,KAApB,CAAf;AACA,eAAKW,OAAL,GAAe,KAAKE,IAAL,CAAU,QAAV,EAAoBb,KAApB,CAAf;AAEA,cAAIQ,KAAK,GAAG,KAAKA,KAAjB;AACA,eAAKA,KAAL,CAAWO,mBAAX,CAA+B,MAAM;AACjCP,YAAAA,KAAK,CAACQ,YAAN,CAAmB,CAAnB,EAAsB,MAAtB;AACH,WAFD;AAGH;;AAES,cAAJC,IAAI,CAACC,EAAD,EAAsBC,IAAtB,EAAoCT,OAApC,EAAqDC,OAArD,EAAsES,GAAtE,EAAiF;AACvFnB,UAAAA,KAAK,CAACoB,eAAN,CAAsB,IAAtB;AACA,eAAKC,gBAAL,CAAsBF,GAAtB;AACAhB,UAAAA,KAAK,CAAC,IAAD,CAAL,CAAoBmB,EAApB,CAAuB,IAAvB,EAA6B;AAAEC,YAAAA,aAAa,EAAE;AAAA;AAAA,oCAAQC;AAAzB,WAA7B,EAAmEC,KAAnE;AACA,cAAI,CAAC,KAAKC,QAAV,EAAoB,MAAM,KAAKC,OAAX;AACpB,eAAKnB,OAAL,CAAaoB,MAAb,GAAsBV,IAAtB;AACA,eAAKX,KAAL,CAAWsB,YAAX,GAA0BZ,EAA1B;AACA,eAAKV,KAAL,CAAWQ,YAAX,CAAwB,CAAxB,EAA2B,MAA3B,EAAmC,KAAnC;AACA,eAAKN,OAAL,CAAamB,MAAb,GAAsBnB,OAAtB;AACA,eAAKC,OAAL,CAAakB,MAAb,GAAsBlB,OAAtB;AACH;;AAEDoB,QAAAA,IAAI,GAAG;AACH9B,UAAAA,KAAK,CAACoB,eAAN,CAAsB,IAAtB;AACA,eAAKC,gBAAL,CAAsBpB,IAAI,CAAC8B,IAA3B;AACA,cAAI,KAAKC,MAAT,EAAiB,KAAKA,MAAL,CAAYC,WAAZ,CAAwB,IAAxB;AACpB;;AApCiC,O","sourcesContent":["import { Label, Node, Sprite, SpriteFrame, Tween, Vec3, sp, tween } from \"cc\";\r\nimport { GameObj } from \"../../../manager/GameRoot\";\r\nimport proto from \"../../../net/Protocol\";\r\nimport { ResMgr } from \"../../../manager/ResMgr\";\r\nimport { GameSet } from \"../../../manager/GameSet\";\r\n\r\nexport class ShowArea extends GameObj {\r\n    protected $prefab: string = \"prefabs/fight/ShowArea\";\r\n\r\n    protected filed: sp.Skeleton;\r\n    protected descLab: Label;\r\n    protected myPower: Label;\r\n    protected adPower: Label;\r\n\r\n    protected onLoad(): void {\r\n        this.filed = this.find(\"filed\", sp.Skeleton);\r\n        this.descLab = this.find(\"desc\", Label);\r\n        this.myPower = this.find(\"power1\", Label);\r\n        this.adPower = this.find(\"power2\", Label);\r\n\r\n        let filed = this.filed;\r\n        this.filed.setCompleteListener(() => {\r\n            filed.setAnimation(0, \"idle\");\r\n        })\r\n    }\r\n\r\n    async View(sd: sp.SkeletonData, desc: string, myPower: string, adPower: string, pos: Vec3) {\r\n        Tween.stopAllByTarget(this);\r\n        this.setWorldPosition(pos);\r\n        tween(this as Node).to(0.25, { worldPosition: GameSet.ShowPoint }).start();\r\n        if (!this.$hasLoad) await this.loadSub;\r\n        this.descLab.string = desc;\r\n        this.filed.skeletonData = sd;\r\n        this.filed.setAnimation(0, \"show\", false);\r\n        this.myPower.string = myPower;\r\n        this.adPower.string = adPower;\r\n    }\r\n\r\n    Hide() {\r\n        Tween.stopAllByTarget(this);\r\n        this.setWorldPosition(Vec3.ZERO);\r\n        if (this.parent) this.parent.removeChild(this);\r\n    }\r\n}"]}