{"version":3,"sources":["file:///D:/plants_client/trunk/proj/assets/scripts/module/battle/BattleTerrainGrid.ts"],"names":["BattleTerrainGrid","Component","Label","base","powerA","powerNumLabA","powerB","powerNumLabB","stateLab","data","isInit","_terrainId","onLoad","node","getChildByName","getChildByPath","getComponent","updateShow","setTerrainId","id","terrainId","setData","terrainData","updatePower","power","isPlaterA","string","toString","active","terrainState","BattleRoomInTerrainState","TerrainStateHide","TerrainStateShow","TerrainStateDestroy"],"mappings":";;;uGAKaA,iB;;;;;;;;;;;;;;;AALEC,MAAAA,S,OAAAA,S;AAAWC,MAAAA,K,OAAAA,K;;AACnBC,MAAAA,I;;;;;;;;;AACP;AACA;AACA;mCACaH,iB,GAAN,MAAMA,iBAAN,SAAgCC,SAAhC,CAA0C;AAAA;AAAA;AAAA,eACrCG,MADqC;AAAA,eAErCC,YAFqC;AAAA,eAGrCC,MAHqC;AAAA,eAIrCC,YAJqC;AAAA,eAKrCC,QALqC;AAAA,eAMrCC,IANqC;AAAA,eAOrCC,MAPqC,GAOnB,KAPmB;AAAA,eAQrCC,UARqC;AAAA;;AASnCC,QAAAA,MAAM,GAAS;AACrB,eAAKR,MAAL,GAAc,KAAKS,IAAL,CAAUC,cAAV,CAAyB,QAAzB,CAAd;AACA,eAAKT,YAAL,GAAoB,KAAKQ,IAAL,CAAUE,cAAV,CAAyB,qBAAzB,EAAgDC,YAAhD,CAA6Dd,KAA7D,CAApB;AACA,eAAKI,MAAL,GAAc,KAAKO,IAAL,CAAUC,cAAV,CAAyB,QAAzB,CAAd;AACA,eAAKP,YAAL,GAAoB,KAAKM,IAAL,CAAUE,cAAV,CAAyB,qBAAzB,EAAgDC,YAAhD,CAA6Dd,KAA7D,CAApB;AACA,eAAKM,QAAL,GAAgB,KAAKK,IAAL,CAAUE,cAAV,CAAyB,UAAzB,EAAqCC,YAArC,CAAkDd,KAAlD,CAAhB;AACA,eAAKQ,MAAL,GAAc,IAAd;AACA,eAAKO,UAAL;AACH;;AAEMC,QAAAA,YAAY,CAACC,EAAD,EAAmB;AAClC,eAAKR,UAAL,GAAkBQ,EAAlB;AACH;;AAEmB,YAATC,SAAS,GAAW;AAC3B,iBAAO,KAAKT,UAAZ;AACH;;AAEMU,QAAAA,OAAO,CAACZ,IAAD,EAA0C;AACpD,eAAKA,IAAL,GAAYA,IAAZ;AACA,eAAKQ,UAAL;AACH;;AAEqB,YAAXK,WAAW,GAAgC;AAClD,iBAAO,KAAKb,IAAZ;AACH;;AAEMc,QAAAA,WAAW,CAACC,KAAD,EAAgBC,SAAkB,GAAG,IAArC,EAAiD;AAC/D,cAAIA,SAAJ,EAAe;AACX,iBAAKpB,YAAL,CAAkBqB,MAAlB,GAA2BF,KAAK,CAACG,QAAN,EAA3B;AACH,WAFD,MAEO;AACH,iBAAKpB,YAAL,CAAkBmB,MAAlB,GAA2BF,KAAK,CAACG,QAAN,EAA3B;AACH;AAGJ;;AAEOV,QAAAA,UAAU,GAAS;AACvB,cAAI,CAAC,KAAKP,MAAV,EAAkB;;AAElB,cAAI,KAAKD,IAAT,EAAe;AACX,iBAAKI,IAAL,CAAUe,MAAV,GAAmB,IAAnB;;AACA,gBAAI,KAAKnB,IAAL,CAAUoB,YAAV,IAA0B;AAAA;AAAA,8BAAKC,wBAAL,CAA8BC,gBAA5D,EAA8E;AAC1E,mBAAKvB,QAAL,CAAckB,MAAd,GAAuB,KAAvB;AACH,aAFD,MAEO,IAAI,KAAKjB,IAAL,CAAUoB,YAAV,IAA0B;AAAA;AAAA,8BAAKC,wBAAL,CAA8BE,gBAA5D,EAA8E;AACjF,mBAAKxB,QAAL,CAAckB,MAAd,GAAuB,KAAvB;AACH,aAFM,MAEA,IAAI,KAAKjB,IAAL,CAAUoB,YAAV,IAA0B;AAAA;AAAA,8BAAKC,wBAAL,CAA8BG,mBAA5D,EAAiF;AACpF,mBAAKzB,QAAL,CAAckB,MAAd,GAAuB,KAAvB;AACH,aAFM,MAEA;AACH,mBAAKlB,QAAL,CAAckB,MAAd,GAAuB,KAAvB;AACH;AACJ,WAXD,MAWO;AACH,iBAAKb,IAAL,CAAUe,MAAV,GAAmB,KAAnB;AACH;AACJ;;AA/D4C,O","sourcesContent":["import { Node, Component, Label } from \"cc\";\r\nimport base from \"../../net/proto/BaseUtils\";\r\n/**\r\n * 地形格子\r\n */\r\nexport class BattleTerrainGrid extends Component {\r\n    private powerA: Node;\r\n    private powerNumLabA: Label;\r\n    private powerB: Node;\r\n    private powerNumLabB: Label;\r\n    private stateLab: Label;\r\n    private data: base.IBattleRoomTerrainData;\r\n    private isInit: boolean = false;\r\n    private _terrainId: number;\r\n    protected onLoad(): void {\r\n        this.powerA = this.node.getChildByName(\"powerA\");\r\n        this.powerNumLabA = this.node.getChildByPath(\"powerA/powerNumLabA\").getComponent(Label);\r\n        this.powerB = this.node.getChildByName(\"powerB\");\r\n        this.powerNumLabB = this.node.getChildByPath(\"powerB/powerNumLabB\").getComponent(Label);\r\n        this.stateLab = this.node.getChildByPath(\"stateLab\").getComponent(Label);\r\n        this.isInit = true;\r\n        this.updateShow();\r\n    }\r\n\r\n    public setTerrainId(id: number): void {\r\n        this._terrainId = id;\r\n    }\r\n\r\n    public get terrainId(): number {\r\n        return this._terrainId;\r\n    }\r\n\r\n    public setData(data: base.IBattleRoomTerrainData): void {\r\n        this.data = data;\r\n        this.updateShow();\r\n    }\r\n\r\n    public get terrainData(): base.IBattleRoomTerrainData {\r\n        return this.data;\r\n    }\r\n\r\n    public updatePower(power: number, isPlaterA: boolean = true): void {\r\n        if (isPlaterA) {\r\n            this.powerNumLabA.string = power.toString();\r\n        } else {\r\n            this.powerNumLabB.string = power.toString();\r\n        }\r\n        \r\n        \r\n    }\r\n\r\n    private updateShow(): void {\r\n        if (!this.isInit) return;\r\n        \r\n        if (this.data) {\r\n            this.node.active = true;\r\n            if (this.data.terrainState == base.BattleRoomInTerrainState.TerrainStateHide) {\r\n                this.stateLab.string = \"未揭示\"\r\n            } else if (this.data.terrainState == base.BattleRoomInTerrainState.TerrainStateShow) {\r\n                this.stateLab.string = \"已揭示\"\r\n            } else if (this.data.terrainState == base.BattleRoomInTerrainState.TerrainStateDestroy) {\r\n                this.stateLab.string = \"已损毁\"\r\n            } else {\r\n                this.stateLab.string = \"未定义\"\r\n            }\r\n        } else {\r\n            this.node.active = false;\r\n        }\r\n    }\r\n}"]}