{"version":3,"sources":["file:///D:/plants_client/trunk/proj/assets/scripts/module/fight/opOutput/Out_CardDeckFrontToHandTail.ts"],"names":["Out_CardDeckFrontToHandTail","BattleBaseComp","battleDataMgr","isAddCardEnd","start","data","cards","length","isPlayerA","ownerPlayerId","scene","AddHandCard","isExit","console","error","exit","onUpdate","dt","reset"],"mappings":";;;6DAOaA,2B;;;;;;;;;;;;;;;;;;;;;;AANJC,MAAAA,c,iBAAAA,c;;AACAC,MAAAA,a,iBAAAA,a;;;;;;;AAET;AACA;AACA;6CACaF,2B,GAAN,MAAMA,2BAAN;AAAA;AAAA,4CAA+G;AAAA;AAAA;AAAA,eAC1GG,YAD0G,GAClF,KADkF;AAAA;;AAC5E;AACjB,cAALC,KAAK,GAAG;AACpB,cAAI,KAAKC,IAAL,CAAUC,KAAV,IAAmB,KAAKD,IAAL,CAAUC,KAAV,CAAgBC,MAAvC,EAA+C;AAC3C,gBAAI;AAAA;AAAA,gDAAcC,SAAd,CAAwB,KAAKC,aAA7B,CAAJ,EAAiD;AAC7C,oBAAM,KAAKC,KAAL,CAAWC,WAAX,CAAuB,KAAKN,IAA5B,CAAN;AACA,kBAAI,KAAKO,MAAT,EAAiB,OAF4B,CAG7C;AACH,aAJD,MAIO,CACN;;AACD,iBAAKT,YAAL,GAAoB,IAApB;AACH,WARD,MAQO;AACHU,YAAAA,OAAO,CAACC,KAAR,CAAc,QAAd;AACA,iBAAKC,IAAL;AACH;AACJ;;AAESC,QAAAA,QAAQ,CAACC,EAAD,EAAmB;AACjC,cAAI,CAAC,KAAKd,YAAV,EAAwB,OADS,CAEjC;;AACA,eAAKY,IAAL;AACH;;AAESG,QAAAA,KAAK,GAAS;AACpB,eAAKf,YAAL,GAAoB,KAApB;AACH;;AAzBiH,O","sourcesContent":["import proto from \"../../../net/Protocol\";\r\nimport { BattleBaseComp } from \"../../battle/BattleBaseComp\";\r\nimport { battleDataMgr } from \"../../battle/BattleDataMgr\";\r\n\r\n/**\r\n * 卡牌由卡组最前到手牌末尾\r\n */\r\nexport class Out_CardDeckFrontToHandTail extends BattleBaseComp<proto.base.IBattleRoomOpOutput_CardDeckTopToHandTail> {\r\n    private isAddCardEnd: boolean = false;//是否添加手牌结束\r\n    protected async start() {\r\n        if (this.data.cards && this.data.cards.length) {\r\n            if (battleDataMgr.isPlayerA(this.ownerPlayerId)) {\r\n                await this.scene.AddHandCard(this.data);\r\n                if (this.isExit) return;\r\n                // await Second(0.5);\r\n            } else {\r\n            }\r\n            this.isAddCardEnd = true;\r\n        } else {\r\n            console.error(\"补卡数据为空\");\r\n            this.exit();\r\n        }\r\n    }\r\n\r\n    protected onUpdate(dt: number): void {\r\n        if (!this.isAddCardEnd) return;\r\n        //全部动作完成退出播放\r\n        this.exit();\r\n    }\r\n\r\n    protected reset(): void {\r\n        this.isAddCardEnd = false;\r\n    }\r\n}\r\n"]}