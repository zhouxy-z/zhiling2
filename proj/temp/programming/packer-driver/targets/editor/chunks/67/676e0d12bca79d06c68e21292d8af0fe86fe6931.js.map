{"version":3,"sources":["file:///D:/plants_client/trunk/proj/assets/scripts/module/battle/BattleTerrainArea.ts"],"names":["BattleTerrainArea","Component","BattleCardGrid","gridList","isInit","_areaId","_terrainData","onLoad","node","children","push","addComponent","updateGridId","setAreaId","id","index","length","com","setGridIdx","areaId","setData","terrainData","updateShow","active"],"mappings":";;;0GAMaA,iB;;;;;;;;;;;;;;;;;;;AANEC,MAAAA,S,OAAAA,S;;AACNC,MAAAA,c,iBAAAA,c;;;;;;;;;AAET;AACA;AACA;mCACaF,iB,GAAN,MAAMA,iBAAN,SAAgCC,SAAhC,CAA0C;AAAA;AAAA;AAAA,eACtCE,QADsC,GACT,EADS;AAAA,eAErCC,MAFqC,GAEnB,KAFmB;AAAA,eAGrCC,OAHqC;AAAA,eAIrCC,YAJqC;AAAA;;AAKnCC,QAAAA,MAAM,GAAS;AACrB,eAAK,IAAIC,IAAT,IAAiB,KAAKA,IAAL,CAAUC,QAA3B,EAAqC;AACjC,iBAAKN,QAAL,CAAcO,IAAd,CAAmBF,IAAI,CAACG,YAAL;AAAA;AAAA,iDAAnB;AACH;;AACD,eAAKC,YAAL;AACA,eAAKR,MAAL,GAAc,IAAd,CALqB,CAMrB;AACH;;AAEMS,QAAAA,SAAS,CAACC,EAAD,EAAmB;AAC/B,eAAKT,OAAL,GAAeS,EAAf;AACA,eAAKF,YAAL;AACH;;AACOA,QAAAA,YAAY,GAAS;AACzB,cAAI,CAAC,KAAKR,MAAV,EAAkB;;AAClB,eAAK,IAAIW,KAAK,GAAG,CAAjB,EAAoBA,KAAK,GAAG,KAAKZ,QAAL,CAAca,MAA1C,EAAkDD,KAAK,EAAvD,EAA2D;AACvD,gBAAIE,GAAmB,GAAG,KAAKd,QAAL,CAAcY,KAAd,CAA1B;AACAE,YAAAA,GAAG,CAACC,UAAJ,CAAeH,KAAf,EAAsB,KAAKV,OAA3B;AACH;AACJ;;AAEgB,YAANc,MAAM,GAAW;AACxB,iBAAO,KAAKd,OAAZ;AACH;;AACMe,QAAAA,OAAO,CAACC,WAAD,EAAiD;AAC3D,eAAKf,YAAL,GAAoBe,WAApB;AACA,eAAKC,UAAL;AACH;;AAEqB,YAAXD,WAAW,GAAgC;AAClD,iBAAO,KAAKf,YAAZ;AACH;;AAEOgB,QAAAA,UAAU,GAAS;AACvB,cAAI,CAAC,KAAKlB,MAAV,EAAkB;AAClB,eAAKI,IAAL,CAAUe,MAAV,GAAmB,KAAKjB,YAAL,IAAqB,IAAxC;AACH;;AAzC4C,O","sourcesContent":["import { Node, Component } from \"cc\";\r\nimport { BattleCardGrid } from \"./BattleCardGrid\";\r\nimport { base } from \"../../net/proto/proto\";\r\n/**\r\n * 地形区域\r\n */\r\nexport class BattleTerrainArea extends Component {\r\n    public gridList: BattleCardGrid[] = [];\r\n    private isInit: boolean = false;\r\n    private _areaId: number;\r\n    private _terrainData: base.IBattleRoomTerrainData;\r\n    protected onLoad(): void {\r\n        for (let node of this.node.children) {\r\n            this.gridList.push(node.addComponent(BattleCardGrid));\r\n        }\r\n        this.updateGridId();\r\n        this.isInit = true;\r\n        //this.updateShow();\r\n    }\r\n\r\n    public setAreaId(id: number): void {\r\n        this._areaId = id;\r\n        this.updateGridId();\r\n    } \r\n    private updateGridId(): void {\r\n        if (!this.isInit) return;\r\n        for (let index = 0; index < this.gridList.length; index++) {\r\n            let com: BattleCardGrid = this.gridList[index];\r\n            com.setGridIdx(index, this._areaId);\r\n        }\r\n    }\r\n\r\n    public get areaId(): number {\r\n        return this._areaId;\r\n    }\r\n    public setData(terrainData: base.IBattleRoomTerrainData): void {\r\n        this._terrainData = terrainData;\r\n        this.updateShow();\r\n    }\r\n\r\n    public get terrainData(): base.IBattleRoomTerrainData {\r\n        return this._terrainData;\r\n    }\r\n\r\n    private updateShow(): void {\r\n        if (!this.isInit) return;\r\n        this.node.active = this._terrainData != null;\r\n    }\r\n}"]}