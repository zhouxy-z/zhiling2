{"version":3,"sources":["file:///D:/plants_client/trunk/proj/assets/scripts/module/mail/MailDeletePanel.ts"],"names":["MailDeletePanel","Button","Toggle","Panel","LocalStorage","PlayerData","prefab","callBack","deleteBtn","toggle","onLoad","CloseBy","find","onBntEvent","on","EventType","CLICK","onClickDelete","onShow","flush","args","isChecked","onHide","time","Date","now","SetNumber","player","playerId","RemoveItem","Hide"],"mappings":";;;gIAMaA,e;;;;;;;;;;;;;;;;;;;;;;;AANJC,MAAAA,M,OAAAA,M;AAAcC,MAAAA,M,OAAAA,M;;AACdC,MAAAA,K,iBAAAA,K;;AAEFC,MAAAA,Y;;AACEC,MAAAA,U,iBAAAA,U;;;;;;;;;iCAEIL,e,GAAN,MAAMA,eAAN;AAAA;AAAA,0BAAoC;AAAA;AAAA;AAAA,eAC7BM,MAD6B,GACZ,8BADY;AAAA,eAE/BC,QAF+B;AAAA,eAG/BC,SAH+B;AAAA,eAI/BC,MAJ+B;AAAA;;AAK7BC,QAAAA,MAAM,GAAG;AACf,eAAKC,OAAL,CAAa,MAAb;AACA,eAAKA,OAAL,CAAa,mBAAb;AACA,eAAKA,OAAL,CAAa,oBAAb;AACA,eAAKH,SAAL,GAAiB,KAAKI,IAAL,CAAW,uBAAX,CAAjB;AACA,eAAKH,MAAL,GAAc,KAAKG,IAAL,CAAW,yBAAX,EAAqCV,MAArC,CAAd;AACA,eAAKW,UAAL;AACH;;AAEOA,QAAAA,UAAU,GAAG;AACjB,eAAKL,SAAL,CAAeM,EAAf,CAAkBb,MAAM,CAACc,SAAP,CAAiBC,KAAnC,EAA0C,KAAKC,aAA/C,EAA8D,IAA9D;AACH;;AAESC,QAAAA,MAAM,GAAS,CAExB;;AAEMC,QAAAA,KAAK,CAAC,GAAGC,IAAJ,EAAuB;AAC/B,eAAKb,QAAL,GAAgBa,IAAI,CAAC,CAAD,CAApB;AACA,eAAKX,MAAL,CAAYY,SAAZ,GAAwB,KAAxB;AACH;;AAESC,QAAAA,MAAM,CAAC,GAAGF,IAAJ,EAAuB,CAEtC;;AAEOH,QAAAA,aAAa,GAAG;AACpB,cAAIM,IAAI,GAAGC,IAAI,CAACC,GAAL,EAAX;;AACA,cAAI,KAAKhB,MAAL,CAAYY,SAAhB,EAA2B;AACvB;AAAA;AAAA,8CAAaK,SAAb,CAAuB,oBAAoB;AAAA;AAAA,0CAAWC,MAAX,CAAkBC,QAA7D,EAAuEL,IAAvE;AACH,WAFD,MAEO;AACH;AAAA;AAAA,8CAAaM,UAAb,CAAwB,oBAAoB;AAAA;AAAA,0CAAWF,MAAX,CAAkBC,QAA9D;AACH;;AACD,cAAI,KAAKrB,QAAT,EAAmB;AACf,iBAAKA,QAAL;AACH;;AACD,eAAKuB,IAAL;AACH;;AA1CsC,O","sourcesContent":["import { Button, Node, Toggle} from \"cc\";\r\nimport { Panel } from \"../../manager/GameRoot\";\r\nimport { AudioMgr } from \"../../manager/AudioMgr\";\r\nimport LocalStorage from \"../../utils/LocalStorage\";\r\nimport { PlayerData } from \"../player/PlayerData\";\r\n\r\nexport class MailDeletePanel extends Panel {\r\n    protected prefab: string = \"prefabs/mail/MailDeletePanel\";\r\n    private callBack;\r\n    private deleteBtn: Node;\r\n    private toggle: Toggle;\r\n    protected onLoad() {\r\n        this.CloseBy(\"mask\");\r\n        this.CloseBy(\"spriteFrame/Close\");\r\n        this.CloseBy(\"spriteFrame/Close2\");\r\n        this.deleteBtn = this.find(`spriteFrame/deleteBtn`);\r\n        this.toggle = this.find(`spriteFrame/Node/toggle`, Toggle);\r\n        this.onBntEvent()\r\n    }\r\n\r\n    private onBntEvent() {\r\n        this.deleteBtn.on(Button.EventType.CLICK, this.onClickDelete, this);\r\n    }\r\n\r\n    protected onShow(): void {\r\n\r\n    }\r\n\r\n    public flush(...args: any[]): void {\r\n        this.callBack = args[0];\r\n        this.toggle.isChecked = false;\r\n    }\r\n\r\n    protected onHide(...args: any[]): void {\r\n\r\n    }\r\n\r\n    private onClickDelete() {\r\n        let time = Date.now();\r\n        if (this.toggle.isChecked) {\r\n            LocalStorage.SetNumber(\"MailDeletePanel\" + PlayerData.player.playerId, time)\r\n        } else {\r\n            LocalStorage.RemoveItem(\"MailDeletePanel\" + PlayerData.player.playerId)\r\n        }\r\n        if (this.callBack) {\r\n            this.callBack();\r\n        }\r\n        this.Hide();\r\n    }\r\n\r\n}\r\n"]}