{"version":3,"sources":["file:///D:/plants_client/trunk/proj/assets/resources/prefabs/bag/GetMoreWin.ts"],"names":["GetMoreWin","Input","Panel","AutoScroller","CfgMgr","GetMoreItem","Goto","prefab","scroller","onLoad","CloseBy","find","SetHandle","updateItem","bind","on","EventType","TOUCH_END","Hide","flush","path","length","datas","index","data","GetFetchData","push","UpdateDatas","onShow","onHide","args","item","itemNode","getComponent","addComponent","setData","close","Win","closeOther","Param"],"mappings":";;;sIAQaA,U;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AARGC,MAAAA,K,OAAAA,K;;AACPC,MAAAA,K,iBAAAA,K;;AACAC,MAAAA,Y,iBAAAA,Y;;AAEAC,MAAAA,M,iBAAAA,M;;AACAC,MAAAA,W,iBAAAA,W;;AACAC,MAAAA,I,iBAAAA,I;;;;;;;;;4BAEIN,U,GAAN,MAAMA,UAAN;AAAA;AAAA,0BAA+B;AAAA;AAAA;AAAA,eACxBO,MADwB,GACP,8BADO;AAAA,eAExBC,QAFwB;AAAA;;AAGxBC,QAAAA,MAAM,GAAG;AACf,eAAKC,OAAL,CAAa,MAAb;AACA,eAAKF,QAAL,GAAgB,KAAKG,IAAL,CAAU,eAAV;AAAA;AAAA,2CAAhB;AACA,eAAKH,QAAL,CAAcI,SAAd,CAAwB,KAAKC,UAAL,CAAgBC,IAAhB,CAAqB,IAArB,CAAxB,EAHe,CAIf;;AACA,eAAKH,IAAL,CAAU,aAAV,EAAyBI,EAAzB,CAA4Bd,KAAK,CAACe,SAAN,CAAgBC,SAA5C,EAAuD,KAAKC,IAA5D,EAAkE,IAAlE;AACH;;AAEDC,QAAAA,KAAK,CAACC,IAAD,EAAW;AACZ,cAAIA,IAAI,IAAIA,IAAI,CAACC,MAAL,GAAc,CAA1B,EAA6B;AACzB,gBAAIC,KAAc,GAAG,EAArB;;AACA,iBAAK,IAAIC,KAAK,GAAG,CAAjB,EAAoBA,KAAK,GAAGH,IAAI,CAACC,MAAjC,EAAyCE,KAAK,EAA9C,EAAkD;AAC9C,kBAAIC,IAAI,GAAG;AAAA;AAAA,oCAAOC,YAAP,CAAoBL,IAAI,CAACG,KAAD,CAAxB,CAAX;AACAD,cAAAA,KAAK,CAACI,IAAN,CAAWF,IAAX;AACH;;AACD,iBAAKhB,QAAL,CAAcmB,WAAd,CAA0BL,KAA1B;AACH;AACJ;;AAESM,QAAAA,MAAM,GAAS,CACxB;;AACSC,QAAAA,MAAM,CAAC,GAAGC,IAAJ,EAAuB,CACtC;;AAESjB,QAAAA,UAAU,CAACkB,IAAD,EAAaP,IAAb,EAA0B;AAC1C,cAAIQ,QAAQ,GAAGD,IAAI,CAACE,YAAL;AAAA;AAAA,yCAAf;AACA,cAAI,CAACD,QAAL,EAAeA,QAAQ,GAAGD,IAAI,CAACG,YAAL;AAAA;AAAA,yCAAX;AACfF,UAAAA,QAAQ,CAACG,OAAT,CAAiBX,IAAjB,EAAuB,KAAKY,KAAL,CAAWtB,IAAX,CAAgB,IAAhB,CAAvB;AACH;;AAEOsB,QAAAA,KAAK,CAACZ,IAAD,EAAc;AACvB,cAAGA,IAAI,CAACa,GAAL,IAAY,gBAAZ,IAAgCb,IAAI,CAACa,GAAL,IAAY,WAA5C,IAA2Db,IAAI,CAACa,GAAL,IAAY,wBAA1E,EAAmG;AAC/F,iBAAKC,UAAL;AACH;;AACD;AAAA;AAAA,4BAAKd,IAAI,CAACa,GAAV,EAAe,GAAGb,IAAI,CAACe,KAAvB;AACA,eAAKrB,IAAL;AACH;;AAvCiC,O","sourcesContent":["import { Color, Input, Label, Node, Slider, Sprite, SpriteFrame, Toggle, Tween, UITransform, game, path, random, tween, v3 } from \"cc\";\r\nimport { Panel } from \"../../GameRoot\";\r\nimport { AutoScroller } from \"../../utils/AutoScroller\";\r\nimport { FanyuUpSelectFriendItem } from \"../fanyu/FanyuUpSelectFriendItem\";\r\nimport { CfgMgr, Fetch } from \"../../manager/CfgMgr\";\r\nimport { GetMoreItem } from \"./GetMoreItem\";\r\nimport { Goto } from \"../../manager/EventMgr\";\r\n\r\nexport class GetMoreWin extends Panel {\r\n    protected prefab: string = \"prefabs/panel/bag/GetMoreWin\";\r\n    protected scroller: AutoScroller;\r\n    protected onLoad() {\r\n        this.CloseBy(\"mask\");\r\n        this.scroller = this.find(\"bg/ScrollView\", AutoScroller);\r\n        this.scroller.SetHandle(this.updateItem.bind(this));\r\n        // this.scroller.node.on('select', this.onSelect, this);\r\n        this.find(\"bg/closeBtn\").on(Input.EventType.TOUCH_END, this.Hide, this);\r\n    }\r\n\r\n    flush(path: []) {\r\n        if (path && path.length > 0) {\r\n            let datas: Fetch[] = [];\r\n            for (let index = 0; index < path.length; index++) {\r\n                let data = CfgMgr.GetFetchData(path[index]);\r\n                datas.push(data);\r\n            }\r\n            this.scroller.UpdateDatas(datas);\r\n        }\r\n    }\r\n\r\n    protected onShow(): void {\r\n    }\r\n    protected onHide(...args: any[]): void {\r\n    }\r\n\r\n    protected updateItem(item: Node, data: Fetch) {\r\n        let itemNode = item.getComponent(GetMoreItem);\r\n        if (!itemNode) itemNode = item.addComponent(GetMoreItem);\r\n        itemNode.setData(data, this.close.bind(this));\r\n    }\r\n\r\n    private close(data: Fetch) {\r\n        if(data.Win == \"ResourcesPanel\" || data.Win == \"JidiPanel\" || data.Win == \"SoldierProductionPanel\"){\r\n            this.closeOther();\r\n        }\r\n        Goto(data.Win, ...data.Param);\r\n        this.Hide()\r\n    }\r\n\r\n}\r\n"]}