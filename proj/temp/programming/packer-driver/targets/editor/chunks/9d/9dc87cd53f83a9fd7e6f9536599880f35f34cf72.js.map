{"version":3,"sources":["file:///D:/plants_client/trunk/proj/assets/scripts/utils/ThingUtils.ts"],"names":["CostUtils","SpriteFrame","path","ResMgr","folder_card","folder_item","CfgMgr","FormatCostItem","icon","lab","stdcost","url","join","Getitem","CostID","Icon","spriteFrame","LoadResAbSub","string","CostNumber","toString","FormatIcon","thing","type","item","id","GetCard","card","cardId","CardBody"],"mappings":";;;4IAKaA,S;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AALWC,MAAAA,W,OAAAA,W;AAAaC,MAAAA,I,OAAAA,I;;AAE5BC,MAAAA,M,iBAAAA,M;AAAQC,MAAAA,W,iBAAAA,W;AAAaC,MAAAA,W,iBAAAA,W;;AACrBC,MAAAA,M,iBAAAA,M;;;;;;;;;2BAEIN,S,GAAN,MAAMA,SAAN,CAAgB;AACnB;AACJ;AACA;AACA;AACA;AACA;AAC+B,qBAAdO,cAAc,CAACC,IAAD,EAAeC,GAAf,EAA2BC,OAA3B,EAAsD;AAC7E,cAAIC,GAAG,GAAGT,IAAI,CAACU,IAAL;AAAA;AAAA,0CAAuB;AAAA;AAAA,gCAAOC,OAAP,CAAeH,OAAO,CAACI,MAAR,CAAe,CAAf,CAAf,EAAkCC,IAAzD,EAA+D,aAA/D,CAAV;AACAP,UAAAA,IAAI,CAACQ,WAAL,GAAmB,MAAM;AAAA;AAAA,gCAAOC,YAAP,CAAoBN,GAApB,EAAyBV,WAAzB,CAAzB;AACAQ,UAAAA,GAAG,CAACS,MAAJ,GAAaR,OAAO,CAACS,UAAR,CAAmB,CAAnB,EAAsBC,QAAtB,EAAb;AACH;AAED;AACJ;AACA;AACA;AACA;;;AAC2B,qBAAVC,UAAU,CAACb,IAAD,EAAec,KAAf,EAAwC;AAC3D;AACA,cAAIX,GAAG,GAAG,EAAV;;AACA,kBAAQW,KAAK,CAACC,IAAd;AACI,iBAAK,MAAL;AACIZ,cAAAA,GAAG,GAAGT,IAAI,CAACU,IAAL;AAAA;AAAA,8CAAuB;AAAA;AAAA,oCAAOC,OAAP,CAAeS,KAAK,CAACE,IAAN,CAAWC,EAA1B,EAA8BV,IAArD,EAA2D,aAA3D,CAAN;AACA;;AACJ,iBAAK,WAAL;AACIJ,cAAAA,GAAG,GAAG,8BAAN;AACA;;AACJ,iBAAK,YAAL;AACIA,cAAAA,GAAG,GAAGT,IAAI,CAACU,IAAL;AAAA;AAAA,8CAAuB;AAAA;AAAA,oCAAOc,OAAP,CAAeJ,KAAK,CAACK,IAAN,CAAWC,MAA1B,EAAkCC,QAAzD,EAAmE,aAAnE,CAAN;AACA;;AACJ,iBAAK,WAAL;AACIlB,cAAAA,GAAG,GAAG,8BAAN;AACA;AAZR;;AAcAH,UAAAA,IAAI,CAACQ,WAAL,GAAmB,MAAM;AAAA;AAAA,gCAAOC,YAAP,CAAoBN,GAApB,EAAyBV,WAAzB,CAAzB;AACH;;AApCkB,O","sourcesContent":["import { Label, Sprite, SpriteFrame, path } from \"cc\";\r\nimport proto from \"../net/Protocol\";\r\nimport { ResMgr, folder_card, folder_item } from \"../manager/ResMgr\";\r\nimport { CfgMgr, ItemType, StdShopCommodity } from \"../manager/CfgMgr\";\r\n\r\nexport class CostUtils {\r\n    /**\r\n     * 格式化消耗显示\r\n     * @param icon \r\n     * @param lab \r\n     * @param thing \r\n     */\r\n    static async FormatCostItem(icon: Sprite, lab: Label, stdcost: StdShopCommodity) {\r\n        let url = path.join(folder_item, CfgMgr.Getitem(stdcost.CostID[0]).Icon, \"spriteFrame\");\r\n        icon.spriteFrame = await ResMgr.LoadResAbSub(url, SpriteFrame);\r\n        lab.string = stdcost.CostNumber[0].toString();\r\n    }\r\n\r\n    /**\r\n     * 格式化thing图标\r\n     * @param icon \r\n     * @param thing \r\n     */\r\n    static async FormatIcon(icon: Sprite, thing: proto.base.Thing) {\r\n        // \"item\": 道具, \"equipment\": 装备, \"battlecard\": 卡牌, \"playerexp\": 玩家经验\r\n        let url = \"\";\r\n        switch (thing.type) {\r\n            case \"item\":\r\n                url = path.join(folder_item, CfgMgr.Getitem(thing.item.id).Icon, \"spriteFrame\");\r\n                break;\r\n            case \"equipment\":\r\n                url = \"sheets/default/_/spriteFrame\";\r\n                break;\r\n            case \"battlecard\":\r\n                url = path.join(folder_card, CfgMgr.GetCard(thing.card.cardId).CardBody, \"spriteFrame\");\r\n                break;\r\n            case \"playerexp\":\r\n                url = \"sheets/default/_/spriteFrame\";\r\n                break;\r\n        }\r\n        icon.spriteFrame = await ResMgr.LoadResAbSub(url, SpriteFrame);\r\n    }\r\n}"]}