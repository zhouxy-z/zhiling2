{"version":3,"sources":["file:///D:/plants_client/trunk/proj/assets/scripts/utils/AnimationUtils.ts"],"names":["AnimationUtils","sp","ResMgr","Utils","Play","url","ske","action","loop","key","skeletonData","LoadResAbSub","SkeletonData","CheckAnimation","setAnimation","e","console","warn"],"mappings":";;;kGAIaA,c;;;;;;;;;;;;;;;;;;;AAJJC,MAAAA,E,OAAAA,E;;AACAC,MAAAA,M,iBAAAA,M;;AACAC,MAAAA,K,iBAAAA,K;;;;;;;;;gCAEIH,c,GAAN,MAAMA,cAAN,CAAqB;AACP,qBAAJI,IAAI,CAACC,GAAD,EAAcC,GAAd,EAAgCC,MAAhC,EAAgDC,IAAhD,EAA+D;AAC5E,gBAAMC,GAAG,GAAG,mBAAZ;;AACA,cAAI,CAACH,GAAG,CAACG,GAAD,CAAJ,IAAaH,GAAG,CAACG,GAAD,CAAH,IAAYJ,GAA7B,EAAkC;AAC9BC,YAAAA,GAAG,CAACG,GAAD,CAAH,GAAWJ,GAAX;AACA,gBAAIK,YAAY,GAAG,MAAM;AAAA;AAAA,kCAAOC,YAAP,CAAoBN,GAApB,EAAyBJ,EAAE,CAACW,YAA5B,CAAzB;;AACA,gBAAIN,GAAG,CAACG,GAAD,CAAH,IAAYJ,GAAhB,EAAqB;AACjBC,cAAAA,GAAG,CAACI,YAAJ,GAAmBA,YAAnB;;AACA,kBAAI;AAAA;AAAA,kCAAMG,cAAN,CAAqBP,GAArB,EAA0BC,MAA1B,CAAJ,EAAuC;AACnC,oBAAI;AACAD,kBAAAA,GAAG,CAACQ,YAAJ,CAAiB,CAAjB,EAAoBP,MAApB,EAA4BC,IAA5B;AACH,iBAFD,CAEE,OAAOO,CAAP,EAAU;AACRC,kBAAAA,OAAO,CAACC,IAAR,CAAa,mBAAmBZ,GAAhC;AACH;AACJ;AACJ;AACJ;AACJ;;AAjBuB,O","sourcesContent":["import { sp } from \"cc\";\r\nimport { ResMgr } from \"../manager/ResMgr\";\r\nimport { Utils } from \"./Utils\";\r\n\r\nexport class AnimationUtils {\r\n    static async Play(url: string, ske: sp.Skeleton, action: string, loop: boolean) {\r\n        const key = \"$skeletonData_url\";\r\n        if (!ske[key] || ske[key] != url) {\r\n            ske[key] = url;\r\n            let skeletonData = await ResMgr.LoadResAbSub(url, sp.SkeletonData);\r\n            if (ske[key] == url) {\r\n                ske.skeletonData = skeletonData;\r\n                if (Utils.CheckAnimation(ske, action)) {\r\n                    try {\r\n                        ske.setAnimation(0, action, loop);\r\n                    } catch (e) {\r\n                        console.warn(\"playAnimation:\" + url);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n}"]}