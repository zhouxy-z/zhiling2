{"version":3,"sources":["file:///D:/plants_client/trunk/proj/assets/resources/bag/GetMoreItem.ts"],"names":["GetMoreItem","Button","Component","Label","Sprite","SpriteFrame","path","ResMgr","folder_item","item_bg","item_icon","item_name","tips","btn_go","callBack","data","$loadSub","complete","hasLoad","onLoad","node","getChildByName","getComponent","getChildByPath","on","EventType","CLICK","onGoTo","loadSub","thisObj","Promise","resolve","reject","setData","callback","icon_url","join","Icon","spriteFrame","LoadResAbSub","string","WinName","Desc","undefined"],"mappings":";;;yJAIaA,W;;;;;;;;;;;;;;;;;;;;;;;AAJJC,MAAAA,M,OAAAA,M;AAAQC,MAAAA,S,OAAAA,S;AAAWC,MAAAA,K,OAAAA,K;AAAaC,MAAAA,M,OAAAA,M;AAAQC,MAAAA,W,OAAAA,W;AAAaC,MAAAA,I,OAAAA,I;;AACrDC,MAAAA,M,iBAAAA,M;AAAQC,MAAAA,W,iBAAAA,W;;;;;;;;;6BAGJR,W,GAAN,MAAMA,WAAN,SAA0BE,SAA1B,CAAoC;AAAA;AAAA;AAAA,eAE/BO,OAF+B;AAAA,eAG/BC,SAH+B;AAAA,eAI/BC,SAJ+B;AAAA,eAK/BC,IAL+B;AAAA,eAM/BC,MAN+B;AAAA,eAO/BC,QAP+B;AAAA,eAQ/BC,IAR+B;AAAA,eAU7BC,QAV6B;AAAA,eAW7BC,QAX6B;AAAA,eAY7BC,OAZ6B,GAYnB,KAZmB;AAAA;;AAc7BC,QAAAA,MAAM,GAAS;AAAA;;AACrB,eAAKV,OAAL,GAAe,KAAKW,IAAL,CAAUC,cAAV,CAAyB,SAAzB,EAAoCC,YAApC,CAAiDlB,MAAjD,CAAf;AACA,eAAKM,SAAL,GAAiB,KAAKU,IAAL,CAAUG,cAAV,CAAyB,mBAAzB,EAA8CD,YAA9C,CAA2DlB,MAA3D,CAAjB;AACA,eAAKO,SAAL,GAAiB,KAAKS,IAAL,CAAUC,cAAV,CAAyB,WAAzB,EAAsCC,YAAtC,CAAmDnB,KAAnD,CAAjB;AACA,eAAKS,IAAL,GAAY,KAAKQ,IAAL,CAAUC,cAAV,CAAyB,MAAzB,EAAiCC,YAAjC,CAA8CnB,KAA9C,CAAZ;AACA,eAAKU,MAAL,GAAc,KAAKO,IAAL,CAAUC,cAAV,CAAyB,QAAzB,EAAmCC,YAAnC,CAAgDrB,MAAhD,CAAd;AACA,eAAKY,MAAL,CAAYO,IAAZ,CAAiBI,EAAjB,CAAoBvB,MAAM,CAACwB,SAAP,CAAiBC,KAArC,EAA4C,KAAKC,MAAjD,EAAyD,IAAzD;AACA,eAAKT,OAAL,GAAe,IAAf;AACA,iCAAKD,QAAL;AACH;;AAEoB,YAAPW,OAAO,GAAG;AACpB,cAAI,KAAKZ,QAAT,EAAmB,OAAO,KAAKA,QAAZ;AACnB,cAAIa,OAAO,GAAG,IAAd;AACA,eAAKb,QAAL,GAAgB,IAAIc,OAAJ,CAAY,CAACC,OAAD,EAAUC,MAAV,KAAqB;AAC7CH,YAAAA,OAAO,CAACZ,QAAR,GAAmBc,OAAnB;AACH,WAFe,CAAhB;AAGH;;AAEY,cAAPE,OAAO,CAAClB,IAAD,EAAcmB,QAAd,EAAkC;AAC3C,cAAI,CAAC,KAAKhB,OAAV,EAAmB,MAAM,KAAKU,OAAX;AACnB,eAAKb,IAAL,GAAYA,IAAZ;AACA,eAAKD,QAAL,GAAgBoB,QAAhB;AACA,cAAIC,QAAQ,GAAG7B,IAAI,CAAC8B,IAAL;AAAA;AAAA,0CAAuBrB,IAAI,CAACsB,IAA5B,EAAkC,aAAlC,CAAf;AACA,eAAK3B,SAAL,CAAe4B,WAAf,GAA6B,MAAM;AAAA;AAAA,gCAAOC,YAAP,CAAoBJ,QAApB,EAA8B9B,WAA9B,CAAnC;AACA,eAAKM,SAAL,CAAe6B,MAAf,GAAwBzB,IAAI,CAAC0B,OAA7B;AACA,eAAK7B,IAAL,CAAU4B,MAAV,GAAmBzB,IAAI,CAAC2B,IAAxB;AACH;;AAEOf,QAAAA,MAAM,GAAG;AACb,cAAIb,QAAQ,GAAG,KAAKA,QAApB;AACA,eAAKA,QAAL,GAAgB6B,SAAhB;AACA7B,UAAAA,QAAQ,QAAR,IAAAA,QAAQ,CAAG,KAAKC,IAAR,CAAR;AAEH;;AAhDsC,O","sourcesContent":["import { Button, Component, Label, Node, Sprite, SpriteFrame, path } from \"cc\";\r\nimport { ResMgr, folder_item } from \"../../manager/ResMgr\";\r\nimport { Fetch } from \"../../manager/CfgMgr\";\r\n\r\nexport class GetMoreItem extends Component {\r\n\r\n    private item_bg: Sprite;\r\n    private item_icon: Sprite;\r\n    private item_name: Label;\r\n    private tips: Label;\r\n    private btn_go: Button;\r\n    private callBack: Function;\r\n    private data: Fetch;\r\n\r\n    protected $loadSub: Promise<any>;\r\n    protected complete: Function;\r\n    protected hasLoad = false;\r\n\r\n    protected onLoad(): void {\r\n        this.item_bg = this.node.getChildByName(\"item_bg\").getComponent(Sprite);\r\n        this.item_icon = this.node.getChildByPath(\"item_bg/item_icon\").getComponent(Sprite);\r\n        this.item_name = this.node.getChildByName(\"item_name\").getComponent(Label);\r\n        this.tips = this.node.getChildByName(\"tips\").getComponent(Label);\r\n        this.btn_go = this.node.getChildByName(\"btn_go\").getComponent(Button);\r\n        this.btn_go.node.on(Button.EventType.CLICK, this.onGoTo, this)\r\n        this.hasLoad = true;\r\n        this.complete?.();\r\n    }\r\n\r\n    protected get loadSub() {\r\n        if (this.$loadSub) return this.$loadSub;\r\n        let thisObj = this;\r\n        this.$loadSub = new Promise((resolve, reject) => {\r\n            thisObj.complete = resolve;\r\n        });\r\n    }\r\n\r\n    async setData(data: Fetch, callback: Function) {\r\n        if (!this.hasLoad) await this.loadSub;\r\n        this.data = data;\r\n        this.callBack = callback;\r\n        let icon_url = path.join(folder_item, data.Icon, \"spriteFrame\");\r\n        this.item_icon.spriteFrame = await ResMgr.LoadResAbSub(icon_url, SpriteFrame);\r\n        this.item_name.string = data.WinName;\r\n        this.tips.string = data.Desc;\r\n    }\r\n\r\n    private onGoTo() {\r\n        let callBack = this.callBack;\r\n        this.callBack = undefined;\r\n        callBack?.(this.data);\r\n\r\n    }\r\n\r\n\r\n\r\n\r\n}"]}