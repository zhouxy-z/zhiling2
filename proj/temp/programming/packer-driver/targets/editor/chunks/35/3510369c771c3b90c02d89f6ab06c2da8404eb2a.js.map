{"version":3,"sources":["file:///D:/plants_client/trunk/proj/assets/scripts/module/fight/opOutput/Out_Settlement.ts"],"names":["Out_Settlement","Battle_ShowSettlement","EventMgr","Evt_BattleDoubleUpdate","BattleBaseComp","battleDataMgr","start","data","settleDoubleCount","emit","scene","Settlement","isExit","roomData","roomId","getPlayerId","exit","reset"],"mappings":";;;sHAQaA,c;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AARJC,MAAAA,qB,iBAAAA,qB;AAAuBC,MAAAA,Q,iBAAAA,Q;AAAUC,MAAAA,sB,iBAAAA,sB;;AAEjCC,MAAAA,c,iBAAAA,c;;AACAC,MAAAA,a,iBAAAA,a;;;;;;;AAET;AACA;AACA;gCACaL,c,GAAN,MAAMA,cAAN;AAAA;AAAA,4CAAuF;AAC/E,cAALM,KAAK,GAAG;AACV;AACA,cAAI,KAAKC,IAAL,CAAUC,iBAAV,IAA+B,KAAKD,IAAL,CAAUC,iBAAV,GAA8B,CAAjE,EAAoE;AAChE;AAAA;AAAA,sCAASC,IAAT;AAAA;AAAA,kEAAsC,KAAKF,IAAL,CAAUC,iBAAhD,EAAmE,IAAnE;AACH;;AACD,gBAAM,KAAKE,KAAL,CAAWC,UAAX,EAAN;AACA,cAAI,KAAKC,MAAT,EAAiB;AACjB;AAAA;AAAA,oCAASH,IAAT;AAAA;AAAA,8DAAqC;AAAA;AAAA,8CAAcI,QAAd,CAAuBC,MAA5D,EAAoE;AAAA;AAAA,8CAAcC,WAAd,CAA0B,IAA1B,CAApE,EAAqG,KAAKR,IAA1G;AACA,eAAKS,IAAL;AACH;;AAESC,QAAAA,KAAK,GAAS,CAEvB;;AAdyF,O","sourcesContent":["import { Battle_ShowSettlement, EventMgr, Evt_BattleDoubleUpdate } from \"../../../manager/EventMgr\";\r\nimport proto from \"../../../net/Protocol\";\r\nimport { BattleBaseComp } from \"../../battle/BattleBaseComp\";\r\nimport { battleDataMgr } from \"../../battle/BattleDataMgr\";\r\n\r\n/**\r\n * 结算\r\n */\r\nexport class Out_Settlement extends BattleBaseComp<proto.base.IBattleRoomOpOutput_Settlement> {\r\n    async start() {\r\n        //系统加倍\r\n        if (this.data.settleDoubleCount && this.data.settleDoubleCount > 0) {\r\n            EventMgr.emit(Evt_BattleDoubleUpdate, this.data.settleDoubleCount, this);\r\n        }\r\n        await this.scene.Settlement();\r\n        if (this.isExit) return;\r\n        EventMgr.emit(Battle_ShowSettlement, battleDataMgr.roomData.roomId, battleDataMgr.getPlayerId(true), this.data)\r\n        this.exit();\r\n    }\r\n\r\n    protected reset(): void {\r\n        \r\n    }\r\n    \r\n}"]}