{"version":3,"sources":["file:///D:/plants_client/trunk/proj/assets/scripts/debug/wyc/SkillScene.ts"],"names":["Component","_decorator","director","find","TestSkill","ResMgr","GameScene","Second","SceneCard","ccclass","property","SkillScene","onLoad","PrevLoad","addComponent","layout1","layout2","attacker","Create","setWorldPosition","isntance","worldPosition","setWorldRotation","rotation","getScene","addChild","name","Open","enemy","destroy","myLayout","adLayout","areaLay","enemys","ps","i","n","card","push","testEnemys","Promise","all","ls","getComponentsInChildren","test","enabled","Test"],"mappings":"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","sourcesContent":["import { Component, Material, Node, _decorator, director, find, game, instantiate, sp } from \"cc\";\r\nimport { TestSkill } from \"../../module/fight/display/TestSkill\";\r\nimport { ResMgr } from \"../../manager/ResMgr\";\r\nimport { GameScene } from \"../../module/fight/GameScene\";\r\nimport { Second } from \"../../utils/Utils\";\r\nimport { SceneCard } from \"../../module/fight/display/SceneCard\";\r\n\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('SkillScene')\r\nexport class SkillScene extends Component {\r\n    protected async onLoad() {\r\n\r\n        await ResMgr.PrevLoad();\r\n\r\n        find(\"FightScene\").addComponent(GameScene);\r\n\r\n        await Second(0.1);\r\n\r\n        let layout1 = find(\"FightScene/area0/team1/card1\");\r\n        let layout2 = find(\"FightScene/area0/team2/card1\");\r\n\r\n        let attacker = SceneCard.Create();\r\n        attacker.setWorldPosition(GameScene.isntance['myTeamLayout'][0][0].worldPosition);\r\n        attacker.setWorldRotation(GameScene.isntance['myTeamLayout'][0][0].rotation);\r\n        director.getScene().addChild(attacker);\r\n        attacker.name = \"attacker\";\r\n        attacker.Open();\r\n\r\n        let enemy = find(\"enemy\");\r\n        enemy.setWorldPosition(layout2.worldPosition);\r\n        if (enemy) enemy.destroy();\r\n\r\n        let myLayout: any[][] = GameScene.isntance['myTeamLayout'] as (any[][]);\r\n        let adLayout: any[][] = GameScene.isntance['adTeamLayout'] as (any[][]);\r\n        let areaLay: Node = GameScene.isntance['areaCardLay'];\r\n        let enemys = [], ps = [];\r\n        for (let i = 0; i < 3; i++) {\r\n            for (let n = 0; n < 3; n++) {\r\n                let card = SceneCard.Create();\r\n                card.name = \"敌人\" + (i * 4 + n);\r\n                card.setWorldPosition(adLayout[i][n].worldPosition);\r\n                card.setWorldRotation(adLayout[i][n].rotation);\r\n                ps.push(card.Open());\r\n                director.getScene().addChild(card);\r\n                enemys.push(card);\r\n\r\n                // if (i != 0 || n != 0) {\r\n                //     let atk = SceneCard.Create();\r\n                //     atk.name = \"我方\" + (i * 4 + n);\r\n                //     atk.setWorldPosition(myLayout[i][n].worldPosition);\r\n                //     atk.setWorldRotation(myLayout[i][n].rotation);\r\n                //     director.getScene().addChild(atk);\r\n                //     atk.Open();\r\n                // }\r\n            }\r\n        }\r\n        TestSkill.testEnemys = enemys;\r\n        await Promise.all(ps);\r\n\r\n        let ls = director.getScene().getComponentsInChildren(TestSkill);\r\n        for (let test of ls) {\r\n            if (test.enabled) test.Test();\r\n        }\r\n\r\n    }\r\n}"]}