{"version":3,"sources":["file:///D:/plants_client/trunk/proj/assets/scripts/utils/BeforeGameUtils.ts"],"names":["BeforeGameUtils","js","toHashMap","args","result","createMap","val","toHashMapObj","key","len","length","i","generateSafeFunction","fn","code","toString","bodyStart","indexOf","bodyEnd","lastIndexOf","fnBody","slice","newFnCode","name","Function"],"mappings":";;;sEAKaA,e;;;;;;;;;AADJC,MAAAA,E,OAAAA,E;;;;;;AAJT;AACA;AACA;;;;;iCAGaD,e,GAAN,MAAMA,eAAN,CACP;AACI;AACJ;AACA;AACA;AACA;AACoB,eAATE,SAAS,CAAC,GAAGC,IAAJ,EAA0C;AACtD,cAAIC,MAAM,GAAGH,EAAE,CAACI,SAAH,EAAb;;AACA,eAAK,MAAMC,GAAX,IAAkBH,IAAlB,EAAwB;AACpBC,YAAAA,MAAM,CAACE,GAAD,CAAN,GAAc,IAAd;AACH;;AACD,iBAAOF,MAAP;AACH;AACD;AACJ;AACA;AACA;AACA;;;AACuB,eAAZG,YAAY,CAAI,GAAGJ,IAAP,EAAwC;AACvD,cAAIC,MAAM,GAAGH,EAAE,CAACI,SAAH,EAAb;AACA,cAAIC,GAAJ,EAAcE,GAAd;AACA,cAAIC,GAAW,GAAGN,IAAI,CAACO,MAAvB;;AACA,eAAK,IAAIC,CAAS,GAAG,CAArB,EAAwBA,CAAC,GAAGF,GAA5B,EAAiCE,CAAC,EAAlC,EAAsC;AAClCH,YAAAA,GAAG,GAAGL,IAAI,CAACQ,CAAD,CAAV;AACAL,YAAAA,GAAG,GAAGH,IAAI,CAAC,EAAEQ,CAAH,CAAV;AACAP,YAAAA,MAAM,CAACI,GAAD,CAAN,GAAcF,GAAd;AACH;;AACD,iBAAOF,MAAP;AACH;;AAGiC,eAApBQ,oBAAoB,CAACC,EAAD,EAAyB;AAAA;;AACvD,cAAIC,IAAI,GAAGD,EAAE,CAACE,QAAH,EAAX;AACA,cAAIC,SAAS,GAAGF,IAAI,CAACG,OAAL,CAAa,GAAb,IAAoB,CAApC;AACA,cAAIC,OAAO,GAAGJ,IAAI,CAACK,WAAL,CAAiB,GAAjB,CAAd;AACA,cAAIC,MAAM,GAAGN,IAAI,CAACO,KAAL,CAAWL,SAAX,EAAsBE,OAAtB,CAAb;AACA,cAAII,SAAS,GAAI,mBAAD,YAAmBT,EAAE,CAACU,IAAtB,uBAA8B,WAAY,QAAOH,MAAO,IAAxE;AACA,iBAAO,IAAII,QAAJ,CAAaF,SAAb,GAAP;AACH;;AAtCL,O","sourcesContent":["/**\r\n * 此文件用于游戏初始化前的所有定义与声明，防止其他类文件互相引用时的先后顺序导致的异常\r\n */\r\n\r\nimport { js } from \"cc\";\r\nexport class BeforeGameUtils\r\n{\r\n    /**\r\n     * 传入参数转为哈希map布尔值\r\n     * @param args \r\n     * @returns \r\n     */\r\n    static toHashMap(...args: any[]):{[key: string]: boolean} {\r\n        let result = js.createMap();\r\n        for (const val of args) {\r\n            result[val] = true;\r\n        }\r\n        return result;\r\n    }\r\n    /**\r\n     * 传入参数转为哈希map对象\r\n     * @param args \r\n     * @returns \r\n     */\r\n    static toHashMapObj<T>(...args: any[]): {[key: string]: T} {\r\n        let result = js.createMap();\r\n        var val: any, key: any\r\n        var len: number = args.length;\r\n        for (var i: number = 0; i < len; i++) {\r\n            key = args[i];\r\n            val = args[++i];\r\n            result[key] = val;\r\n        }\r\n        return result;\r\n    }\r\n    \r\n\r\n    public static generateSafeFunction(fn: Function): Function {\r\n        let code = fn.toString();\r\n        let bodyStart = code.indexOf('{') + 1;\r\n        let bodyEnd = code.lastIndexOf('}');\r\n        let fnBody = code.slice(bodyStart, bodyEnd);\r\n        let newFnCode = `return function ${fn.name ?? 'anonymous'}() { ${fnBody} }`;\r\n        return new Function(newFnCode)();\r\n    }\r\n}"]}