{"version":3,"sources":["file:///D:/plants_client/trunk/proj/assets/scripts/module/season/SeasonTipsPanel.ts"],"names":["SeasonTipsPanel","Label","path","Sprite","SpriteFrame","Panel","PlayerData","CfgMgr","ResMgr","prefab","icon","nameLab","seasonData","onLoad","find","CloseBy","flush","CurSeasonData","setSeasonInfo","onShow","onHide","curStdPVPSnatch","GetStdPVPSnatch","currentSeasonId","Hide","string","MatchName","LoadResAbSub","join","MatchID","res","spriteFrame"],"mappings":";;;oJAOaA,e;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAPJC,MAAAA,K,OAAAA,K;AAAOC,MAAAA,I,OAAAA,I;AAAMC,MAAAA,M,OAAAA,M;AAAQC,MAAAA,W,OAAAA,W;;AACrBC,MAAAA,K,iBAAAA,K;;AACAC,MAAAA,U,iBAAAA,U;;AAEAC,MAAAA,M,iBAAAA,M;;AACAC,MAAAA,M,iBAAAA,M;;;;;;;;;iCAEIR,e,GAAN,MAAMA,eAAN;AAAA;AAAA,0BAAoC;AAAA;AAAA;AAAA,eAC7BS,MAD6B,GACZ,gCADY;AAAA,eAE/BC,IAF+B;AAAA,eAG/BC,OAH+B;AAAA,eAI/BC,UAJ+B;AAAA;;AAK7BC,QAAAA,MAAM,GAAG;AACf,eAAKH,IAAL,GAAY,KAAKI,IAAL,CAAU,MAAV,EAAkBX,MAAlB,CAAZ;AACA,eAAKQ,OAAL,GAAe,KAAKG,IAAL,CAAU,SAAV,EAAqBb,KAArB,CAAf;AACA,eAAKc,OAAL,CAAa,UAAb;AACH;;AAEMC,QAAAA,KAAK,GAAS;AACjB,eAAKJ,UAAL,GAAkB;AAAA;AAAA,wCAAWK,aAA7B;AACA,eAAKC,aAAL;AACH;;AAESC,QAAAA,MAAM,GAAS,CAExB;;AAESC,QAAAA,MAAM,GAAS,CAExB;;AAEOF,QAAAA,aAAa,GAAS;AAC1B,cAAIG,eAA6B,GAAG;AAAA;AAAA,gCAAOC,eAAP,CAAuB,KAAKV,UAAL,CAAgBW,eAAvC,CAApC;;AACA,cAAI,CAACF,eAAL,EAAsB;AAClB,iBAAKG,IAAL;AACA;AACH;;AACD,eAAKb,OAAL,CAAac,MAAb,GAAsBJ,eAAe,CAACK,SAAtC;AACA;AAAA;AAAA,gCAAOC,YAAP,CAAoBzB,IAAI,CAAC0B,IAAL,CAAU,eAAV,EAA4B,QAAOP,eAAe,CAACQ,OAAQ,EAA3D,EAA8D,aAA9D,CAApB,EAAkGzB,WAAlG,EAAgH0B,GAAD,IAAsB;AACjI,iBAAKpB,IAAL,CAAUqB,WAAV,GAAwBD,GAAxB;AACH,WAFD;AAGH;;AAlCsC,O","sourcesContent":["import { Label, path, Sprite, SpriteFrame} from \"cc\";\r\nimport { Panel } from \"../../manager/GameRoot\";\r\nimport { PlayerData } from \"../player/PlayerData\";\r\nimport proto from \"../../net/Protocol\";\r\nimport { CfgMgr, StdPvpLevel, StdPVPSnatch } from \"../../manager/CfgMgr\";\r\nimport { ResMgr } from \"../../manager/ResMgr\";\r\n\r\nexport class SeasonTipsPanel extends Panel {\r\n    protected prefab: string = \"prefabs/season/SeasonTipsPanel\";\r\n    private icon: Sprite;\r\n    private nameLab: Label;\r\n    private seasonData: proto.pb.PlayerPvpInfoPush;\r\n    protected onLoad() {\r\n        this.icon = this.find(\"icon\", Sprite);\r\n        this.nameLab = this.find(\"nameLab\", Label);\r\n        this.CloseBy(\"closeBtn\");\r\n    }\r\n\r\n    public flush(): void {\r\n        this.seasonData = PlayerData.CurSeasonData;\r\n        this.setSeasonInfo();\r\n    }\r\n\r\n    protected onShow(): void {\r\n        \r\n    }\r\n\r\n    protected onHide(): void {\r\n        \r\n    }\r\n\r\n    private setSeasonInfo(): void {\r\n        let curStdPVPSnatch: StdPVPSnatch = CfgMgr.GetStdPVPSnatch(this.seasonData.currentSeasonId);\r\n        if (!curStdPVPSnatch) {\r\n            this.Hide();\r\n            return;\r\n        }\r\n        this.nameLab.string = curStdPVPSnatch.MatchName;\r\n        ResMgr.LoadResAbSub(path.join(\"sheets/season\", `icon_${curStdPVPSnatch.MatchID}`, \"spriteFrame\"), SpriteFrame, (res: SpriteFrame) => {\r\n            this.icon.spriteFrame = res;\r\n        });\r\n    }\r\n}"]}