{"version":3,"sources":["file:///D:/plants_client/trunk/proj/assets/scripts/module/battle/opOutput/Out_PlayerPower_2d.ts"],"names":["Out_PlayerPower_2d","BattleBaseComp","battleDataMgr","battleLogicMgr","start","terraninGridList","terrainGrildList","terraninGrid","data","playerPower","platerPowers","platerPower","isPlayerA","key","index","power","length","powerAttr","updatePower","finalValue","exit","console","error","reset"],"mappings":";;;6EASaA,kB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AARJC,MAAAA,c,iBAAAA,c;;AACAC,MAAAA,a,iBAAAA,a;;AACAC,MAAAA,c,iBAAAA,c;;;;;;;AAGT;AACA;AACA;oCACaH,kB,GAAN,MAAMA,kBAAN;AAAA;AAAA,4CAAsF;AAC/EI,QAAAA,KAAK,GAAS;AACpB,cAAIC,gBAAqC,GAAG;AAAA;AAAA,gDAAeC,gBAA3D;AACA,cAAIC,YAAJ;;AACA,cAAI,KAAKC,IAAL,CAAUC,WAAV,IAAyB,KAAKD,IAAL,CAAUC,WAAvC,EAAoD;AAChD,gBAAIC,YAAoE,GAAG,KAAKF,IAAL,CAAUC,WAArF;AACA,gBAAIE,WAAJ;AACA,gBAAIC,SAAJ;;AACA,iBAAK,IAAIC,GAAT,IAAgBH,YAAhB,EAA8B;AAC1BC,cAAAA,WAAW,GAAGD,YAAY,CAACG,GAAD,CAA1B;AACAD,cAAAA,SAAS,GAAG;AAAA;AAAA,kDAAcA,SAAd,CAAwBC,GAAxB,CAAZ;;AACA,mBAAK,IAAIC,KAAK,GAAG,CAAjB,EAAoBA,KAAK,GAAGH,WAAW,CAACI,KAAZ,CAAkBC,MAA9C,EAAsDF,KAAK,EAA3D,EAA+D;AAC3D,oBAAIG,SAAoC,GAAGN,WAAW,CAACI,KAAZ,CAAkBD,KAAlB,CAA3C;AACAP,gBAAAA,YAAY,GAAGF,gBAAgB,CAACS,KAAD,CAA/B;AACAP,gBAAAA,YAAY,CAACW,WAAb,CAAyBD,SAAS,CAACE,UAAnC,EAA+CP,SAA/C;AACH;AACJ;;AACD,iBAAKQ,IAAL;AACH,WAdD,MAcO;AACHC,YAAAA,OAAO,CAACC,KAAR,CAAc,YAAd;AACA,iBAAKF,IAAL;AACH;AACJ;;AACSG,QAAAA,KAAK,GAAS,CAEvB;;AAzBwF,O","sourcesContent":["import base from \"../../../net/proto/BaseUtils\";\r\nimport { BattleBaseComp } from \"../BattleBaseComp\";\r\nimport { battleDataMgr } from \"../BattleDataMgr\";\r\nimport { battleLogicMgr } from \"../BattleLogicMgr\";\r\nimport { BattleTerrainGrid } from \"../BattleTerrainGrid\";\r\n\r\n/**\r\n * 玩家战力变更\r\n */\r\nexport class Out_PlayerPower_2d extends BattleBaseComp<base.IBattleRoomOpOutput_PlayerPower> {\r\n    protected start(): void {\r\n        let terraninGridList: BattleTerrainGrid[] = battleLogicMgr.terrainGrildList;\r\n        let terraninGrid: BattleTerrainGrid;\r\n        if (this.data.playerPower && this.data.playerPower) {\r\n            let platerPowers: { [k: string]: base.IBattleRoomOpOutput_TerrainPower } = this.data.playerPower;\r\n            let platerPower: base.IBattleRoomOpOutput_TerrainPower;\r\n            let isPlayerA: boolean;\r\n            for (let key in platerPowers) {\r\n                platerPower = platerPowers[key];\r\n                isPlayerA = battleDataMgr.isPlayerA(key);\r\n                for (let index = 0; index < platerPower.power.length; index++) {\r\n                    let powerAttr: base.IBattleRoomAttrValue = platerPower.power[index];\r\n                    terraninGrid = terraninGridList[index];\r\n                    terraninGrid.updatePower(powerAttr.finalValue, isPlayerA);\r\n                }\r\n            }\r\n            this.exit();\r\n        } else {\r\n            console.error(\"玩家战力变更数据为空\");\r\n            this.exit();\r\n        }\r\n    }\r\n    protected reset(): void {\r\n        \r\n    }\r\n}"]}