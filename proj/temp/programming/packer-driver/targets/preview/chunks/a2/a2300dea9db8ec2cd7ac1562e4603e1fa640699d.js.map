{"version":3,"sources":["file:///D:/plants_client/trunk/proj/assets/scripts/manager/GameRoot.ts"],"names":["GameRoot","Panel","ProxyComponent","GameObj","popGameObj","classz","prefab","js","getClassName","$classSeed","getClassByName","setClassName","pool","gameObjPool","length","pop","undefined","pushGameObj","obj","parent","removeChild","destroy","indexOf","push","Component","Input","Node","NodeEventType","UITransform","Widget","find","instantiate","sys","view","ResMgr","EventMgr","UILay","$panel_cache","$topBarHeight","constructor","canvas","depth","loading","lays","$root_inst","panel","$LoadingIns","k","isNaN","Number","lay","widget","addComponent","isAlignLeft","left","isAlignRight","right","isAlignTop","top","isAlignBottom","bottom","name","index","addChild","setSiblingIndex","console","log","$show","bind","$hide","$getChildNum","getChildNum","on","onUpdateTopBar","getVisibleSize","height","getSafeAreaRect","h","i","getComponent","num","excepts","children","child","display","container","node","$hasLoad","$canBack","$lockLay","_initComplete","initSub","Promise","resolve","reject","initComplete","$initComplete","$secondTick","hasLoad","SetPage","isComplete","update","dt","onSecond","closeOther","type","Hide","CloseAll","Back","Create","thisObj","$proxy","prototype","Object","getPrototypeOf","success","promise","GetResources","EventType","PARENT_CHANGED","e","onload","onLoad","value","total","$showing","Show","Emit","arg0","arg1","arg2","arg3","arg4","emit","onShow","flush","ShowTop","Modal","ShowMsg","MsgPanel","ShowUI","UI","path","componentType","className","replace","getChildByPath","CloseBy","target","btn","warn","TOUCH_END","show","args","$instance","checkWidget","$loading","$getInstance","then","setPage","getChildByName","w","$beforLoadComplete","load","ShowGame","Game","Flush","Waitting","Showing","GetPanelNum","p","$beforLoad","Call","method","Destroy","$loaded","$onLoad","$started","$start","$onEnable","$update","$onDisable","start","onEnable","onDisable","$prefab","loadPrefab","loadSub","loadEnd","$getComponent","$addComponent","layPriority","getComponentInChildren","getComponents","getComponentsInChildren","GetLoadSub","removeSelf","prefabNode","GetChildren","prefaburl","url","error","beforLoad","schedule","callback","interval","repeat","delay","scheduleOnce","receive","unscheduleAllCallbacks","self","$classz"],"mappings":"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","sourcesContent":["import { Component, Input, Layers, Node, NodeEventType, Prefab, RenderRoot2D, UITransform, View, Widget, __private, find, instantiate, js, sys, view } from \"cc\";\r\nimport { ResMgr } from \"./ResMgr\";\r\nimport { EventMgr } from \"./EventMgr\";\r\n\r\nexport enum UILay {\r\n    Game,    //游戏层\r\n    UI,      //ui层\r\n    Panel,   //面板层\r\n    MsgPanel,//信息展示层\r\n    Guide,   //引导\r\n    Modal,   //顶层面板层\r\n}\r\n\r\nlet $show: (display: Node, lay: number, siblingIndex?: number) => boolean;\r\nlet $hide: (display: Node) => void;\r\nlet $getChildNum: (...excepts: any[]) => number;\r\nlet $panel_cache: Panel[] = [];\r\nlet $LoadingIns: { Show: Function, Hide: Function };\r\nlet $topBarHeight: number = 0;\r\nlet $root_inst: GameRoot;\r\n\r\nexport class GameRoot {\r\n\r\n    canvas: Node;\r\n    lays: Node[] = [];\r\n\r\n    constructor(canvas: Node, depth: number = 0, loading?: { Show: Function, Hide: Function }) {\r\n        if ($root_inst) {\r\n            for (let panel of $panel_cache) {\r\n                panel['Destroy']();\r\n            }\r\n            $panel_cache = [];\r\n            $root_inst = undefined;\r\n        }\r\n        $root_inst = this;\r\n        this.canvas = canvas;\r\n        $LoadingIns = loading;\r\n\r\n        for (var k in UILay) {\r\n            if (isNaN(Number(k))) {\r\n                let lay = new Node();\r\n                let widget = lay.addComponent(Widget);\r\n                widget.isAlignLeft = true;\r\n                widget.left = 0;\r\n                widget.isAlignRight = true;\r\n                widget.right = 0;\r\n                widget.isAlignTop = true;\r\n                widget.top = 0;\r\n                widget.isAlignBottom = true;\r\n                widget.bottom = 0;\r\n                lay.name = k + \"_Lay\";\r\n                let index = Number(UILay[k]);\r\n                this.lays[index] = lay;\r\n                this.canvas.addChild(lay);\r\n                lay.setSiblingIndex(index + depth);\r\n            }\r\n        }\r\n        // $root = this.lays[Lay.FGUI];\r\n        if (find(\"Canvas/bg\"))\r\n            find(\"Canvas/bg\").setSiblingIndex(0);\r\n\r\n        console.log(\"GameRoot\", this.canvas);\r\n        $show = this.addChild.bind(this);\r\n        $hide = this.removeChild.bind(this);\r\n        $getChildNum = this.getChildNum.bind(this);\r\n\r\n        EventMgr.on(\"top_bar_height\", this.onUpdateTopBar, this);\r\n        this.onUpdateTopBar(view.getVisibleSize().height - sys.getSafeAreaRect().height);\r\n    }\r\n\r\n    private onUpdateTopBar(h: number) {\r\n        $topBarHeight = h;\r\n        console.log(\"onStatusBar\", $topBarHeight);\r\n        for (let i = 0; i < this.lays.length; i++) {\r\n            let lay = this.lays[i];\r\n            let widget = lay.getComponent(Widget);\r\n            if (widget) widget.top = $topBarHeight || 0;\r\n        }\r\n    }\r\n\r\n    private getChildNum(...excepts: string[]) {\r\n        let num = 0;\r\n        for (let lay of this.lays) {\r\n            let children = lay.children;\r\n            for (let child of children) {\r\n                if (excepts.indexOf(child.name) == -1) {\r\n                    num++;\r\n                }\r\n            }\r\n        }\r\n        return num;\r\n    }\r\n\r\n    /**\r\n     * 显示对象\r\n     * @param display \r\n     * @param lay \r\n     */\r\n    private addChild(display: Node, lay: number) {\r\n        let container = this.lays[lay];\r\n        if (display.parent != container) {\r\n            this.lays[lay].addChild(display);\r\n            return true;\r\n        } else {\r\n            display.setSiblingIndex(container.children.length - 1);\r\n            return false;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 移除ui\r\n     * @param display \r\n     */\r\n    private removeChild(display: Component | Node) {\r\n        if (display instanceof Component) {\r\n            if (display.node.parent) {\r\n                display.node.parent.removeChild(display.node);\r\n            }\r\n        } else {\r\n            if (display.parent) display.parent.removeChild(display);\r\n        }\r\n    }\r\n}\r\n\r\ntype classz<T = unknown> = new (...args: any[]) => T;\r\ntype _classz<T = unknown> = new (...args: any[]) => T;\r\ntype Parameters<T extends (...args: any) => any> = T extends (...args: infer P) => any ? P : never;\r\n/**\r\n * 界面基类\r\n * @默认隐藏单例并且推荐采用静态方法控制和更新界面\r\n * @实在需要可在子类公开单例\r\n * @Create方法可以创建多个界面副本\r\n * @Call方法和Emit方法都可以在界面加载或打开之前调用但是只会在加载初始完毕后才真正调用\r\n */\r\nexport abstract class Panel extends Component {\r\n    protected static $instance: any;\r\n    protected static $loading: Promise<any>;\r\n    protected static $beforLoad: Promise<any>;\r\n    protected static $beforLoadComplete: Function;\r\n    protected static $showing: boolean = false;\r\n\r\n    protected $hasLoad: boolean = false;\r\n    protected $canBack: boolean = false;//是否可以回退\r\n    protected $lockLay: UILay;\r\n    private _initComplete: Function;\r\n    protected initSub: Promise<any> = new Promise((resolve, reject) => {\r\n        this._initComplete = resolve;\r\n    });\r\n\r\n    /**\r\n     * - 已废弃，onLoad基类会自动回调resolve\r\n     * @deprecated\r\n     */\r\n    protected initComplete = () => {\r\n        let $initComplete = this._initComplete;\r\n        this._initComplete = undefined;\r\n        $initComplete();\r\n        this.$hasLoad = true;\r\n    };\r\n\r\n    protected get hasLoad() {\r\n        return this.$hasLoad;\r\n    }\r\n\r\n    private static $proxy: any;\r\n\r\n    /**\r\n     * 面板预制名称\r\n     */\r\n    protected abstract prefab: string;\r\n\r\n    /**\r\n     * 当界面加进显示列表显示出来时调用一次\r\n     */\r\n    protected abstract onShow(): void;\r\n\r\n    /**\r\n     * 刷新，每次Show或者Update时调用\r\n     * @param args \r\n     */\r\n    public abstract flush(...args): void;\r\n\r\n    public SetPage(...args): void { }\r\n\r\n    /**\r\n     * 当界面被关闭时调用\r\n     */\r\n    protected abstract onHide(...args): void;\r\n\r\n    get isComplete() {\r\n        return this._initComplete == undefined;\r\n    }\r\n\r\n    protected update(dt: number): void {\r\n        this.$secondTick += dt;\r\n        if (this.$secondTick >= 1) {\r\n            this.$secondTick = 0;\r\n            this.onSecond();\r\n        }\r\n    }\r\n    protected $secondTick = 0;\r\n    protected onSecond() {\r\n\r\n    }\r\n\r\n    /**\r\n     * 关闭其他\r\n     */\r\n    protected closeOther(type = Panel) {\r\n        for (let lay of $root_inst.lays) {\r\n            let children = lay.children;\r\n            for (let child of children) {\r\n                if (child != this.node) {\r\n                    let panel = child.getComponent(type);\r\n                    if (panel) {\r\n                        panel.Hide();\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 关闭所有\r\n     */\r\n    static CloseAll() {\r\n        for (let lay of $root_inst.lays) {\r\n            let children = lay.children;\r\n            for (let child of children) {\r\n                let panel = child.getComponent(Panel);\r\n                if (panel) {\r\n                    panel.Hide();\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 回退\r\n     */\r\n    static Back() {\r\n        for (let lay of $root_inst.lays) {\r\n            let children = lay.children;\r\n            for (let child of children) {\r\n                let panel = child.getComponent(Panel);\r\n                if (panel && panel.$canBack) {\r\n                    panel.Hide();\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 创建面板实例\r\n     * @returns \r\n     */\r\n    static async Create(): Promise<Panel> {\r\n        let thisObj = this;\r\n        if (!thisObj.$proxy) thisObj.$proxy = new (thisObj as any)();\r\n        let prefab = thisObj.$proxy.prefab;\r\n        if (!prefab || prefab == \"\") throw js.getClassName(thisObj) + \"必须设置protected static prefab以绑定预制界面\";\r\n        let prototype = thisObj.prototype ? thisObj.prototype : Object.getPrototypeOf(thisObj);\r\n        let classz = prototype.constructor;\r\n        let success: Function;\r\n        let promise: Promise<typeof classz> = new Promise((resolve, reject) => {\r\n            success = resolve;\r\n        });\r\n        ResMgr.GetResources(prefab, (prefab: Prefab) => {\r\n            let node = instantiate(prefab);\r\n            let panel: Panel = node.addComponent(classz);\r\n            node.on(Node.EventType.PARENT_CHANGED, e => {\r\n                if (!node.parent) {\r\n                    if (panel['onHide']) panel['onHide']();\r\n                }\r\n            });\r\n            success(panel);\r\n            let onload = panel.onLoad ? panel.onLoad.bind(panel) : undefined;\r\n            panel.onLoad = () => {\r\n                if (!onload?.()) {\r\n                    let initComplete = panel._initComplete;\r\n                    panel._initComplete = undefined;\r\n                    initComplete();\r\n                    panel.$hasLoad = true;\r\n                }\r\n            }\r\n        }, (value, total) => {\r\n            if (thisObj.$showing && $LoadingIns) $LoadingIns.Show(value, total);\r\n        });\r\n        return promise;\r\n    }\r\n\r\n    /**\r\n     * 通过事件名发送自定义事件\r\n     * @param type \r\n     * @param arg0 \r\n     * @param arg1 \r\n     * @param arg2 \r\n     * @param arg3 \r\n     * @param arg4 \r\n     */\r\n    Emit(type: string, arg0?: any, arg1?: any, arg2?: any, arg3?: any, arg4?: any) {\r\n        this.node.emit(type, arg0, arg1, arg2, arg3, arg4);\r\n    }\r\n\r\n    Show(...args) {\r\n        let thisObj = this;\r\n        if (!thisObj.node) throw js.getClassName(thisObj) + \"实例必须使用Create创建\";\r\n        let lay = this.$lockLay != undefined ? this.$lockLay : UILay.Panel;\r\n        if ($show(thisObj.node, lay)) {\r\n            thisObj.onShow();\r\n        }\r\n        thisObj.flush(...args);\r\n    }\r\n\r\n    ShowTop(...args) {\r\n        let thisObj = this;\r\n        if (!thisObj.node) throw js.getClassName(thisObj) + \"实例必须使用Create创建\";\r\n        let lay = this.$lockLay != undefined ? this.$lockLay : UILay.Modal;\r\n        if ($show(thisObj.node, lay)) {\r\n            thisObj.onShow();\r\n        }\r\n        thisObj.flush(...args);\r\n    }\r\n\r\n    ShowMsg(...args) {\r\n        let thisObj = this;\r\n        if (!thisObj.node) throw js.getClassName(thisObj) + \"实例必须使用Create创建\";\r\n        let lay = this.$lockLay != undefined ? this.$lockLay : UILay.MsgPanel;\r\n        if ($show(thisObj.node, lay)) {\r\n            thisObj.onShow();\r\n        }\r\n        thisObj.flush(...args);\r\n    }\r\n\r\n    ShowUI(...args) {\r\n        let thisObj = this;\r\n        if (!thisObj.node) throw js.getClassName(thisObj) + \"实例必须使用Create创建\";\r\n        let lay = this.$lockLay != undefined ? this.$lockLay : UILay.UI;\r\n        if ($show(thisObj.node, lay)) {\r\n            thisObj.onShow();\r\n        }\r\n        thisObj.flush(...args);\r\n    }\r\n\r\n    Hide(...args) {\r\n        let thisObj = this;\r\n        if (!thisObj.node || !thisObj.node.parent) return;\r\n        $hide(thisObj.node);\r\n        // thisObj.onHide(...args);\r\n    }\r\n\r\n    protected find<T extends Component>(path: string): Node;\r\n    protected find<T extends Component>(path: string, componentType: classz<T> | _classz<T>): T | null;\r\n    protected find(path: string, componentType?: any) {\r\n        let className = js.getClassName(this);\r\n        path = path.replace(\"should_hide_in_hierarchy/\" + className + \"/\", \"\");\r\n        let node = this.node.getChildByPath(path);\r\n        if (componentType) return node.getComponent(componentType);\r\n        return node;\r\n    }\r\n\r\n    /**\r\n     * 绑定关闭按钮\r\n     * @param target \r\n     */\r\n    protected CloseBy(target: Node | string) {\r\n        if (target instanceof Node) {\r\n            var btn: Node = target;\r\n        } else if (this.node) {\r\n            var btn = this.node.getChildByPath(target);\r\n        }\r\n        if (!btn) {\r\n            console.warn(\"找不到关闭ui\", target);\r\n        }\r\n        btn.on(Input.EventType.TOUCH_END, this.Hide, this);\r\n    }\r\n\r\n    /**\r\n     * 显示处理\r\n     * @param thisObj \r\n     * @param lay \r\n     * @returns \r\n     */\r\n    private static async show(thisObj: any, lay: number, ...args) {\r\n        // console.log(\"UIPath----\", thisObj.name);\r\n        thisObj.$showing = true;\r\n        if (thisObj.$instance) {\r\n            if (thisObj.$instance.$lockLay) lay = thisObj.$instance.$lockLay;\r\n            if ($show(thisObj.$instance.node, lay)) {\r\n                thisObj.$instance.onShow(...args);\r\n            }\r\n            thisObj.$instance.flush(...args);\r\n            this.checkWidget(thisObj.$instance);\r\n            if (thisObj.$loading) return thisObj.$loading;\r\n            return Promise.resolve(thisObj.$instance);\r\n        } else {\r\n            return this.$getInstance(thisObj).then(panel => {\r\n                if (thisObj.$showing) {\r\n                    if (thisObj.$instance.$lockLay) lay = thisObj.$instance.$lockLay;\r\n                    if ($show(panel.node, lay)) {\r\n                        panel.onShow(...args);\r\n                    }\r\n                    panel.flush(...args);\r\n                    this.checkWidget(panel);\r\n                }\r\n                return panel;\r\n            });\r\n        }\r\n    }\r\n    /**\r\n     * 切页处理\r\n     * @param thisObj \r\n     * @param args \r\n     * @returns \r\n     */\r\n    private static async setPage(thisObj: any, ...args) {\r\n        if (!thisObj.$showing) return;\r\n        if (thisObj.$instance) {\r\n            thisObj.$instance.SetPage(...args);\r\n            if (thisObj.$loading) return thisObj.$loading;\r\n            return Promise.resolve(thisObj.$instance);\r\n        } else {\r\n            return this.$getInstance(thisObj).then(panel => {\r\n                if (thisObj.$showing) {\r\n                    panel.SetPage(...args);\r\n                }\r\n                return panel;\r\n            });\r\n        }\r\n    }\r\n\r\n    private static checkWidget(thisObj) {\r\n        if (thisObj.node) {\r\n            let node: Node = thisObj.node.getChildByName(`mask`);\r\n            if (node) {\r\n                let w = node.getComponent(Widget);\r\n                if (w) w.top = -$topBarHeight || 0;\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 加载实例\r\n     * @param thisObj \r\n     * @returns \r\n     */\r\n    private static async $getInstance(thisObj: any) {\r\n        if (thisObj.$loading) return thisObj.$loading;\r\n        if (!thisObj.$proxy) thisObj.$proxy = new (thisObj as any)();\r\n        let prefab = thisObj.$proxy.prefab;\r\n        if (!prefab || prefab == \"\") throw js.getClassName(thisObj) + \"必须设置protected static prefab以绑定预制界面\";\r\n\r\n        let success: Function;\r\n        thisObj.$loading = new Promise((resolve, reject) => {\r\n            success = resolve;\r\n        });\r\n        let prototype = thisObj.prototype ? thisObj.prototype : Object.getPrototypeOf(thisObj);\r\n        let classz = prototype.constructor;\r\n        ResMgr.GetResources(prefab, (prefab: Prefab) => {\r\n            let node = instantiate(prefab);\r\n            thisObj.$instance = node.addComponent(classz);\r\n            $panel_cache.push(thisObj);\r\n            node.on(NodeEventType.PARENT_CHANGED, (...args: any[]) => {\r\n                thisObj.$showing = node.parent != undefined;\r\n                if (!node.parent) {\r\n                    if (thisObj.$instance['onHide']) thisObj.$instance['onHide']();\r\n                }\r\n            }, this);\r\n            let onload = thisObj.$instance.onLoad ? thisObj.$instance.onLoad.bind(thisObj.$instance) : undefined;\r\n            thisObj.$instance.onLoad = () => {\r\n                thisObj.$instance.$hasLoad = true;\r\n                if (!onload?.()) {\r\n                    let initComplete = thisObj.$instance._initComplete;\r\n                    thisObj.$instance._initComplete = undefined;\r\n                    initComplete();\r\n                }\r\n                if (thisObj.$beforLoadComplete) {\r\n                    thisObj.$instance.initSub.then(value => {\r\n                        thisObj.$beforLoadComplete(thisObj.$instance);\r\n                        thisObj.$beforLoadComplete = undefined;\r\n                        return value;\r\n                    });\r\n                }\r\n            }\r\n            success(thisObj.$instance);\r\n        }, (value, total) => {\r\n            if ($LoadingIns && thisObj.$showing) $LoadingIns.Show(value, total);\r\n        });\r\n        return thisObj.$loading;\r\n    }\r\n\r\n    /**\r\n     * 提前初始化\r\n     */\r\n    static async load() {\r\n        let thisObj = this;\r\n        if (thisObj.$instance) return thisObj.$loading;\r\n        await this.$getInstance(thisObj);\r\n    }\r\n\r\n    /**\r\n     * 显示面板\r\n     */\r\n    static async Show(...args) {\r\n        let thisObj = this;\r\n        return this.show(thisObj, UILay.Panel, ...args);\r\n    }\r\n\r\n    /**\r\n     * 顶层显示\r\n     */\r\n    static async ShowTop(...args) {\r\n        let thisObj = this;\r\n        return this.show(thisObj, UILay.Modal, ...args);\r\n    }\r\n\r\n    static async ShowUI(...args) {\r\n        let thisObj = this;\r\n        return this.show(thisObj, UILay.UI, ...args);\r\n    }\r\n\r\n    static async ShowMsg(...args) {\r\n        let thisObj = this;\r\n        return this.show(thisObj, UILay.MsgPanel, ...args);\r\n    }\r\n\r\n    static async ShowGame(...args) {\r\n        let thisObj = this;\r\n        return this.show(thisObj, UILay.Game, ...args);\r\n    }\r\n\r\n    static async SetPage(...args) {\r\n        let thisObj = this;\r\n        return this.setPage(thisObj, ...args);\r\n    }\r\n\r\n    /**\r\n     * 关闭面板\r\n     */\r\n    static Hide(...args) {\r\n        let thisObj = this;\r\n        thisObj.$showing = false;\r\n        if (thisObj.$instance) {\r\n            $hide(thisObj.$instance);\r\n            // thisObj.$instance.onHide(...args);\r\n        }\r\n    }\r\n    /**\r\n     * 刷新界面\r\n     * @param args \r\n     */\r\n    static async Flush(...args) {\r\n        let thisObj = this;\r\n        if (thisObj.$instance && thisObj.$instance.isComplete) {\r\n            thisObj.$instance.flush(...args);\r\n            return;\r\n        }\r\n        await thisObj.Waitting();\r\n        thisObj.$instance.flush(...args);\r\n    }\r\n\r\n    /**是否正在显示 */\r\n    static get Showing() {\r\n        let thisObj = this;\r\n        return thisObj.$showing;\r\n    }\r\n\r\n    /**\r\n     * 获取一打开的panel数量\r\n     */\r\n    static GetPanelNum(...excepts: string[]) {\r\n        let num = $getChildNum(...excepts);\r\n        return num;\r\n    }\r\n\r\n    /**\r\n     * 通过事件名发送自定义事件，如果节点尚未加载初试完毕则会延迟到初始完成后派发事件\r\n     * @param type \r\n     * @param arg0 \r\n     * @param arg1 \r\n     * @param arg2 \r\n     * @param arg3 \r\n     * @param arg4 \r\n     */\r\n    static Emit(type: string, arg0?: any, arg1?: any, arg2?: any, arg3?: any, arg4?: any) {\r\n        let thisObj = this;\r\n        if (thisObj.$loading) {\r\n            thisObj.$loading.then(p => {\r\n                p.Emit(type, arg0, arg1, arg2, arg3, arg4);\r\n                return p;\r\n            });\r\n            return;\r\n        } else if (!thisObj.$beforLoad) {\r\n            thisObj.$beforLoad = new Promise((resolve, reject) => {\r\n                thisObj.$beforLoadComplete = resolve;\r\n            });\r\n        }\r\n        thisObj.$beforLoad.then(p => {\r\n            p.Emit(type, arg0, arg1, arg2, arg3, arg4);\r\n            return p;\r\n        })\r\n    }\r\n\r\n    /**\r\n     * 调用方法\r\n     * @param method \r\n     * @param args \r\n     */\r\n    static Call<T>(method: keyof T, ...args: any[]) {\r\n        let thisObj = this;\r\n        // console.log(\"Call\", thisObj);\r\n        if (thisObj.$instance) {\r\n            thisObj.$instance[method](...args);\r\n            return;\r\n        } else if (thisObj.$loading) {\r\n            thisObj.$loading.then(p => {\r\n                p[method](...args);\r\n                return p;\r\n            });\r\n            return;\r\n        } else if (!thisObj.$beforLoad) {\r\n            thisObj.$beforLoad = new Promise((resolve, reject) => {\r\n                thisObj.$beforLoadComplete = resolve;\r\n            });\r\n        }\r\n        thisObj.$beforLoad.then(p => {\r\n            p[method](...args);\r\n        })\r\n    }\r\n\r\n    protected static Waitting() {\r\n        let thisObj = this;\r\n        if (thisObj.$instance) return thisObj.$instance.initSub;\r\n        if (thisObj.$loading) return thisObj.$loading;\r\n        if (!thisObj.$beforLoad) {\r\n            thisObj.$beforLoad = new Promise((resolve, reject) => {\r\n                thisObj.$beforLoadComplete = resolve;\r\n            });\r\n        }\r\n        return thisObj.$beforLoad;\r\n    }\r\n\r\n    /**\r\n     * 销毁\r\n     */\r\n    static Destroy() {\r\n        let thisObj = this;\r\n        if (thisObj.$instance) {\r\n            let node = thisObj.$instance.node as Node;\r\n            node.destroy();\r\n            thisObj.$instance = undefined;\r\n        }\r\n    }\r\n}\r\n\r\nclass ProxyComponent extends Component {\r\n    static async Create(prefab: string) {\r\n        let thisObj = this;\r\n        // let obj = popGameObj(thisObj);\r\n        // if (obj) return Promise.resolve(obj);\r\n        let success: Function;\r\n        let promise = new Promise((resolve, reject) => {\r\n            success = resolve;\r\n        });\r\n        ResMgr.GetResources(prefab, (prefab: Prefab) => {\r\n            let node = instantiate(prefab);\r\n            let panel = node.addComponent(thisObj as any);\r\n            success(panel);\r\n        }, (value, total) => {\r\n            if (value >= total && $LoadingIns) $LoadingIns.Show(value, total);\r\n        });\r\n        return promise;\r\n    }\r\n\r\n    protected find<T extends Component>(path: string): Node;\r\n    protected find<T extends Component>(path: string, componentType: classz<T> | _classz<T>): T | null;\r\n    protected find(path: string, componentType?: any) {\r\n        let className = js.getClassName(this);\r\n        path = path.replace(\"should_hide_in_hierarchy/\" + className + \"/\", \"\");\r\n        let node = this.node.getChildByPath(path);\r\n        if (componentType) return node.getComponent(componentType);\r\n        return node;\r\n    }\r\n\r\n    $loaded = false;\r\n    $beforLoad: () => void;\r\n    $onLoad: () => void;\r\n    protected onLoad(): void {\r\n        this.$onLoad && this.$onLoad();\r\n        if (this.$beforLoad) {\r\n            this.$beforLoad();\r\n            this.$beforLoad = undefined;\r\n        }\r\n        this.$loaded = true;\r\n        this.$onLoad = undefined;\r\n    }\r\n\r\n    $started = false;\r\n    $start: () => void;\r\n    protected start(): void {\r\n        this.$onLoad && this.$onLoad();\r\n        if (this.$beforLoad) {\r\n            this.$beforLoad();\r\n            this.$beforLoad = undefined;\r\n        }\r\n        this.$loaded = true;\r\n        this.$onLoad = undefined;\r\n\r\n        this.$start && this.$start();\r\n        this.$started = true;\r\n    }\r\n\r\n    $onEnable: () => void;\r\n    protected onEnable(): void { this.$onEnable && this.$onEnable(); }\r\n\r\n    $update: (dt: number) => void;\r\n    protected update(dt: number): void {\r\n        if (this.$beforLoad) {\r\n            this.$beforLoad();\r\n            this.$beforLoad = undefined;\r\n        }\r\n        if (this.$onLoad) {\r\n            this.$onLoad();\r\n            this.$onLoad = undefined;\r\n        }\r\n        if (this.$update) {\r\n            this.$update(dt);\r\n        }\r\n    }\r\n\r\n    $onDisable: () => void;\r\n    protected onDisable(): void { this.$onDisable && this.$onDisable(); }\r\n}\r\n\r\nlet $classSeed = 0;\r\nlet gameObjPool: { [className: string]: { [prefab: string]: any[] } } = {};\r\nfunction popGameObj(classz: any, prefab: string) {\r\n    if (!js.getClassName(classz)) {\r\n        $classSeed++;\r\n        while (js.getClassByName(\"GameObj\" + $classSeed)) {\r\n            $classSeed++;\r\n        }\r\n        js.setClassName(\"GameObj\" + $classSeed, classz);\r\n    }\r\n    let pool = gameObjPool[js.getClassName(classz)];\r\n    prefab = prefab || \"\";\r\n    if (pool && pool[prefab] && pool[prefab].length) {\r\n        return pool[prefab].pop();\r\n    }\r\n    return undefined;\r\n}\r\nfunction pushGameObj(obj: GameObj) {\r\n    if (obj.parent) obj.parent.removeChild(obj);\r\n    let classz = js.getClassName(obj);\r\n    if (!classz) {\r\n        obj.destroy();\r\n        return false;\r\n    }\r\n    let prefab = obj['$prefab'] || \"\";\r\n    let pool = gameObjPool[classz] || { [prefab]: [] };\r\n    gameObjPool[classz] = pool;\r\n    if (pool[prefab] && pool[prefab].indexOf(obj) == -1) {\r\n        pool[prefab].push(obj);\r\n    } else {\r\n        return false;\r\n    }\r\n    return true;\r\n}\r\n\r\n/**\r\n * 场景实体\r\n * @默认使用Create创建\r\n */\r\nexport abstract class GameObj extends Node {\r\n    static Create(prefab?: string) {\r\n        var thisObj: any = this;\r\n        if (!prefab) prefab = thisObj['$prefab'];\r\n        var obj = popGameObj(thisObj, prefab);\r\n        if (obj) return obj;\r\n        var obj = new (thisObj as any)();\r\n        if (!thisObj['$prefab']) {\r\n            thisObj['$prefab'] = obj.$prefab;\r\n            if (!js.getClassName(thisObj)) {\r\n                $classSeed++;\r\n                while (js.getClassByName(\"GameObj\" + $classSeed)) {\r\n                    $classSeed++;\r\n                }\r\n                js.setClassName(\"GameObj\" + $classSeed, thisObj);\r\n            }\r\n        }\r\n        obj.loadPrefab(prefab);\r\n        return obj;\r\n    }\r\n\r\n    protected static $classz: string = \"\";\r\n    protected static $prefab: string = \"\";\r\n    protected abstract $prefab: string;\r\n    protected $proxy: ProxyComponent;\r\n    protected loadSub: Promise<void>;\r\n    protected loadEnd: Function;\r\n    protected $hasLoad: boolean;\r\n    protected $getComponent: (classConstructor: any) => any;\r\n    protected $addComponent: <T extends Component>(classConstructor: __private.__types_globals__Constructor<T>) => T;\r\n    constructor() {\r\n        super();\r\n        let thisObj = this;\r\n\r\n        this.loadSub = new Promise((resolve, reject) => { thisObj.loadEnd = resolve; })\r\n        // if (!super.getComponent(UITransform)) super.addComponent(UITransform);\r\n        if (!this.$getComponent) this.$getComponent = super.getComponent;\r\n        if (!this.$addComponent) this.$addComponent = super.addComponent;\r\n        this[\"getComponent\"] = (classz: any) => {\r\n            if (classz == UITransform) return super.getComponent(UITransform);\r\n            if (this.$proxy) return this.$proxy.node.getComponent(classz);\r\n            return null;\r\n        }\r\n        this[\"getComponentInChildren\"] = (classz: any) => {\r\n            if (this.$proxy) return this.$proxy.node.getComponentInChildren(classz);\r\n            return null;\r\n        }\r\n        this[\"getComponents\"] = (classz: any) => {\r\n            if (this.$proxy) return this.$proxy.node.getComponents(classz);\r\n            return [];\r\n        }\r\n        this[\"getComponentsInChildren\"] = (classz: any) => {\r\n            if (this.$proxy) return this.$proxy.node.getComponentsInChildren(classz);\r\n            return [];\r\n        }\r\n    }\r\n\r\n    public GetLoadSub() {\r\n        return this.loadSub;\r\n    }\r\n\r\n    public removeSelf() {\r\n        if (this.parent) this.parent.removeChild(this);\r\n    }\r\n\r\n    public get hasLoad() {\r\n        if (!this.$proxy) return false;\r\n        return this.$proxy.$loaded;\r\n    }\r\n\r\n    public get prefabNode() {\r\n        if (!this.$proxy) return undefined;\r\n        return this.$proxy.node;\r\n    }\r\n\r\n    public GetChildren() {\r\n        if (this.$proxy) return this.$proxy.node.children;\r\n        return this.children;\r\n    }\r\n\r\n    protected loadPrefab(prefaburl?: string) {\r\n        let thisObj = this;\r\n        let url = prefaburl || thisObj.$prefab;\r\n        thisObj.$prefab = url;\r\n        ResMgr.GetResources(url, (prefab: Prefab) => {\r\n            if (!prefab) console.error(\"加载失败:\" + url);\r\n\r\n            let node = instantiate(prefab);\r\n\r\n            thisObj.$proxy = node.addComponent(ProxyComponent);\r\n\r\n            thisObj.$proxy.$beforLoad = thisObj.beforLoad.bind(thisObj);\r\n            thisObj.$proxy.$onLoad = thisObj.onLoad.bind(thisObj);\r\n            thisObj.$proxy.$start = thisObj.start.bind(thisObj);\r\n\r\n            thisObj.$proxy.$onEnable = thisObj.onEnable.bind(thisObj);\r\n            thisObj.$proxy.$update = thisObj.update.bind(thisObj);\r\n            thisObj.$proxy.$onDisable = thisObj.onDisable.bind(thisObj);\r\n\r\n            if (thisObj.$proxy.$started && thisObj.$proxy.$loaded) thisObj.$proxy.$start();\r\n\r\n            thisObj.addChild(node);\r\n        });\r\n    }\r\n\r\n    /**\r\n     * 层级优先级相同y坐标优先级越大越上层\r\n     * @param value \r\n     * @param offset \r\n     */\r\n    layPriority = 0;\r\n\r\n    private beforLoad() {\r\n        let loadEnd = this.loadEnd;\r\n        this.loadEnd = undefined;\r\n        if (loadEnd) loadEnd();\r\n        this.$hasLoad = true;\r\n    }\r\n    protected onLoad(): void {\r\n\r\n    }\r\n    protected start(): void { }\r\n    protected update(dt: number): void { }\r\n    protected onEnable(): void { }\r\n    protected onDisable(): void { }\r\n\r\n    find<T extends Component>(path: string): Node;\r\n    find<T extends Component>(path: string, componentType: classz<T> | _classz<T>): T | null;\r\n    find(path: string, componentType?: any) {\r\n        let className = js.getClassName(this);\r\n        path = path.replace(\"should_hide_in_hierarchy/\" + className + \"/\", \"\");\r\n        let node = this.$proxy.node.getChildByPath(path);\r\n        if (!node) return undefined;\r\n        if (componentType) return node.getComponent(componentType);\r\n        return node;\r\n    }\r\n\r\n    schedule(callback: any, interval?: number, repeat?: number, delay?: number): void {\r\n        if (!this.$proxy) return;\r\n        this.$proxy.schedule(callback, interval, delay);\r\n    }\r\n    scheduleOnce(callback: any, delay?: number): void {\r\n        if (!this.$proxy) return;\r\n        this.$proxy.scheduleOnce(callback, delay);\r\n    }\r\n\r\n    receive() {\r\n        if (this.$proxy) this.$proxy.unscheduleAllCallbacks();\r\n        if (!this.$hasLoad) {\r\n            let self = this;\r\n            this.loadSub.then(() => {\r\n                pushGameObj(self);\r\n            })\r\n        } else {\r\n            pushGameObj(this);\r\n        }\r\n    }\r\n}\r\n"]}