{"version":3,"sources":["file:///D:/plants_client/trunk/proj/assets/scripts/manager/GameSet.ts"],"names":["GameSet","Camera","Layers","find","geometry","math","view","addTick","cb","thisObj","result","handles","obj","func","push","removeTick","index","findIndex","splice","update","dt","call","mainCamera","_mainCamera","getComponent","UICamera","_uiCamera","Version","globalCfg","SceneHight","Lay_Scene","Enum","PixelSize","viewSize","getVisibleSizeInPixel","ScenePlane","Plane","create","HandPlane","ShowPoint","ScreamRotation","quat","GiantPoster","CardWide","CardHide","debug"],"mappings":";;;8GAEaA,O;;;;;;;;;AAFJC,MAAAA,M,OAAAA,M;AAA8BC,MAAAA,M,OAAAA,M;AAAwBC,MAAAA,I,OAAAA,I;AAAMC,MAAAA,Q,OAAAA,Q;AAAUC,MAAAA,I,OAAAA,I;AAAMC,MAAAA,I,OAAAA,I;;;;;;;;;yBAExEN,O,GAAN,MAAMA,OAAN,CAAc;AAOH,eAAPO,OAAO,CAACC,EAAD,EAAeC,OAAf,EAA6B;AACvC,cAAIC,MAAM,GAAG,KAAKC,OAAL,CAAaR,IAAb,CAAkBS,GAAG,IAAIA,GAAG,CAACC,IAAJ,IAAYL,EAAZ,IAAkBI,GAAG,CAACH,OAAJ,IAAeA,OAA1D,CAAb;AACA,cAAIC,MAAJ,EAAY;AACZ,eAAKC,OAAL,CAAaG,IAAb,CAAkB;AAAED,YAAAA,IAAI,EAAEL,EAAR;AAAYC,YAAAA,OAAO,EAAEA;AAArB,WAAlB;AACH;;AACgB,eAAVM,UAAU,CAACP,EAAD,EAAeC,OAAf,EAA6B;AAC1C,cAAIO,KAAK,GAAG,KAAKL,OAAL,CAAaM,SAAb,CAAuBL,GAAG,IAAIA,GAAG,CAACC,IAAJ,IAAYL,EAAZ,IAAkBI,GAAG,CAACH,OAAJ,IAAeA,OAA/D,CAAZ;AACA,cAAIO,KAAK,IAAI,CAAC,CAAd,EAAiB;AACjB,eAAKL,OAAL,CAAaO,MAAb,CAAoBF,KAApB,EAA2B,CAA3B;AACH;;AACY,eAANG,MAAM,CAACC,EAAD,EAAa;AACtB,eAAK,IAAIR,GAAT,IAAgB,KAAKD,OAArB,EAA8B;AAC1BC,YAAAA,GAAG,CAACC,IAAJ,CAASQ,IAAT,CAAcT,GAAG,CAACH,OAAlB,EAA2BW,EAA3B;AACH;AACJ;;AAMD;AACJ;AACA;AACyB,mBAAVE,UAAU,GAAW;AAC5B,cAAI,CAAC,KAAKC,WAAV,EAAuB;AACnB,iBAAKA,WAAL,GAAmBpB,IAAI,CAAC,YAAD,CAAJ,CAAmBqB,YAAnB,CAAgCvB,MAAhC,CAAnB;AACH;;AACD,iBAAO,KAAKsB,WAAZ;AACH;AAED;AACJ;AACA;;;AACuB,mBAARE,QAAQ,GAAW;AAC1B,cAAI,CAAC,KAAKC,SAAV,EAAqB;AACjB,iBAAKA,SAAL,GAAiBvB,IAAI,CAAC,eAAD,CAAJ,CAAsBqB,YAAtB,CAAmCvB,MAAnC,CAAjB;AACH;;AACD,iBAAO,KAAKyB,SAAZ;AACH;;AA7CgB,O;;AAAR1B,MAAAA,O,CAEO2B,O,GAAkB,S;AAFzB3B,MAAAA,O,CAIF4B,S;AAJE5B,MAAAA,O,CAMMW,O,GAA8C,E;AANpDX,MAAAA,O,CAuBF6B,U,GAAqB,C;AAvBnB7B,MAAAA,O,CAwBMuB,W;AAxBNvB,MAAAA,O,CAyBM0B,S;AAzBN1B,MAAAA,O,CA+CO8B,S,GAAY5B,MAAM,CAAC6B,IAAP,CAAY,OAAZ,C;;AAE5B;AAjDS/B,MAAAA,O,CAkDOgC,S,GAAY,I;;AAE5B;AApDShC,MAAAA,O,CAqDOiC,Q,GAAW3B,IAAI,CAAC4B,qBAAL,E;;AAE3B;AAvDSlC,MAAAA,O,CAwDOmC,U,GAA6B/B,QAAQ,CAACgC,KAAT,CAAeC,MAAf,CAAsB,CAAtB,EAAyB,CAAzB,EAA4B,CAA5B,EAA+B,CAA/B,C;AAxDpCrC,MAAAA,O,CA0DFsC,S;AA1DEtC,MAAAA,O,CA4DFuC,S;AA5DEvC,MAAAA,O,CA8DFwC,c,GAA4BnC,IAAI,CAACoC,IAAL,E;AA9D1BzC,MAAAA,O,CAgEF0C,W;AAhEE1C,MAAAA,O,CAkEF2C,Q,GAAW,MAAI,G;AAlEb3C,MAAAA,O,CAmEF4C,Q,GAAW,MAAI,G;AAnEb5C,MAAAA,O,CAqEF6C,K,GAAiB,K","sourcesContent":["import { Camera, InstanceMaterialType, Layers, Vec3, director, find, geometry, math, view } from \"cc\";\r\n\r\nexport class GameSet {\r\n\r\n    static readonly Version: string = \"v1.0.10\";\r\n\r\n    static globalCfg: any;\r\n\r\n    private static handles: { func: Function, thisObj: any }[] = [];\r\n    static addTick(cb: Function, thisObj: any) {\r\n        let result = this.handles.find(obj => obj.func == cb && obj.thisObj == thisObj);\r\n        if (result) return;\r\n        this.handles.push({ func: cb, thisObj: thisObj });\r\n    }\r\n    static removeTick(cb: Function, thisObj: any) {\r\n        let index = this.handles.findIndex(obj => obj.func == cb && obj.thisObj == thisObj);\r\n        if (index == -1) return;\r\n        this.handles.splice(index, 1);\r\n    }\r\n    static update(dt: number) {\r\n        for (let obj of this.handles) {\r\n            obj.func.call(obj.thisObj, dt);\r\n        }\r\n    }\r\n\r\n    static SceneHight: number = 0;\r\n    private static _mainCamera: Camera;\r\n    private static _uiCamera: Camera;\r\n\r\n    /**\r\n     * 获取主摄像机\r\n     */\r\n    static get mainCamera(): Camera {\r\n        if (!this._mainCamera) {\r\n            this._mainCamera = find(\"MainCamera\").getComponent(Camera);\r\n        }\r\n        return this._mainCamera;\r\n    }\r\n\r\n    /**\r\n     * 获取ui摄像机\r\n     */\r\n    static get UICamera(): Camera {\r\n        if (!this._uiCamera) {\r\n            this._uiCamera = find(\"Canvas/Camera\").getComponent(Camera);\r\n        }\r\n        return this._uiCamera;\r\n    }\r\n\r\n    static readonly Lay_Scene = Layers.Enum['SCENE'];\r\n\r\n    /**像素与世界单位(米)的比例 */\r\n    static readonly PixelSize = 0.01;\r\n\r\n    /**视窗像素 */\r\n    static readonly viewSize = view.getVisibleSizeInPixel();\r\n\r\n    /**地平面 */\r\n    static readonly ScenePlane: geometry.Plane = geometry.Plane.create(0, 1, 0, 0);\r\n\r\n    static HandPlane: geometry.Plane;\r\n\r\n    static ShowPoint: Vec3;\r\n\r\n    static ScreamRotation: math.Quat = math.quat();\r\n\r\n    static GiantPoster: IGiantPoster;\r\n\r\n    static CardWide = 4.1*1.1;\r\n    static CardHide = 5.2*1.1;\r\n\r\n    static debug: boolean = false;\r\n}\r\n\r\nexport interface IGiantPoster {\r\n    isShowingPoster: boolean;\r\n    ShowGiantPoster(): Promise<any>;\r\n    EndGiantPoster(): void;\r\n}"]}