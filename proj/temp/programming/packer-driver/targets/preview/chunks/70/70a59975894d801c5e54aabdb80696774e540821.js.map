{"version":3,"sources":["file:///D:/plants_client/trunk/proj/assets/scripts/module/task/TaskActiveBoxTipsCont.ts"],"names":["TaskActiveBoxTipsCont","Component","Label","Layout","AutoScroller","BagItem","title","awardList","isInit","datas","title_str","onLoad","node","getChildByName","getComponent","SetHandle","updateAwardItem","bind","on","onSelect","updateShow","onEnable","SetData","string","UpdateDatas","layout","getChildByPath","affectedByScale","updateLayout","item","data","awardItem","addComponent","setThing","index"],"mappings":";;;gIAMaA,qB;;;;;;;;;;;;;;;;;;;;;;;;;;;AANJC,MAAAA,S,OAAAA,S;AAAWC,MAAAA,K,OAAAA,K;AAAOC,MAAAA,M,OAAAA,M;;AAClBC,MAAAA,Y,iBAAAA,Y;;AACAC,MAAAA,O,iBAAAA,O;;;;;;;;;uCAIIL,qB,GAAN,MAAMA,qBAAN,SAAoCC,SAApC,CAA8C;AAAA;AAAA;AAAA,eACzCK,KADyC;AAAA,eAEzCC,SAFyC;AAAA,eAGzCC,MAHyC,GAGxB,KAHwB;AAAA,eAIzCC,KAJyC,GAIb,EAJa;AAAA,eAKzCC,SALyC;AAAA;;AAMvCC,QAAAA,MAAM,GAAS;AACrB,eAAKL,KAAL,GAAa,KAAKM,IAAL,CAAUC,cAAV,CAAyB,OAAzB,EAAkCC,YAAlC,CAA+CZ,KAA/C,CAAb;AACA,eAAKK,SAAL,GAAiB,KAAKK,IAAL,CAAUC,cAAV,CAAyB,WAAzB,EAAsCC,YAAtC;AAAA;AAAA,2CAAjB;AACA,eAAKP,SAAL,CAAeQ,SAAf,CAAyB,KAAKC,eAAL,CAAqBC,IAArB,CAA0B,IAA1B,CAAzB;AACA,eAAKV,SAAL,CAAeK,IAAf,CAAoBM,EAApB,CAAuB,QAAvB,EAAiC,KAAKC,QAAtC,EAAgD,IAAhD;AAEA,eAAKX,MAAL,GAAc,IAAd;AACA,eAAKY,UAAL;AACH;;AACSC,QAAAA,QAAQ,GAAS;AACvB,eAAKD,UAAL;AACH;;AACDE,QAAAA,OAAO,CAACb,KAAD,EAA4BH,KAA5B,EAA0C;AAC7C,eAAKG,KAAL,GAAaA,KAAb;AACA,eAAKC,SAAL,GAAiBJ,KAAjB;AACA,eAAKc,UAAL;AACH;;AAEOA,QAAAA,UAAU,GAAO;AACrB,cAAI,CAAC,KAAKZ,MAAN,IAAgB,CAAC,KAAKC,KAA1B,EAAiC;AACjC,eAAKH,KAAL,CAAWiB,MAAX,GAAoB,KAAKb,SAAzB;AACA,eAAKH,SAAL,CAAeiB,WAAf,CAA2B,KAAKf,KAAhC;AACA,cAAIgB,MAAM,GAAG,KAAKlB,SAAL,CAAeK,IAAf,CAAoBc,cAApB,CAAmC,cAAnC,EAAmDZ,YAAnD,CAAgEX,MAAhE,CAAb;AACAsB,UAAAA,MAAM,CAACE,eAAP,GAAyB,IAAzB;AACAF,UAAAA,MAAM,CAACG,YAAP;AACH;;AACOZ,QAAAA,eAAe,CAACa,IAAD,EAAaC,IAAb,EAAsC;AACzD,cAAIC,SAAS,GAAGF,IAAI,CAACf,YAAL;AAAA;AAAA,iCAAhB;AACA,cAAI,CAACiB,SAAL,EAAgBA,SAAS,GAAGF,IAAI,CAACG,YAAL;AAAA;AAAA,iCAAZ;AAChBD,UAAAA,SAAS,CAACE,QAAV,CAAmBH,IAAnB;AACH;;AACeX,QAAAA,QAAQ,CAACe,KAAD,EAAgBL,IAAhB,EAA4B,CAChD;AACA;AACA;AACA;;AAJgD;AAKnD;;AA1CgD,O","sourcesContent":["import { Component, Label, Layout, Node } from \"cc\";\r\nimport { AutoScroller } from \"../../component/AutoScroller\";\r\nimport { BagItem } from \"../bag/BagItem\";\r\nimport proto from \"../../net/Protocol\";\r\n\r\n\r\nexport class TaskActiveBoxTipsCont extends Component {\r\n    private title:Label;\r\n    private awardList:AutoScroller;\r\n    private isInit:boolean = false;\r\n    private datas:proto.base.IThing[] = [];\r\n    private title_str: string;\r\n    protected onLoad(): void {\r\n        this.title = this.node.getChildByName(\"Label\").getComponent(Label);\r\n        this.awardList = this.node.getChildByName(\"awardList\").getComponent(AutoScroller);\r\n        this.awardList.SetHandle(this.updateAwardItem.bind(this));\r\n        this.awardList.node.on('select', this.onSelect, this);\r\n\r\n        this.isInit = true;\r\n        this.updateShow();\r\n    }\r\n    protected onEnable(): void {\r\n        this.updateShow();\r\n    }\r\n    SetData(datas:proto.base.IThing[], title:string) {\r\n        this.datas = datas;\r\n        this.title_str = title;\r\n        this.updateShow();\r\n    }\r\n\r\n    private updateShow():void{\r\n        if (!this.isInit || !this.datas) return;\r\n        this.title.string = this.title_str;\r\n        this.awardList.UpdateDatas(this.datas);\r\n        let layout = this.awardList.node.getChildByPath(\"view/content\").getComponent(Layout);\r\n        layout.affectedByScale = true;\r\n        layout.updateLayout();\r\n    }\r\n    private updateAwardItem(item: Node, data: proto.base.IThing) {\r\n        let awardItem = item.getComponent(BagItem);\r\n        if (!awardItem) awardItem = item.addComponent(BagItem);\r\n        awardItem.setThing(data);\r\n    }\r\n    protected async onSelect(index: number, item: Node) {\r\n        // let selectData = this.datas[index];\r\n        // if(selectData){\r\n        //     ItemTips.Show(selectData);\r\n        // }\r\n    }\r\n}\r\n"]}