{"version":3,"sources":["file:///D:/plants_client/trunk/proj/assets/scripts/module/fight/opOutput/Out_AddCardToHand.ts"],"names":["Out_AddCardToHand","BattleBaseComp","battleDataMgr","isAddCardEnd","start","fromIsPlayerA","isPlayerA","data","fromPlayerId","toIsPlayerA","card","playerId","tt","scene","AddCardToHand","isExit","exit","onUpdate","dt","reset"],"mappings":";;;6DAQaA,iB;;;;;;;;;;;;;;;;;;;;;;;;;;AANJC,MAAAA,c,iBAAAA,c;;AACAC,MAAAA,a,iBAAAA,a;;;;;;;AAET;AACA;AACA;mCACaF,iB,GAAN,MAAMA,iBAAN;AAAA;AAAA,4CAA6F;AAAA;AAAA;AAAA,eACxFG,YADwF,GAChE,KADgE;AAAA;;AAC1D;AACtBC,QAAAA,KAAK,GAAG;AAAA;;AAAA;AACpB,gBAAIC,aAAsB,GAAG;AAAA;AAAA,gDAAcC,SAAd,CAAwB,KAAI,CAACC,IAAL,CAAUC,YAAlC,CAA7B;AACA,gBAAIC,WAAoB,GAAG;AAAA;AAAA,gDAAcH,SAAd,CAAwB,KAAI,CAACC,IAAL,CAAUG,IAAV,CAAeC,QAAvC,CAA3B;AACA,gBAAIC,EAAE,SAAS,KAAI,CAACC,KAAL,CAAWC,aAAX,CAAyBL,WAAzB,EAAsC,KAAI,CAACF,IAA3C,CAAf;AACA,gBAAI,KAAI,CAACQ,MAAT,EAAiB,OAJG,CAKpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA,YAAA,KAAI,CAACC,IAAL;AA9BoB;AAgCvB;;AAESC,QAAAA,QAAQ,CAACC,EAAD,EAAmB;AACjC,cAAI,CAAC,KAAKf,YAAV,EAAwB,OADS,CAEjC;;AACA,eAAKa,IAAL;AACH;;AAESG,QAAAA,KAAK,GAAS;AACpB,eAAKhB,YAAL,GAAoB,KAApB;AACH;;AA5C+F,O","sourcesContent":["\r\nimport proto from \"../../../net/Protocol\";\r\nimport { BattleBaseComp } from \"../../battle/BattleBaseComp\";\r\nimport { battleDataMgr } from \"../../battle/BattleDataMgr\";\r\n\r\n/**\r\n * 添加卡牌到手卡\r\n */\r\nexport class Out_AddCardToHand extends BattleBaseComp<proto.base.IBattleRoomOpOutput_AddCardToHand> {\r\n    private isAddCardEnd: boolean = false;//是否添加手牌结束\r\n    protected async start() {\r\n        let fromIsPlayerA: boolean = battleDataMgr.isPlayerA(this.data.fromPlayerId);\r\n        let toIsPlayerA: boolean = battleDataMgr.isPlayerA(this.data.card.playerId);\r\n        let tt = await this.scene.AddCardToHand(toIsPlayerA, this.data);\r\n        if (this.isExit) return;\r\n        // switch (this.data.fromLocation) {\r\n        //     //非可视区域卡牌添加到手卡\r\n        //     case base.BattleRoomCardLocation.Deck:\r\n        //     case base.BattleRoomCardLocation.Drop:\r\n        //     case base.BattleRoomCardLocation.Del:\r\n        //         if ((fromIsPlayerA && toIsPlayerA) || (!fromIsPlayerA && !toIsPlayerA)) {\r\n        //             //来源区域与目标区域都是第一视觉玩家 或者 来源区域与目标区域都是第二视觉玩家 \r\n        //             this.scene.AddCardFormHeadToHand(toIsPlayerA, this.data);\r\n        //         } else if (fromIsPlayerA && !toIsPlayerA) {\r\n        //             //来源区域是第一视觉玩家目标区域是第二视觉玩家 \r\n        //             this.scene.AddCardFormMyHeadToAdHand(this.data.fromInstId, this.data.fromSkillId, this.data.card);\r\n        //         } else if (!fromIsPlayerA && toIsPlayerA) {\r\n        //             //来源区域是第二视觉玩家目标区域是第第一视觉玩家 \r\n        //             this.scene.AddCardFormAdHeadToMyHand(this.data.fromInstId, this.data.fromSkillId, this.data.card);\r\n        //         }\r\n        //         break;\r\n        //     case base.BattleRoomCardLocation.Unknown://凭空出现的卡（系统发卡， 或者技能生产一张卡）\r\n        //         this.scene.AddCardFormHeadToHand(toIsPlayerA, this.data);\r\n        //         break;\r\n        //     //地形上的添加到手卡区\r\n        //     case base.BattleRoomCardLocation.Terrain:\r\n        //         this.scene.AddCardFormAreaToHand(toIsPlayerA, this.data.fromInstId, this.data.fromSkillId, this.data.card);\r\n        //         break;\r\n        // }\r\n        // if (0.5 - tt > 0) await Second(0.5 - tt);\r\n        this.exit();\r\n\r\n    }\r\n\r\n    protected onUpdate(dt: number): void {\r\n        if (!this.isAddCardEnd) return;\r\n        //全部动作完成退出播放\r\n        this.exit();\r\n    }\r\n\r\n    protected reset(): void {\r\n        this.isAddCardEnd = false;\r\n    }\r\n}\r\n"]}