{"version":3,"sources":["file:///D:/plants_client/trunk/proj/assets/scripts/module/common/Tips.ts"],"names":["Tips","Input","Label","Second","Panel","UILay","prefab","label","btn1","btn2","okCallback","noCallback","closeLoop","$lockLay","Modal","onLoad","find","on","EventType","TOUCH_END","onOk","onNo","CloseBy","Hide","onShow","flush","msg","okCallBack","noCallBack","autoClose","string","active","loop","onHide","undefined"],"mappings":";;;mHAKaA,I;;;;;;;;;;;;;;;;;;;;;;;;;;;AALJC,MAAAA,K,OAAAA,K;AAAOC,MAAAA,K,OAAAA,K;;AAEPC,MAAAA,M,iBAAAA,M;;AACAC,MAAAA,K,iBAAAA,K;AAAOC,MAAAA,K,iBAAAA,K;;;;;;;;;sBAEHL,I,GAAN,MAAMA,IAAN;AAAA;AAAA,0BAAyB;AAAA;AAAA;AAAA,eAClBM,MADkB,GACD,qBADC;AAAA,eAEpBC,KAFoB;AAAA,eAGpBC,IAHoB;AAAA,eAIpBC,IAJoB;AAAA,eAKpBC,UALoB;AAAA,eAMpBC,UANoB;AAAA,eAOpBC,SAPoB,GAOR,CAPQ;AAAA,eAQlBC,QARkB,GAQP;AAAA;AAAA,8BAAMC,KARC;AAAA;;AAUlBC,QAAAA,MAAM,GAAS;AACrB,eAAKR,KAAL,GAAa,KAAKS,IAAL,CAAU,OAAV,EAAmBd,KAAnB,CAAb;AACA,eAAKM,IAAL,GAAY,KAAKQ,IAAL,CAAU,MAAV,CAAZ;AACA,eAAKP,IAAL,GAAY,KAAKO,IAAL,CAAU,MAAV,CAAZ;AACA,eAAKR,IAAL,CAAUS,EAAV,CAAahB,KAAK,CAACiB,SAAN,CAAgBC,SAA7B,EAAwC,KAAKC,IAA7C,EAAmD,IAAnD;AACA,eAAKX,IAAL,CAAUQ,EAAV,CAAahB,KAAK,CAACiB,SAAN,CAAgBC,SAA7B,EAAwC,KAAKE,IAA7C,EAAmD,IAAnD;AACA,eAAKC,OAAL,CAAa,MAAb;AACA,eAAKN,IAAL,CAAU,UAAV,EAAsBC,EAAtB,CAAyBhB,KAAK,CAACiB,SAAN,CAAgBC,SAAzC,EAAoD,KAAKI,IAAzD,EAA+D,IAA/D;AACH;;AAESC,QAAAA,MAAM,GAAS,CAExB;;AACKC,QAAAA,KAAK,CAACC,GAAD,EAAcC,UAAd,EAAqCC,UAArC,EAA4DC,SAA5D,EAAgF;AAAA;;AAAA;AACvF,YAAA,KAAI,CAACtB,KAAL,CAAWuB,MAAX,GAAoBJ,GAApB;AACA,YAAA,KAAI,CAAChB,UAAL,GAAkBiB,UAAlB;AACA,YAAA,KAAI,CAAChB,UAAL,GAAkBiB,UAAlB;;AACA,gBAAID,UAAJ,EAAgB;AACZ,cAAA,KAAI,CAACnB,IAAL,CAAUuB,MAAV,GAAmB,IAAnB;AACA,cAAA,KAAI,CAACtB,IAAL,CAAUsB,MAAV,GAAmB,IAAnB;AACH,aAHD,MAGO;AACH,cAAA,KAAI,CAACvB,IAAL,CAAUuB,MAAV,GAAmB,KAAnB;AACA,cAAA,KAAI,CAACtB,IAAL,CAAUsB,MAAV,GAAmB,KAAnB;AACH;;AAED,gBAAIF,SAAJ,EAAe;AACX,cAAA,KAAI,CAACjB,SAAL;AACA,kBAAIoB,IAAI,GAAG,KAAI,CAACpB,SAAhB;AACA,oBAAM;AAAA;AAAA,oCAAOiB,SAAP,CAAN;AACA,kBAAIG,IAAI,IAAI,KAAI,CAACpB,SAAjB,EAA4B;;AAC5B,cAAA,KAAI,CAACW,IAAL;AACH;AAlBsF;AAmB1F;;AACSU,QAAAA,MAAM,GAAuB;AACnC,eAAKvB,UAAL,GAAkBwB,SAAlB;AACA,eAAKvB,UAAL,GAAkBuB,SAAlB;AACA,eAAKtB,SAAL;AACH;;AACOQ,QAAAA,IAAI,GAAG;AACX,eAAKV,UAAL,IAAmB,KAAKA,UAAL,EAAnB;AACA,eAAKa,IAAL;AACH;;AACOF,QAAAA,IAAI,GAAG;AACX,eAAKV,UAAL,IAAmB,KAAKA,UAAL,EAAnB;AACA,eAAKY,IAAL;AACH;;AAvD2B,O","sourcesContent":["import { Input, Label, Node } from \"cc\";\r\nimport { EventMgr } from \"../../manager/EventMgr\";\r\nimport { Second } from \"../../utils/Utils\";\r\nimport { Panel, UILay } from \"../../manager/GameRoot\";\r\n\r\nexport class Tips extends Panel {\r\n    protected prefab: string = \"prefabs/common/Tips\";\r\n    private label: Label;\r\n    private btn1: Node;\r\n    private btn2: Node;\r\n    private okCallback: Function;\r\n    private noCallback: Function;\r\n    private closeLoop = 0;\r\n    protected $lockLay = UILay.Modal;\r\n\r\n    protected onLoad(): void {\r\n        this.label = this.find(\"Label\", Label);\r\n        this.btn1 = this.find(\"btn1\");\r\n        this.btn2 = this.find(\"btn2\");\r\n        this.btn1.on(Input.EventType.TOUCH_END, this.onOk, this);\r\n        this.btn2.on(Input.EventType.TOUCH_END, this.onNo, this);\r\n        this.CloseBy(\"mask\");\r\n        this.find(\"closeBtn\").on(Input.EventType.TOUCH_END, this.Hide, this);\r\n    }\r\n\r\n    protected onShow(): void {\r\n\r\n    }\r\n    async flush(msg: string, okCallBack?: Function, noCallBack?: Function, autoClose?: number) {\r\n        this.label.string = msg;\r\n        this.okCallback = okCallBack;\r\n        this.noCallback = noCallBack;\r\n        if (okCallBack) {\r\n            this.btn1.active = true;\r\n            this.btn2.active = true;\r\n        } else {\r\n            this.btn1.active = false;\r\n            this.btn2.active = false;\r\n        }\r\n\r\n        if (autoClose) {\r\n            this.closeLoop++;\r\n            let loop = this.closeLoop;\r\n            await Second(autoClose);\r\n            if (loop != this.closeLoop) return;\r\n            this.Hide();\r\n        }\r\n    }\r\n    protected onHide(...args: any[]): void {\r\n        this.okCallback = undefined;\r\n        this.noCallback = undefined;\r\n        this.closeLoop++;\r\n    }\r\n    private onOk() {\r\n        this.okCallback && this.okCallback();\r\n        this.Hide();\r\n    }\r\n    private onNo() {\r\n        this.noCallback && this.noCallback();\r\n        this.Hide();\r\n    }\r\n}"]}