{"version":3,"sources":["file:///D:/plants_client/trunk/proj/assets/scripts/module/battle/BattleCard.ts"],"names":["BattleCard","Component","Sprite","Label","base","CfgMgr","icon","energy","energyLab","power","powerLab","cardIdLab","back","isInit","data","cardCfg","onLoad","node","getChildByName","getComponent","getChildByPath","updateShow","active","terrainState","BattleRoomInCardState","CardStateShow","string","instId","toString","Cost","Power","setData","GetCard","configId","cardData"],"mappings":";;;uHAIaA,U;;;;;;;;;;;;;;;;;;;;;;;AAJEC,MAAAA,S,OAAAA,S;AAAWC,MAAAA,M,OAAAA,M;AAAQC,MAAAA,K,OAAAA,K;;AAC3BC,MAAAA,I;;AACEC,MAAAA,M,iBAAAA,M;;;;;;;;;4BAEIL,U,GAAN,MAAMA,UAAN,SAAyBC,SAAzB,CAAmC;AAAA;AAAA;AAAA,eAC9BK,IAD8B;AAAA,eAE9BC,MAF8B;AAAA,eAG9BC,SAH8B;AAAA,eAI9BC,KAJ8B;AAAA,eAK9BC,QAL8B;AAAA,eAM9BC,SAN8B;AAAA,eAO9BC,IAP8B;AAAA,eAQ9BC,MAR8B,GAQZ,KARY;AAAA,eAS9BC,IAT8B;AAAA,eAU9BC,OAV8B;AAAA;;AAW5BC,QAAAA,MAAM,GAAS;AACrB,eAAKV,IAAL,GAAY,KAAKW,IAAL,CAAUC,cAAV,CAAyB,MAAzB,EAAiCC,YAAjC,CAA8CjB,MAA9C,CAAZ;AACA,eAAKK,MAAL,GAAc,KAAKU,IAAL,CAAUC,cAAV,CAAyB,QAAzB,CAAd;AACA,eAAKV,SAAL,GAAiB,KAAKS,IAAL,CAAUG,cAAV,CAAyB,kBAAzB,EAA6CD,YAA7C,CAA0DhB,KAA1D,CAAjB;AACA,eAAKM,KAAL,GAAa,KAAKQ,IAAL,CAAUC,cAAV,CAAyB,OAAzB,CAAb;AACA,eAAKR,QAAL,GAAgB,KAAKO,IAAL,CAAUG,cAAV,CAAyB,gBAAzB,EAA2CD,YAA3C,CAAwDhB,KAAxD,CAAhB;AACA,eAAKQ,SAAL,GAAiB,KAAKM,IAAL,CAAUG,cAAV,CAAyB,WAAzB,EAAsCD,YAAtC,CAAmDhB,KAAnD,CAAjB;AACA,eAAKS,IAAL,GAAY,KAAKK,IAAL,CAAUG,cAAV,CAAyB,MAAzB,CAAZ;AACA,eAAKP,MAAL,GAAc,IAAd;AACA,eAAKQ,UAAL;AACH;;AAEOA,QAAAA,UAAU,GAAS;AACvB,cAAI,CAAC,KAAKR,MAAV,EAAkB;;AAClB,cAAI,KAAKC,IAAT,EAAe;AACX,iBAAKF,IAAL,CAAUU,MAAV,GAAmB,CAAC,KAAKR,IAAL,CAAUS,YAAX,IAA2B,KAAKT,IAAL,CAAUS,YAAV,IAA0B;AAAA;AAAA,8BAAKC,qBAAL,CAA2BC,aAAnG;AACA,iBAAKd,SAAL,CAAee,MAAf,GAAwB,KAAKZ,IAAL,CAAUa,MAAV,CAAiBC,QAAjB,EAAxB;;AACA,gBAAI,KAAKb,OAAT,EAAkB;AACd,mBAAKR,MAAL,CAAYe,MAAZ,GAAqB,IAArB;AACA,mBAAKb,KAAL,CAAWa,MAAX,GAAoB,IAApB;AACA,mBAAKd,SAAL,CAAekB,MAAf,GAAwB,KAAKX,OAAL,CAAac,IAAb,CAAkBD,QAAlB,EAAxB;AACA,mBAAKlB,QAAL,CAAcgB,MAAd,GAAuB,KAAKX,OAAL,CAAae,KAAb,CAAmBF,QAAnB,EAAvB;AAEH,aAND,MAMO;AACH,mBAAKrB,MAAL,CAAYe,MAAZ,GAAqB,KAArB;AACA,mBAAKb,KAAL,CAAWa,MAAX,GAAoB,KAApB;AACH;AAEJ,WAdD,MAcO,CAEN;AACJ;;AAEDS,QAAAA,OAAO,CAACjB,IAAD,EAAuC;AAC1C,eAAKA,IAAL,GAAYA,IAAZ;AACA,eAAKC,OAAL,GAAe;AAAA;AAAA,gCAAOiB,OAAP,CAAe,KAAKlB,IAAL,CAAUmB,QAAzB,CAAf;AACA,eAAKZ,UAAL;AACH;;AAEkB,YAARa,QAAQ,GAA6B;AAC5C,iBAAO,KAAKpB,IAAZ;AACH;;AApDqC,O","sourcesContent":["import { Node, Component, Sprite, Label } from \"cc\";\r\nimport base from \"../../net/proto/BaseUtils\";\r\nimport { CfgMgr, StdCard } from \"../../manager/CfgMgr\";\r\n\r\nexport class BattleCard extends Component {\r\n    private icon: Sprite;\r\n    private energy: Node;\r\n    private energyLab: Label;\r\n    private power: Node;\r\n    private powerLab: Label;\r\n    private cardIdLab: Label;\r\n    private back: Node;\r\n    private isInit: boolean = false;\r\n    private data: base.IBattleRoomCardData;\r\n    private cardCfg: StdCard;\r\n    protected onLoad(): void {\r\n        this.icon = this.node.getChildByName(\"icon\").getComponent(Sprite);\r\n        this.energy = this.node.getChildByName(\"energy\");\r\n        this.energyLab = this.node.getChildByPath(\"energy/energyLab\").getComponent(Label);\r\n        this.power = this.node.getChildByName(\"power\");\r\n        this.powerLab = this.node.getChildByPath(\"power/powerLab\").getComponent(Label);\r\n        this.cardIdLab = this.node.getChildByPath(\"cardIdLab\").getComponent(Label);\r\n        this.back = this.node.getChildByPath(\"back\");\r\n        this.isInit = true;\r\n        this.updateShow();\r\n    }\r\n\r\n    private updateShow(): void {\r\n        if (!this.isInit) return;\r\n        if (this.data) {\r\n            this.back.active = !this.data.terrainState || this.data.terrainState != base.BattleRoomInCardState.CardStateShow;\r\n            this.cardIdLab.string = this.data.instId.toString();\r\n            if (this.cardCfg) {\r\n                this.energy.active = true;\r\n                this.power.active = true;\r\n                this.energyLab.string = this.cardCfg.Cost.toString();\r\n                this.powerLab.string = this.cardCfg.Power.toString();\r\n                \r\n            } else {\r\n                this.energy.active = false;\r\n                this.power.active = false;\r\n            }\r\n            \r\n        } else {\r\n\r\n        }\r\n    }\r\n\r\n    setData(data: base.IBattleRoomCardData): void {\r\n        this.data = data;\r\n        this.cardCfg = CfgMgr.GetCard(this.data.configId);\r\n        this.updateShow();\r\n    }\r\n\r\n    public get cardData(): base.IBattleRoomCardData {\r\n        return this.data;\r\n    }\r\n    \r\n}"]}